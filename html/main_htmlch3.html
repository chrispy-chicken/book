<!DOCTYPE html> 
<html lang='en-US' xml:lang='en-US'> 
<head><title>3 The ZX-Calculus</title> 
<meta charset='utf-8' /> 
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' /> 
<meta content='width=device-width,initial-scale=1' name='viewport' /> 
<link href='main_html.css' rel='stylesheet' type='text/css' /> 
<meta content='main_html.tex' name='src' /> 
 <script async='async' id='MathJax-script' src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/mml-chtml.js' type='text/javascript'></script>  
</head><body>
   <!-- l. 7 --><div class='crosslinks'><p class='noindent'>[<a href='main_htmlch4.html'>next</a>] [<a href='main_htmlch2.html'>prev</a>] [<a href='main_htmlch2.html#tailmain_htmlch2.html'>prev-tail</a>] [<a href='#tailmain_htmlch3.html'>tail</a>] [<a href='main_html.html#main_htmlch3.html'>up</a>] </p></div>
   <h2 class='chapterHead' id='the-zxcalculus'><span class='titlemark'>Chapter 3</span><br /><a id='x5-470003'></a>The ZX-Calculus</h2>
<!-- l. 10 --><p class='noindent'>Now that we have covered the basic concepts of quantum computing, it is time to
do some interesting stuff. In the previous chapter we discussed string
diagrams and how they can be used to represent linear maps and, in
particular, quantum circuits. Actually <span class='cmti-10x-x-109'>calculating </span>the linear map they
represent is tedious though, and in some cases also (impossibly) hard, as the
dimension of the spaces involved scales exponentially in the number of qubits.
It would then certainly be nice if we could work directly with string
diagrams instead. In this chapter we will introduce the <span class='cmbx-10x-x-109'>ZX-calculus</span>, a
graphical language that works with a particular type of string diagrams
we call <span class='cmbx-10x-x-109'>ZX-diagrams</span>. These ZX-diagrams can represent any quantum
computation. In addition, the ZX-calculus gives us <span class='cmbx-10x-x-109'>rules </span>for manipulating
ZX-diagrams. In this way we can prove interesting properties of states, unitaries,
projections, or any other linear map between qubits we want, all the while
working with diagrams instead of those pesky matrices. In this chapter we
will see how to represent quantum circuits as ZX-diagrams, and how to
use the basic rules of the ZX-calculus to start proving some interesting
things about them. We will just barely be scratching the surface however,
as there is much more to be said about the things we can do with the
ZX-calculus. In fact, we will be spending the rest of the book doing exactly
that!
</p>
   <h3 class='sectionHead' id='zxdiagrams'><span class='titlemark'>3.1   </span> <a id='x5-480003.1'></a>ZX-diagrams</h3>
<!-- l. 14 --><p class='noindent'>
</p>
   <h4 class='subsectionHead' id='spiders'><span class='titlemark'>3.1.1   </span> <a id='x5-490003.1.1'></a>Spiders</h4>
<!-- l. 15 --><p class='noindent'>ZX-diagrams arise as compositions and tensor products of the following basic linear maps:
</p> <table class='tabular' id='TBL-50' rules='groups'><colgroup id='TBL-50-1g'><col id='TBL-50-1' /><col id='TBL-50-2' /></colgroup><colgroup id='TBL-50-3g'><col id='TBL-50-3' /><col id='TBL-50-4' /></colgroup><tr id='TBL-50-1-' style='vertical-align:baseline;'><td class='td11' id='TBL-50-1-1' style='text-align:left;'>
 <span class='cmbx-10x-x-109'>Z-spiders</span> </td><td class='td11' id='TBL-50-1-2' style='text-align:center; white-space:nowrap;'>                         X-spiders                                             </td>
</tr><tr id='TBL-50-2-' style='vertical-align:baseline;'><td class='td11' id='TBL-50-2-1' style='text-align:left;'>
 <!-- l. 30 --><img src="svgs/z-phase-spider-1.svg" alt="diagram of z-phase-spider-1" class="inline-diagram" /> </td><td class='td11' id='TBL-50-2-2' style='text-align:center; white-space:nowrap;'> <!-- l. 30 --><img src="svgs/x-phase-spider-1.svg" alt="diagram of x-phase-spider-1" class="inline-diagram" />  </td>
</tr></table><p>
These generators are called spiders for no other reason than the fact that they
look a bit like spiders when you draw them. Let’s focus on the Z-spider. Most of
what we say will also be true of the X-spider, by symmetry. First, note this is
actually not just a single map, but a family of linear maps of the form:
</p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 34 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
             <mstyle mathsize='2.03em'><mrow><mo fence='true' form='prefix'>{</mo><mrow></mrow><mo fence='true' form='postfix'></mo></mrow></mstyle><msubsup><mrow><mi>Z</mi></mrow><mrow><mi>m</mi></mrow><mrow><mi>n</mi></mrow></msubsup><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo> <mo class='MathClass-punc' stretchy='false'>:</mo> <msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><msup><mrow><mi>ℂ</mi></mrow><mrow><mn>2</mn></mrow></msup><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>m</mi></mrow></msup> <mo class='MathClass-rel' stretchy='false'>→</mo> <msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><msup><mrow><mi>ℂ</mi></mrow><mrow><mn>2</mn></mrow></msup><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>n</mi></mrow></msup><mspace class='nbsp' width='0.33em'></mspace><mstyle mathsize='2.03em'><mrow><mo fence='true' form='prefix'>|</mo><mrow></mrow><mo fence='true' form='postfix'></mo></mrow></mstyle><mspace class='nbsp' width='0.33em'></mspace><mi>m</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>n</mi> <mo class='MathClass-rel' stretchy='false'>∈</mo> <mi>ℕ</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>α</mi> <mo class='MathClass-rel' stretchy='false'>∈</mo> <mo class='MathClass-open' stretchy='false'>[</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>2</mn><mi>π</mi><mo class='MathClass-close' stretchy='false'>)</mo><mstyle mathsize='2.03em'><mrow><mo fence='true' form='prefix'>}</mo><mrow></mrow><mo fence='true' form='postfix'></mo></mrow></mstyle>
</mrow></math></td></tr></table>
<!-- l. 40 --><p class='indent'>   where the notation <!-- l. 40 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mtext class='MathClass-open' stretchy='false'>(−)</mtext></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>n</mi></mrow></msup></math>
means ‘<!-- l. 40 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>
tensor copies’, e.g. </p><table class='equation-star'><tr><td>
<!-- l. 41 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
                     <msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><msup><mrow><mi>ℂ</mi></mrow><mrow><mn>2</mn></mrow></msup><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>n</mi></mrow></msup> <mo class='MathClass-punc' stretchy='false'>:</mo><mo class='MathClass-rel' stretchy='false'>=</mo><munder class='msub'><mrow><munder accentunder='false'><mrow> <msup><mrow><mi>ℂ</mi></mrow><mrow><mn>2</mn></mrow></msup> <mo class='MathClass-bin' stretchy='false'>⊗</mo><mi class='MathClass-op'>…</mi><mo> ⁡<!-- FUNCTION APPLICATION --></mo> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <msup><mrow><mi>ℂ</mi></mrow><mrow><mn>2</mn></mrow></msup></mrow><mo>⏟</mo></munder> </mrow><mrow>
<mi>n</mi></mrow></munder><mi class='MathClass-op'>≅</mi><mo> ⁡<!-- FUNCTION APPLICATION --></mo><msup><mrow><mi>ℂ</mi></mrow><mrow><msup><mrow><mn>2</mn></mrow><mrow><mi>n</mi></mrow></msup>
   </mrow></msup>
</mrow></math></td></tr></table>
<!-- l. 45 --><p class='indent'>   The number <!-- l. 45 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math>
is the number of input ‘legs’ and the number
<!-- l. 45 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> is the
number of output ‘legs’. These two numbers together are called the <span class='cmbx-10x-x-109'>arity </span>of a
spider. These correspond to the number of qubits which the map takes as input
and output, respectively: </p><table class='equation'><tr><td>
<!-- l. 46 --><p class='indent'>
</p><!-- l. 46 --><object id='x5-49001r1' data="svgs/eq-z-spider-def.svg" alt="diagram of eq:z-spider-def" class="svg-diagram"></object></td><td class='eq-no'>(3.1)</td></tr></table>
                                                                     

                                                                     
<!-- l. 49 --><p class='indent'>   where <!-- l. 49 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>⟨</mo><mi>j</mi><msup><mrow><mo class='MathClass-rel' stretchy='false'>|</mo></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>m</mi></mrow></msup></mrow></math>
and <!-- l. 49 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>j</mi><msup><mrow><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>n</mi></mrow></msup></mrow></math> are
the <!-- l. 49 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math>- and
<!-- l. 49 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-fold
tensor products of bras and kets, respectively, and we take the convention that
<!-- l. 49 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow><mtext class='MathClass-open' stretchy='false'>(...)</mtext></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mn>0</mn></mrow></msup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>. Keep
in mind that, just like in circuit notation, the ordering of composition is
flipped between the picture and the bra-ket expression. For example, wires
coming in the <span class='cmti-10x-x-109'>left </span>side of the diagram above correspond to bras which
actually appear on the <span class='cmti-10x-x-109'>right </span>side of the bra-ket expression. That’s why the
<!-- l. 50 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math>’s and
<!-- l. 50 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>’s seem to have
flipped around in equation (<a href='#x5-49001r1'>3.1<!-- tex4ht:ref: eq:z-spider-def  --></a>). We can also describe a Z-spider in matrix notation. Start
with a <!-- l. 51 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow><mn>2</mn></mrow><mrow><mi>n</mi></mrow></msup> <mo class='MathClass-bin' stretchy='false'>×</mo> <msup><mrow><mn>2</mn></mrow><mrow><mi>m</mi></mrow></msup></mrow></math> matrix
of all <!-- l. 51 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math>’s, then add
a <!-- l. 51 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>1</mn></math> to the top-left
corner and an <!-- l. 51 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></math>
to the bottom-right corner: </p><table class='equation-star'><tr><td>
<!-- l. 52 --><object data="svgs/z-phase-spider.svg" alt="diagram of z-phase-spider" class="svg-diagram"></object></td></tr></table>
<!-- l. 55 --><p class='indent'>   When <!-- l. 55 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>, we’ll
get a <!-- l. 55 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow><mn>2</mn></mrow><mrow><mn>0</mn></mrow></msup> <mo class='MathClass-bin' stretchy='false'>×</mo> <msup><mrow><mn>2</mn></mrow><mrow><mn>0</mn></mrow></msup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn> <mo class='MathClass-bin' stretchy='false'>×</mo> <mn>1</mn></mrow></math> matrix
(i.e. a scalar), so the top-left corner <span class='cmti-10x-x-109'>is </span>the bottom-right corner. In that case, the resulting
scalar is <!-- l. 55 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></mrow></math>:
</p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 56 --><object data="svgs/z-phase-scalar.svg" alt="diagram of z-phase-scalar" class="svg-diagram"></object></td></tr></table>
<!-- l. 59 --><p class='indent'>   Unlike quantum gates, Z-spiders can have a different number of inputs from
outputs, and hence do not need not be unitary. In fact, they are often not even
invertible.
</p>
   <div class='newtheorem'>
<!-- l. 60 --><p class='noindent'><span class='head'>
<a id='x5-49002r1'></a>
<span class='cmbx-10x-x-109'>Exercise 3.1.</span>  </span>Show that for <!-- l. 61 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>&gt;</mo> <mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mi>n</mi> <mo class='MathClass-rel' stretchy='false'>&gt;</mo> <mn>0</mn></mrow></math>,
Z-spiders always correspond to matrices with rank 2. What are the other
possibilities for the rank of a Z-spider if <!-- l. 61 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math>
or <!-- l. 61 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>
is 0?
</p>
   </div>
<!-- l. 62 --><p class='indent'>    However, when <!-- l. 63 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>,
Z-spiders <span class='cmti-10x-x-109'>are </span>unitary and correspond to the familiar Z-phase gates we met in the
previous chapter: </p><table class='equation'><tr><td>
<!-- l. 64 --><p class='indent'>
</p><!-- l. 64 --><object id='x5-49003r2' data="svgs/eq-Z-spider-phase-gate.svg" alt="diagram of eq:Z-spider-phase-gate" class="svg-diagram"></object></td><td class='eq-no'>(3.2)</td></tr></table>
<!-- l. 67 --><p class='indent'>   We don’t always write angles on spiders, in which case the ‘default’ angle is assumed
to be <!-- l. 67 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math>:
</p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 68 --><object data="svgs/z-spider.svg" alt="diagram of z-spider" class="svg-diagram"></object></td></tr></table>
<!-- l. 71 --><p class='indent'>   We will call such spiders <span class='cmbx-10x-x-109'>phase-free</span>. Some familiar quantum states arise out of phase-free
Z-spiders when <!-- l. 72 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>.
Namely, we obtain (unnormalised) Bell, GHZ, and
<!-- l. 72 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-fold
GHZ states: </p><table class='equation-star'><tr><td>
<!-- l. 73 --><object data="svgs/z-spider-0-2.svg" alt="diagram of z-spider-0-2" class="svg-diagram"></object></td></tr></table>
<!-- l. 76 --><p class='indent'>   To normalise these states, we should multiply both sides in these examples by
<!-- l. 76 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mfrac><mrow><mn>1</mn></mrow>
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac></mrow></math>. We
will indicate a scalar multiple of a ZX-diagram just like we would for any other
kind of linear map. For example: </p><table class='equation-star'><tr><td>
<!-- l. 77 --><object data="svgs/z-spider-0-3.svg" alt="diagram of z-spider-0-3" class="svg-diagram"></object></td></tr></table>
                                                                     

                                                                     
<!-- l. 80 --><p class='indent'>   Most the time we won’t bother with normalisation unless it really matters. It
usually doesn’t. Finally, looking at Z-spiders with a single output leg and
<!-- l. 81 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi> <mo class='MathClass-rel' stretchy='false'>∈</mo><mo class='MathClass-open' stretchy='false'>{</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mi>π</mi><mo class='MathClass-close' stretchy='false'>}</mo></mrow></math>,
we can construct X-basis (a.k.a. “plus” basis) elements
<!-- l. 81 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|+⟩</mtext></mrow></math> and
<!-- l. 81 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|−⟩</mtext></mrow></math>,
again up to normalisation: </p><table class='equation'><tr><td>
<!-- l. 82 --><p class='indent'>
</p><!-- l. 82 --><object id='x5-49004r3' data="svgs/eq-x-kets.svg" alt="diagram of eq:x-kets" class="svg-diagram"></object></td><td class='eq-no'>(3.3)</td></tr></table>
<!-- l. 85 --><p class='indent'>   X-spiders are pretty much the same as Z-spiders, but everything is defined
relative to the X-basis rather than the Z-basis: </p><table class='equation'><tr><td>
<!-- l. 86 --><p class='indent'>
</p><!-- l. 86 --><object id='x5-49005r4' data="svgs/eq-X-spider-def.svg" alt="diagram of eq:X-spider-def" class="svg-diagram"></object></td><td class='eq-no'>(3.4)</td></tr></table>
<!-- l. 89 --><p class='indent'>   Hence, all of the special cases highlighted above apply equally well to X-spiders, after
substituting <!-- l. 89 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>0</mn> <mo class='MathClass-rel' stretchy='false'>↔</mo> <mo class='MathClass-bin' stretchy='false'>+</mo></mrow></math> and
<!-- l. 89 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>1</mn> <mo class='MathClass-rel' stretchy='false'>↔</mo><mo class='MathClass-bin' stretchy='false'>−</mo></mrow></math>. In particular, when
<!-- l. 89 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>, the X-spider is unitary
and represents the <!-- l. 89 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>-phase
gate: </p><table class='equation'><tr><td>
<!-- l. 90 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 90 --><object id='x5-49006r5' data="svgs/eq-X-spider-phase-gate.svg" alt="diagram of eq:X-spider-phase-gate" class="svg-diagram"></object></td><td class='eq-no'>(3.5)</td></tr></table>
<!-- l. 93 --><p class='indent'>   It will be useful for us to calculate the definition of an X-spider in terms of
the Z-basis. This will enable us, for example, to do concrete matrix calculations
involving both kinds of spiders, as well as understand some of the interaction
properties we’ll meet later in this chapter. We’ll start with the basis states. Note
that the Z and the X bases have a symmetric presentation with respect to each
other:
</p><!-- tex4ht:inline --><!-- l. 100 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
                        <mtr><mtd class='align-odd' columnalign='right'><mtext class='MathClass-rel' stretchy='false'>|+⟩</mtext></mtd>                        <mtd class='align-even'><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace> <mfrac><mrow><mn>1</mn></mrow> 
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> <mrow><mo fence='true' form='prefix'>(</mo><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow><mo fence='true' form='postfix'>)</mo></mrow><mspace width='2em'></mspace></mtd>                         <mtd class='align-label' columnalign='right'></mtd>                        <mtd class='align-label'>
                        <mspace width='2em'></mspace></mtd></mtr><mtr><mtd class='align-odd' columnalign='right'><mtext class='MathClass-rel' stretchy='false'>|−⟩</mtext></mtd>                        <mtd class='align-even'><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace> <mfrac><mrow><mn>1</mn></mrow> 
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> <mrow><mo fence='true' form='prefix'>(</mo><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow><mo fence='true' form='postfix'>)</mo></mrow><mspace width='2em'></mspace></mtd>                         <mtd class='align-label' columnalign='right'></mtd>                        <mtd class='align-label'>
                        <mspace width='2em'></mspace></mtd></mtr><mtr><mtd class='align-odd' columnalign='right'><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mtd>                         <mtd class='align-even'><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace> <mfrac><mrow><mn>1</mn></mrow> 
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> <mrow><mo fence='true' form='prefix'>(</mo><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow><mo fence='true' form='postfix'>)</mo></mrow><mspace width='2em'></mspace></mtd>                        <mtd class='align-label' columnalign='right'></mtd>                        <mtd class='align-label'>
                        <mspace width='2em'></mspace></mtd></mtr><mtr><mtd class='align-odd' columnalign='right'><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mtd>                         <mtd class='align-even'><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace> <mfrac><mrow><mn>1</mn></mrow> 
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> <mrow><mo fence='true' form='prefix'>(</mo><mrow><mtext class='MathClass-rel' stretchy='false'>|+⟩−|−⟩</mtext></mrow><mo fence='true' form='postfix'>)</mo></mrow><mspace width='2em'></mspace></mtd>                        <mtd class='align-label' columnalign='right'></mtd>                        <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 101 --><p class='noindent'>Consequently, we can modify (<a href='#x5-49004r3'>3.3<!-- tex4ht:ref: eq:x-kets  --></a>) to get an expression for the two Z-basis states:
</p><table class='equation'><tr><td>
<!-- l. 102 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 102 --><object id='x5-49007r6' data="svgs/eq-z-kets.svg" alt="diagram of eq:z-kets" class="svg-diagram"></object></td><td class='eq-no'>(3.6)</td></tr></table>
<!-- l. 105 --><p class='indent'>   Notice that <span class='cmti-10x-x-109'>X-spiders </span>are used to construct <span class='cmti-10x-x-109'>Z-basis </span>states and vice-versa. This is
a common “gotcha” in ZX-calculation: to get basis elements, make sure you use
spiders of the <span class='cmti-10x-x-109'>opposite </span>colour. Now, let’s calculate the matrix for the special case
where <!-- l. 107 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>,
<!-- l. 107 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>2</mn></mrow></math> and
<!-- l. 107 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>:
</p><table class='equation'><tr><td>
<!-- l. 108 --><p class='indent'>
</p><!-- l. 108 --><object id='x5-49008r7' data="svgs/eq-x-spider-2-1.svg" alt="diagram of eq:x-spider-2-1" class="svg-diagram"></object></td><td class='eq-no'>(3.7)</td></tr></table>
<!-- l. 111 --><p class='indent'>   If we expand the first term in the expression above, we’ll get a sum over all
8 possible combinations of Z-basis elements, times the normalisation
factor:
</p><!-- tex4ht:inline --><!-- l. 124 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
          <mtr><mtd class='align-odd' columnalign='right'><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-rel' stretchy='false'>=</mo>   <mfrac><mrow><mn>1</mn></mrow> 
<mrow><mn>2</mn><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac></mtd>          <mtd class='align-even'> <mo class='MathClass-bin' stretchy='false'>⋅</mo><mstyle mathsize='1.19em'><mrow><mo fence='true' form='prefix'>(</mo><mrow></mrow><mo fence='true' form='postfix'></mo></mrow></mstyle><mspace class='thinspace' width='0.17em'></mspace><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>00</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>01</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>10</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>11</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mspace width='2em'></mspace></mtd>           <mtd class='align-label' columnalign='right'></mtd>          <mtd class='align-label'>
          <mspace width='2em'></mspace></mtd></mtr><mtr><mtd class='align-odd' columnalign='right'></mtd>                        <mtd class='align-even'> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>00</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>01</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>10</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>11</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mspace class='thinspace' width='0.17em'></mspace><mstyle mathsize='1.19em'><mrow><mo fence='true' form='prefix'>)</mo><mrow></mrow><mo fence='true' form='postfix'></mo></mrow></mstyle><mspace width='2em'></mspace></mtd>          <mtd class='align-label' columnalign='right'></mtd>          <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 125 --><p class='noindent'>Expanding the second term in (<a href='#x5-49008r7'>3.7<!-- tex4ht:ref: eq:x-spider-2-1  --></a>), we get almost the same thing, except we pick
up a <!-- l. 125 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo> <mn>1</mn></mrow></math>
sign whenever there is an odd number of 1’s:
                                                                     

                                                                     
</p><!-- tex4ht:inline --><!-- l. 138 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
          <mtr><mtd class='align-odd' columnalign='right'><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-rel' stretchy='false'>=</mo>   <mfrac><mrow><mn>1</mn></mrow> 
<mrow><mn>2</mn><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac></mtd>          <mtd class='align-even'> <mo class='MathClass-bin' stretchy='false'>⋅</mo><mstyle mathsize='1.19em'><mrow><mo fence='true' form='prefix'>(</mo><mrow></mrow><mo fence='true' form='postfix'></mo></mrow></mstyle><mspace class='thinspace' width='0.17em'></mspace><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>00</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>01</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>10</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>11</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mspace width='2em'></mspace></mtd>           <mtd class='align-label' columnalign='right'></mtd>          <mtd class='align-label'>
          <mspace width='2em'></mspace></mtd></mtr><mtr><mtd class='align-odd' columnalign='right'></mtd>                        <mtd class='align-even'><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>00</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>01</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>10</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>11</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mspace class='thinspace' width='0.17em'></mspace><mstyle mathsize='1.19em'><mrow><mo fence='true' form='prefix'>)</mo><mrow></mrow><mo fence='true' form='postfix'></mo></mrow></mstyle><mspace width='2em'></mspace></mtd>          <mtd class='align-label' columnalign='right'></mtd>          <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 139 --><p class='noindent'>In Eq. (<a href='#x5-49008r7'>3.7<!-- tex4ht:ref: eq:x-spider-2-1  --></a>) we add these two terms together, so we see that when we expand
them that each term with an odd number of 1’s cancels, while those with an even
number add together. We hence have: </p><table class='equation'><tr><td>
<!-- l. 140 --><p class='indent'>
</p><!-- l. 140 --><object id='x5-49009r8' data="svgs/eq-x-spider-is-XOR.svg" alt="diagram of eq:x-spider-is-XOR" class="svg-diagram"></object></td><td class='eq-no'>(3.8)</td></tr></table>
<!-- l. 143 --><p class='indent'>   We see then that this map is ‘classical’: it sends Z-basis states to Z-basis states. In
particular, it maps <!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>00</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
and <!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>11</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
to <!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>, while
<!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>01</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> and
<!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>10</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> are mapped
to <!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>.
But this is exactly what the XOR does! So we have
<!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msubsup><mrow><mi>X</mi></mrow><mrow><mn>2</mn></mrow><mrow><mn>1</mn></mrow></msubsup><mo class='MathClass-open' stretchy='false'>[</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>]</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mi>x</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>y</mi><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mi>x</mi> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mi>y</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> where
<!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>x</mi> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mi>y</mi></mrow></math> is the XOR of
the two bits <!-- l. 143 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>x</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>y</mi> <mo class='MathClass-rel' stretchy='false'>∈</mo> <mi>𝔽</mi><mn>2</mn></mrow></math>.
</p>
   <div class='newtheorem'>
<!-- l. 144 --><p class='noindent'><span class='head'>
<a id='x5-49010r2'></a>
                                                                     

                                                                     
<span class='cmbx-10x-x-109'>Exercise 3.2.</span>  </span>What                           classical                           map
would we get if we instead took the X-spider with 2 inputs, 1 output and a
<!-- l. 145 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>
phase?
</p>
   </div>
<!-- l. 146 --><p class='indent'>    We can generalise this construction to see what any X-spider does on states
in the Z-basis. Let’s consider a general X-spider as defined in (<a href='#x5-49005r4'>3.4<!-- tex4ht:ref: eq:X-spider-def  --></a>). Expanding
the first term gives a uniform superposition over all Z-basis elements:
</p><table class='equation-star'><tr><td>
<!-- l. 150 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
<mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace><msup><mrow> <mrow><mo fence='true' form='prefix'>(</mo><mrow> <mfrac><mrow><mn>1</mn></mrow>
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> </mrow><mo fence='true' form='postfix'>)</mo></mrow> </mrow><mrow><mi>n</mi><mo class='MathClass-bin' stretchy='false'>+</mo><mi>m</mi></mrow></msup><mo class='MathClass-bin' stretchy='false'>⋅</mo><munder class='msub'><mrow><mo>∑</mo>
  </mrow><mrow><mtable class='subarray-c' columnalign='center' rowspacing='0'><mtr><mtd><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub>
</mtd></mtr><mtr><mtd><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
      </mtd></mtr>                                                                                                                </mtable></mrow></munder><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo>
</mrow></math></td></tr></table>
<!-- l. 153 --><p class='indent'>   The normalisation factor comes from the fact that we have
<!-- l. 153 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math> copies of
<!-- l. 153 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-open' stretchy='false'>⟨+|</mtext></mrow></math> and
<!-- l. 153 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> copies of
<!-- l. 153 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|+⟩</mtext></mrow></math>, each of which
contribute a <!-- l. 153 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mfrac><mrow><mn>1</mn></mrow>
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac></mrow></math>,
which multiply together. Expanding the second term in (<a href='#x5-49005r4'>3.4<!-- tex4ht:ref: eq:X-spider-def  --></a>), we again get a sum
over all of the Z-basis elements, but with different coefficients inside the sum:
</p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 155 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow>
<mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace><msup><mrow> <mrow><mo fence='true' form='prefix'>(</mo><mrow> <mfrac><mrow><mn>1</mn></mrow>
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> </mrow><mo fence='true' form='postfix'>)</mo></mrow> </mrow><mrow><mi>n</mi><mo class='MathClass-bin' stretchy='false'>+</mo><mi>m</mi></mrow></msup><mo class='MathClass-bin' stretchy='false'>⋅</mo><munder class='msub'><mrow><mo>∑</mo>
  </mrow><mrow><mtable class='subarray-c' columnalign='center' rowspacing='0'><mtr><mtd><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub>
</mtd></mtr><mtr><mtd><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
      </mtd></mtr>                                                                                                                </mtable></mrow></munder><msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-bin' stretchy='false'>+</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub><mo class='MathClass-bin' stretchy='false'>+</mo><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-bin' stretchy='false'>+</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
                           </mrow></msup><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>j</mi></mrow><mrow>
<mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo>
</mrow></math></td></tr></table>
<!-- l. 158 --><p class='indent'>   Every term in the sum gets an <!-- l. 158 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></math>,
but when any of the <!-- l. 158 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>i</mi></math>’s
or <!-- l. 158 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>j</mi></math>’s is
<!-- l. 158 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>1</mn></math>, it also gets
a factor of <!-- l. 158 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo> <mn>1</mn></mrow></math>.
Putting the two terms together, we get this expression for an X-spider:
</p><table class='equation-star'><tr><td>
<!-- l. 159 --><object data="svgs/x-phase-spider.svg" alt="diagram of x-phase-spider" class="svg-diagram"></object></td></tr></table>
<!-- l. 162 --><p class='indent'>   where the coefficients are given by: </p><table class='equation-star'><tr><td>
<!-- l. 163 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
             <mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub></mrow><mrow><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
                </mrow></msubsup><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-punc' stretchy='false'>:</mo><mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-bin' stretchy='false'>+</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub><mo class='MathClass-bin' stretchy='false'>+</mo><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-bin' stretchy='false'>+</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
                           </mrow></msup><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup>
</mrow></math></td></tr></table>
<!-- l. 166 --><p class='indent'>   Now, that’s a pretty big expression, so let’s try to make
some sense out of it. First, note that, whenever the bit string
<!-- l. 166 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>,</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>,</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub><mo class='MathClass-punc' stretchy='false'>,</mo><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>,</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>,</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
contains an <span class='cmti-10x-x-109'>even </span>number of 1’s, this term has a coefficient of
<!-- l. 166 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></mrow></math>,
                                                                     

                                                                     
whereas if it contains an <span class='cmti-10x-x-109'>odd </span>number of 1’s, it’s coefficient is
<!-- l. 166 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>−</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></mrow></math>. This
can be written succinctly in terms of an XOR as follows: </p><table class='equation-star'><tr><td>
<!-- l. 167 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
<mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub></mrow><mrow><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
                </mrow></msubsup><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace><mrow class='cases'> <mrow><mo fence='true' form='prefix'>{</mo><mrow> <mtable align='axis' class='array' columnlines='none' displaystyle='true' equalcolumns='false' equalrows='false' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> if </mtext></mstyle><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>−</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> otherwise</mtext></mstyle>                              </mtd></mtr> <!-- @{}l@{\quad }l@{} --></mtable>                                            </mrow><mo fence='true' form='postfix'></mo></mrow></mrow>
</mrow></math></td></tr></table>
<!-- l. 174 --><p class='indent'>   Here, we used the fact that the XOR of all the elements in the bitstring tells us if
there were an even number of 1s or an odd number. For that reason, the XOR of
a bunch of bits is sometimes called the <span class='cmbx-10x-x-109'>parity </span>(where the word “parity” means
the property of something being even vs. odd). If we specialise to the case where
<!-- l. 175 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>, we get the
numbers <!-- l. 175 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>2</mn></math>
and <!-- l. 175 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math>,
respectively, in the two cases above. By swallowing the
<!-- l. 175 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>2</mn></math> into
the normalisation factor, we can write the coefficients for a phase-free X-spider as
follows:
</p><!-- tex4ht:inline --><!-- l. 182 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
           <mtr><mtd class='align-odd' columnalign='right'><mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub></mrow><mrow><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
                </mrow></msubsup></mtd>           <mtd class='align-even'> <mo class='MathClass-rel' stretchy='false'>=</mo> <mrow class='cases'> <mrow><mo fence='true' form='prefix'>{</mo><mrow> <mtable align='axis' class='array' columnlines='none' displaystyle='true' equalcolumns='false' equalrows='false' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>1</mn><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> if </mtext></mstyle><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mtd></mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>0</mn><mspace class='quad' width='1em'></mspace></mtd> <mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> otherwise</mtext></mstyle></mtd></mtr>   <!-- @{}l@{\quad }l@{} --></mtable>                                                    </mrow><mo fence='true' form='postfix'></mo></mrow></mrow><mspace width='2em'></mspace></mtd>           <mtd class='align-label' columnalign='right'></mtd>           <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 183 --><p class='noindent'>We can think of such spiders as a family of “generalised XOR” maps.
                                                                     

                                                                     
</p>
   <h4 class='subsectionHead' id='defining-zxdiagrams'><span class='titlemark'>3.1.2   </span> <a id='x5-500003.1.2'></a>Defining ZX-diagrams</h4>
<!-- l. 185 --><p class='noindent'>We will now give two equivalent definitions of ZX-diagrams: one that
is closely related to quantum circuit notation and the other to tensor
networks.
</p>
   <h5 class='subsubsectionHead' id='zxdiagrams-are-circuits-made-of-spiders'><span class='titlemark'>3.1.2.1   </span> <a id='x5-510003.1.2.1'></a>ZX-diagrams are “circuits” made of spiders</h5>
<!-- l. 187 --><p class='noindent'>Just like gates form the building blocks for circuits, Z-spiders and X-spiders form
the building blocks for ZX-diagrams, under tensor product and composition. For
example: </p><table class='equation-star'><tr><td>
<!-- l. 188 --><object data="svgs/zx-circuit.svg" alt="diagram of zx-circuit" class="svg-diagram"></object></td></tr></table>
<!-- l. 191 --><p class='indent'>   A ZX-diagram can be built iteratively by composing other ZX-diagrams
either horizontally, by connecting the output wires of the first to the input wires
of the second, or vertically, simply by ‘stacking’ the diagrams to create the tensor
product. The base case of this inductive construction starts with the Z- and
X-spiders. To demonstrate how this works, let’s work through an example: we
will show how to construct the CNOT gate using a Z- and X-spider. The first
ingredient we need is the phase-free Z-spider with 1 input and 2 outputs:
</p><table class='equation'><tr><td>
<!-- l. 194 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 194 --><object id='x5-51001r9' data="svgs/eq-Zsp-3.svg" alt="diagram of eq:Zsp-3" class="svg-diagram"></object></td><td class='eq-no'>(3.9)</td></tr></table>
<!-- l. 197 --><p class='indent'>   Its matrix has 2 columns and 4 rows. In general, the matrix of a general ZX-diagram
with <!-- l. 197 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> inputs and
<!-- l. 197 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math> outputs will
have <!-- l. 197 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mn>2</mn></mrow><mrow><mi>n</mi></mrow></msup></math> columns,
and <!-- l. 197 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mn>2</mn></mrow><mrow><mi>m</mi></mrow></msup></math> rows.
Suppose now that we wish to vertically compose the spider (<a href='#x5-51001r9'>3.9<!-- tex4ht:ref: eq:Zsp-3  --></a>) with an identity, which has
matrix diag<!-- l. 198 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mn>1</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>.
The way we calculate the result is with the Kronecker product: </p><table class='equation-star'><tr><td>
<!-- l. 199 --><object data="svgs/Zsp-3-id.svg" alt="diagram of Zsp-3-id" class="svg-diagram"></object></td></tr></table>
<!-- l. 202 --><p class='indent'>   Note that we said above that a ZX-diagram is built by composing
spiders. We see here that that is not entirely true: we also need some
‘structural’ components like the identity wire. We’ll say a bit more about this
later. We calculate the matrix of the other ingredient we need similarly:
</p><table class='equation-star'><tr><td>
<!-- l. 204 --><object data="svgs/Xsp-3-id.svg" alt="diagram of Xsp-3-id" class="svg-diagram"></object></td></tr></table>
                                                                     

                                                                     
<!-- l. 207 --><p class='indent'>   Now to make a CNOT we need to horizontally compose these two
subdiagrams: </p><table class='equation'><tr><td>
<!-- l. 208 --><p class='indent'>
</p><!-- l. 208 --><object id='x5-51002r10' data="svgs/eq-CNOT-composition.svg" alt="diagram of eq:CNOT-composition" class="svg-diagram"></object></td><td class='eq-no'>(3.10)</td></tr></table>
<!-- l. 211 --><p class='indent'>   To see that this is indeed a CNOT we calculate its matrix. On the level of the
matrix, the horizontal composition of diagrams corresponds to matrix
multiplication: </p><table class='equation'><tr><td>
<!-- l. 213 --><p class='indent'>
</p><!-- l. 213 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
<mstyle class='label' id='x5-51003r11'></mstyle><!-- endlabel --> <mfrac><mrow><mn>1</mn></mrow>
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> <mrow><mo fence='true' form='prefix'>(</mo><mrow><mtable align='axis' class='array' columnlines='none none none none none none none none none none none none none none none none none none none' displaystyle='true' equalcolumns='false' equalrows='false' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd></mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn></mtd>
</mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd></mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn></mtd></mtr> <!-- *\c@MaxMatrixCols c --></mtable>                                           </mrow><mo fence='true' form='postfix'>)</mo></mrow> <mrow><mo fence='true' form='prefix'>(</mo><mrow><mtable align='axis' class='array' columnlines='none none none none none none none none none none none none none none none none none none none' displaystyle='true' equalcolumns='false' equalrows='false' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd></mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn></mtd>
</mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd></mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn></mtd>
</mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd></mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn></mtd>
</mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd></mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>1</mn></mtd></mtr> <!-- *\c@MaxMatrixCols c --></mtable>                                                                               </mrow><mo fence='true' form='postfix'>)</mo></mrow><mspace class='nbsp' width='0.33em'></mspace><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace><mspace class='nbsp' width='0.33em'></mspace>  <mfrac><mrow><mn>1</mn></mrow> 
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> <mrow><mo fence='true' form='prefix'>(</mo><mrow><mtable align='axis' class='array' columnlines='none none none none none none none none none none none none none none none none none none none' displaystyle='true' equalcolumns='false' equalrows='false' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd></mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn></mtd>
</mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd><mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd></mtr> <mtr class='array-row'><mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>1</mn> </mtd> <mtd class='array-td' columnalign='center'> <mn>0</mn></mtd></mtr> <!-- *\c@MaxMatrixCols c --></mtable>                                                                               </mrow><mo fence='true' form='postfix'>)</mo></mrow>
</mrow></math></td><td class='eq-no'>(3.11)</td></tr></table>
<!-- l. 217 --><p class='indent'>   Up to a scalar factor of <!-- l. 217 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msqrt><mrow><mn>2</mn></mrow></msqrt></math>
this is indeed the matrix of the CNOT gate. If this matrix calculation business
seems tedious: that is precisely <span class='cmti-10x-x-109'>why </span>we want to use the ZX-calculus! We will see
that many identities which would normally be proven by working with matrices
can be replaced with graphical reasoning instead. In Eq. (<a href='#x5-51002r10'>3.10<!-- tex4ht:ref: eq:CNOT-composition  --></a>) we have first the
Z-spider and then the X-spider. As we will see later, spiders have many
symmetries, and for this reason we can also write the CNOT as first an X-spider
and then a Z-spider: </p><table class='equation'><tr><td>
<!-- l. 221 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 221 --><object id='x5-51004r12' data="svgs/eq-CNOT-symmetry.svg" alt="diagram of eq:CNOT-symmetry" class="svg-diagram"></object></td><td class='eq-no'>(3.12)</td></tr></table>
   <div class='newtheorem'>
<!-- l. 224 --><p class='noindent'><span class='head'>
<a id='x5-51005r3'></a>
<span class='cmbx-10x-x-109'>Exercise 3.3.</span>  </span>Prove  Eq. (<a href='#x5-51004r12'>3.12<!-- tex4ht:ref: eq:CNOT-symmetry  --></a>)  by  directly  calculating  the  matrix  the
right-hand side represents and showing it agrees with Eq. (<a href='#x5-51003r11'>3.11<!-- tex4ht:ref: eq:CNOT-matrix-calculation  --></a>).
</p>
   </div>
<!-- l. 226 --><p class='indent'>    Because it doesn’t matter in which direction the middle wire points, top-left
to bottom-right or bottom-left to top-right, we can actually without ambiguity
just write the wire vertically: </p><table class='equation'><tr><td>
<!-- l. 228 --><p class='indent'>
</p><!-- l. 228 --><object id='x5-51006r13' data="svgs/CNOT-ZX.svg" alt="diagram of CNOT-ZX" class="svg-diagram"></object></td><td class='eq-no'>(3.13)</td></tr></table>
<!-- l. 231 --><p class='indent'>   If we want to view this diagram as being composed of simple pieces via
horizontal and vertical composition then we have to pick an orientation for this
wire, but generally we can just leave it like it is. As a nice bonus this then
matches nicely with the quantum circuit notation for a CNOT gate:
</p><table class='equation'><tr><td>
<!-- l. 232 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 232 --><object id='x5-51007r14' data="svgs/eq-CNOT-in-ZX.svg" alt="diagram of eq:CNOT-in-ZX" class="svg-diagram"></object></td><td class='eq-no'>(3.14)</td></tr></table>
<!-- l. 235 --><p class='indent'>   We saw that to construct the diagram for a CNOT we needed to use an
identity wire. Note that however we could also write the identity as a spider,
since: </p><table class='equation'><tr><td>
<!-- l. 236 --><p class='indent'>
</p><!-- l. 236 --><object id='x5-51008r15' data="svgs/eq-id-removal-define.svg" alt="diagram of eq:id-removal-define" class="svg-diagram"></object></td><td class='eq-no'>(3.15)</td></tr></table>
<!-- l. 239 --><p class='indent'>   To construct arbitrary ZX-diagrams we also need the ability to swap wires, so
that we can connect the spiders up however we want. We can also represent a
swap just using spiders, by using the standard trick to build it out of three
CNOT gates: </p><table class='equation'><tr><td>
<!-- l. 240 --><p class='indent'>
</p><!-- l. 240 --><object id='x5-51009r16' data="svgs/swap-three-cnots.svg" alt="diagram of swap-three-cnots" class="svg-diagram"></object></td><td class='eq-no'>(3.16)</td></tr></table>
<!-- l. 243 --><p class='indent'>   Finally, we also need the cup and cap we saw in Section <a href='main_htmlch2.html#cups-and-caps'>2.1.7<!-- tex4ht:ref: sec:cup-cap  --></a>, but again we
can construct these using spiders: </p><table class='equation'><tr><td>
<!-- l. 244 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 244 --><object id='x5-51010r17' data="svgs/eq-id-removal-cup.svg" alt="diagram of eq:id-removal-cup" class="svg-diagram"></object></td><td class='eq-no'>(3.17)</td></tr></table>
<!-- l. 247 --><p class='indent'>   For the cap we just make the inputs into outputs instead. Note that
Eq. (<a href='#x5-51010r17'>3.17<!-- tex4ht:ref: eq:id-removal-cup  --></a>) is just Eq. (<a href='#x5-51008r15'>3.15<!-- tex4ht:ref: eq:id-removal-define  --></a>) but with the input bended to be an output. We see
then that the “structural generators” of identity, swap, cup and cap can actually
be constructed using spiders, so that we can in fact say that a ZX-diagram <span class='cmti-10x-x-109'>only</span>
consists of spiders. We will however consider these structural pieces as
first-class citizens of ZX-diagrams, and not as derived from spiders, since
they have useful properties by themselves, which we will see more of in
Section <a href='#symmetries'>3.1.3<!-- tex4ht:ref: sec:symmetries  --></a>.
</p>
   <h5 class='subsubsectionHead' id='zxdiagrams-are-tensor-networks'><span class='titlemark'>3.1.2.2   </span> <a id='x5-520003.1.2.2'></a>ZX-diagrams are tensor networks</h5>
<!-- l. 250 --><p class='noindent'>For those readers familiar with tensor networks it might be helpful to note that
ZX-diagrams are in fact just tensor networks. Indeed, considering them as tensor
networks, our notation matches the standard notion of a graphical tensor
network as introduced by Penrose. Considered as a tensor network, each wire in a
ZX-diagram corresponds to a 2-dimensional index and a wire between two
spiders denotes a tensor contraction. The Z- and X-spiders are then defined
as:
</p><!-- tex4ht:inline --><!-- l. 259 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
         <mtr><mtd class='align-odd' columnalign='right'><mi>Z</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub></mrow><mrow><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
                </mrow></msubsup></mtd>         <mtd class='align-even'> <mo class='MathClass-rel' stretchy='false'>=</mo> <mrow class='cases'> <mrow><mo fence='true' form='prefix'>{</mo><mrow> <mtable align='axis' class='array' columnlines='none' displaystyle='true' equalcolumns='false' equalrows='false' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>1</mn>  <mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> if </mtext></mstyle><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> if </mtext></mstyle><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>0</mn>  <mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> otherwise</mtext></mstyle>                                </mtd></mtr> <!-- @{}l@{\quad }l@{} --></mtable>                                                </mrow><mo fence='true' form='postfix'></mo></mrow></mrow><mspace width='2em'></mspace></mtd>         <mtd class='align-label' columnalign='right'></mtd>         <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 260 --><p class='noindent'>where <!-- l. 260 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>i</mi></mrow><mrow><mi>k</mi></mrow></msub><mo class='MathClass-punc' stretchy='false'>,</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>l</mi></mrow></msub></mrow></math>
range over <!-- l. 260 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>{</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>}</mo></mrow></math>.
Note that in both cases, the definition of the spider doesn’t depend on the order
                                                                     

                                                                     
of indices nor whether the indices appear in the upper or lower position. Hence,
permuting, raising, and lowering indices has no effect on the definition of a
spider. For example: </p><table class='equation-star'><tr><td>
<!-- l. 262 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
            <mi>Z</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><mi mathvariant='italic'>ijk</mi></mrow><mrow><mi mathvariant='italic'>mn</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>Z</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow>
<mi mathvariant='italic'>ij</mi></mrow><mrow><mi mathvariant='italic'>kmn</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>Z</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow>
<mi mathvariant='italic'>ij</mi></mrow><mrow><mi mathvariant='italic'>nmk</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>Z</mi><msup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><mi mathvariant='italic'>ijkmn</mi></mrow></msup>
</mrow></math></td></tr></table>
<!-- l. 265 --><p class='indent'>   So, unless it is important to distinguish inputs and outputs for some other
reason (e.g. to do matrix multiplication in the usual way), we might as well take
all indices to be upper indices. This allows us to simplify the expression for the
Z-spider to:
</p><!-- tex4ht:inline --><!-- l. 273 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
                <mtr><mtd class='align-odd' columnalign='right'><mi>Z</mi><msup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
        </mrow></msup></mtd>                <mtd class='align-even'> <mo class='MathClass-rel' stretchy='false'>=</mo> <mrow class='cases'> <mrow><mo fence='true' form='prefix'>{</mo><mrow> <mtable align='axis' class='array' columnlines='none' displaystyle='true' equalcolumns='false' equalrows='false' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>1</mn>  <mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> if </mtext></mstyle><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> if </mtext></mstyle><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>0</mn>  <mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> otherwise</mtext></mstyle>            </mtd></mtr> <!-- @{}l@{\quad }l@{} --></mtable>                                                                    </mrow><mo fence='true' form='postfix'></mo></mrow></mrow><mspace width='2em'></mspace></mtd>                <mtd class='align-label' columnalign='right'></mtd>                <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 274 --><p class='noindent'>When <!-- l. 274 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>,
<!-- l. 274 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math> so
phase-free Z-spiders further simplify to:
                                                                     

                                                                     
</p><!-- tex4ht:inline --><!-- l. 281 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
                   <mtr><mtd class='align-odd' columnalign='right'><mi>Z</mi><msup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
        </mrow></msup></mtd>                   <mtd class='align-even'> <mo class='MathClass-rel' stretchy='false'>=</mo> <mrow class='cases'> <mrow><mo fence='true' form='prefix'>{</mo><mrow> <mtable align='axis' class='array' columnlines='none' displaystyle='true' equalcolumns='false' equalrows='false' style=''> <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>1</mn><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> if </mtext></mstyle><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub></mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>0</mn><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> otherwise</mtext></mstyle>       </mtd></mtr> <!-- @{}l@{\quad }l@{} --></mtable>                                                                            </mrow><mo fence='true' form='postfix'></mo></mrow></mrow><mspace width='2em'></mspace></mtd>                   <mtd class='align-label' columnalign='right'></mtd>                   <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 282 --><p class='noindent'>This is a generalisation of the Kronecker delta matrix we introduced in Definition <a href='main_htmlch2.html#x4-12007r3'>2.1.3<!-- tex4ht:ref: def:onb  --></a> from
two indices <!-- l. 282 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>i</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>j</mi></mrow></math>
to any number of indices. The intuition is very much same: a Z-spider
‘forces’ a collection of indices to take the same value by going
to 0 whenever they do not. Consider for example the following
tensor network involving a single Z-spider and some generic matrix
<!-- l. 282 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>M</mi></math>:
</p>
<div class='center'>
<!-- l. 284 --><p class='noindent'>
</p><!-- l. 285 --><p class='noindent'><object data="svgs/tensor-net-w-z.svg" alt="diagram of tensor-net-w-z" class="svg-diagram"></object> </p></div>
<!-- l. 288 --><p class='indent'>   We can compute the elements of the tensor
<!-- l. 288 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>T</mi></math> in terms
of <!-- l. 288 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>M</mi></math> as
follows: </p><table class='equation-star'><tr><td>
<!-- l. 289 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
     <msubsup><mrow><mi>T</mi></mrow><mrow><mi mathvariant='italic'>ij</mi></mrow><mrow><mi mathvariant='italic'>kl</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo><munder class='msub'><mrow><mo> ∑</mo>
   </mrow><mrow><mi mathvariant='italic'>abcd</mi></mrow></munder><msubsup><mrow><mi>M</mi></mrow><mrow><mi>i</mi></mrow><mrow><mi>a</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>j</mi></mrow><mrow><mi>b</mi></mrow></msubsup><mi>Z</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow>
<mi mathvariant='italic'>ab</mi></mrow><mrow><mi mathvariant='italic'>cd</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>c</mi></mrow><mrow><mi>k</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>d</mi></mrow><mrow><mi>l</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo><munder class='msub'><mrow><mo> ∑</mo>
   </mrow><mrow><mi>a</mi></mrow></munder><msubsup><mrow><mi>M</mi></mrow><mrow><mi>i</mi></mrow><mrow><mi>a</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>j</mi></mrow><mrow><mi>a</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>a</mi></mrow><mrow><mi>k</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>a</mi></mrow><mrow><mi>l</mi></mrow></msubsup>
</mrow></math></td></tr></table>
<!-- l. 292 --><p class='indent'>   In the rightmost step, we use a Kronecker-delta-like simplification to replace
the sum over multiple indices with a sum over a single index. In fact, when the
Z-spider does have a phase, we can do a similar simplification by collapsing all of
its summed-over indices into a single index, but we should keep a 1-index
Z-spider around to keep track of the phase. Generalising the example above, we
have:
</p>
                                                                     

                                                                     
<div class='center'>
<!-- l. 295 --><p class='noindent'>
</p><!-- l. 296 --><p class='noindent'><object data="svgs/tensor-net-w-za.svg" alt="diagram of tensor-net-w-za" class="svg-diagram"></object> </p></div>
<!-- l. 299 --><p class='indent'>   which can be written as a tensor contraction and simplified as follows:
</p><table class='equation-star'><tr><td>
<!-- l. 300 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
 <msubsup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><msup><mrow><mi>T</mi></mrow><mrow><mi>′</mi></mrow></msup><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow>
<mi mathvariant='italic'>ij</mi></mrow><mrow><mi mathvariant='italic'>kl</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo><munder class='msub'><mrow><mo> ∑</mo>
   </mrow><mrow><mi mathvariant='italic'>abcd</mi></mrow></munder><msubsup><mrow><mi>M</mi></mrow><mrow><mi>i</mi></mrow><mrow><mi>a</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>j</mi></mrow><mrow><mi>b</mi></mrow></msubsup><mi>Z</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow>
<mi mathvariant='italic'>ab</mi></mrow><mrow><mi mathvariant='italic'>cd</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>c</mi></mrow><mrow><mi>k</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>d</mi></mrow><mrow><mi>l</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo><munder class='msub'><mrow><mo> ∑</mo>
   </mrow><mrow><mi>a</mi></mrow></munder><msubsup><mrow><mi>M</mi></mrow><mrow><mi>i</mi></mrow><mrow><mi>a</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>j</mi></mrow><mrow><mi>a</mi></mrow></msubsup><mi>Z</mi><msup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><mi>a</mi></mrow></msup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>a</mi></mrow><mrow><mi>k</mi></mrow></msubsup><msubsup><mrow><mi>M</mi></mrow><mrow>
<mi>a</mi></mrow><mrow><mi>l</mi></mrow></msubsup>
</mrow></math></td></tr></table>
<!-- l. 303 --><p class='indent'>   X-spiders are defined identically to Z-spiders, except with respect to the X-basis
<!-- l. 303 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-open' stretchy='false'>{|+⟩,|−⟩}</mtext></mrow></math>. For
tensor networks it is more convenient to define everything in terms of a single,
fixed basis. Hence, we express an X-spider concretely in terms of the Z-basis. We
already computed the coefficients of this expression at the end of Section <a href='#spiders'>3.1.1<!-- tex4ht:ref: sec:spiders  --></a>,
so we use them here:
</p><!-- tex4ht:inline --><!-- l. 311 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
   <mtr><mtd class='align-odd' columnalign='right'><mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub></mrow><mrow><msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub>
                </mrow></msubsup></mtd>   <mtd class='align-even'> <mo class='MathClass-rel' stretchy='false'>=</mo><msup><mrow> <mrow><mo fence='true' form='prefix'>(</mo><mrow> <mfrac><mrow><mn>1</mn></mrow>
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac> </mrow><mo fence='true' form='postfix'>)</mo></mrow> </mrow><mrow><mi>n</mi><mo class='MathClass-bin' stretchy='false'>+</mo><mi>m</mi></mrow></msup> <mo class='MathClass-bin' stretchy='false'>⋅</mo><mrow class='cases'><mrow><mo fence='true' form='prefix'>{</mo><mrow><mtable align='axis' class='array' columnlines='none' displaystyle='true' equalcolumns='false' equalrows='false' style=''><mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> if </mtext></mstyle><msub><mrow><mi>i</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>i</mi></mrow><mrow><mi>m</mi></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>j</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo><mo class='MathClass-punc' stretchy='false'>.</mo> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <msub><mrow><mi>j</mi></mrow><mrow><mi>n</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mtd>
</mtr>  <mtr class='array-row'><mtd class='array-td' columnalign='left'><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>−</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mspace class='quad' width='1em'></mspace></mtd><mtd class='array-td' columnalign='left'><mstyle class='text'><mtext class='textrm' mathvariant='normal'> otherwise</mtext></mstyle>                              </mtd></mtr> <!-- @{}l@{\quad }l@{} --></mtable>                                            </mrow><mo fence='true' form='postfix'></mo></mrow></mrow><mspace width='2em'></mspace></mtd>   <mtd class='align-label' columnalign='right'></mtd>   <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 312 --><p class='noindent'>Just like the Z-spider, the X-spider treats inputs and outputs identically, so we
can permute indices or raise/lower them at will: </p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 313 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
            <mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><mi mathvariant='italic'>ijk</mi></mrow><mrow><mi mathvariant='italic'>mn</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow>
<mi mathvariant='italic'>ij</mi></mrow><mrow><mi mathvariant='italic'>kmn</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow>
<mi mathvariant='italic'>ij</mi></mrow><mrow><mi mathvariant='italic'>nmk</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>X</mi><msup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><mi mathvariant='italic'>ijkmn</mi></mrow></msup>
</mrow></math></td></tr></table>
<!-- l. 316 --><p class='indent'>   Recall that in the previous section, we interpreted a ZX-diagram
as a tensor and composition of some linear maps. This required us to
make an arbitrary choice of how to “chop up” the diagram. Equivalently,
since we now have expressions for spiders as tensors, we can interpret a
ZX-diagram directly as a tensor network. For example the ZX-diagram:
</p><table class='equation-star'><tr><td>
<!-- l. 317 --><object data="svgs/D-4-3.svg" alt="diagram of D-4-3" class="svg-diagram"></object></td></tr></table>
<!-- l. 320 --><p class='indent'>   can be interpreted as a tensor network as follows. First assign an arbitrary
index to each wire, e.g. </p><table class='equation-star'><tr><td>
<!-- l. 321 --><object data="svgs/zx-circuit-1.svg" alt="diagram of zx-circuit-1" class="svg-diagram"></object></td></tr></table>
<!-- l. 324 --><p class='indent'>   then write <!-- l. 324 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>D</mi></math>
as a contraction involving X- and Z-spiders: </p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 325 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
            <msubsup><mrow><mi>D</mi></mrow><mrow><mi mathvariant='italic'>abcd</mi></mrow><mrow><mi mathvariant='italic'>xyz</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>=</mo><munder class='msub'><mrow><mo> ∑</mo>
   </mrow><mrow><mi mathvariant='italic'>ijkl</mi></mrow></munder><mi>Z</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><mi>a</mi></mrow><mrow><mi mathvariant='italic'>ij</mi></mrow></msubsup><mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow>
<mi mathvariant='italic'>bcd</mi></mrow><mrow><mi mathvariant='italic'>kl</mi></mrow></msubsup><mi>X</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mi>β</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow>
<mi mathvariant='italic'>ijk</mi></mrow><mrow><mi mathvariant='italic'>xy</mi></mrow></msubsup><mi>Z</mi><msubsup><mrow><mo class='MathClass-open' stretchy='false'>[</mo><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac><mo class='MathClass-close' stretchy='false'>]</mo></mrow><mrow><mi>l</mi></mrow><mrow><mi>z</mi></mrow></msubsup>
</mrow></math></td></tr></table>
<!-- l. 328 --><p class='indent'>   Just like for general tensor networks, all of the indices that are not
inputs or outputs are summed over. ZX-diagrams are just tensor networks
whose basic components are only X-spider and Z-spider tensors. Certainly
most of the ways tensor networks are used in the literature allow the
component tensors to be any indexed set of complex numbers. A natural
question then is: why focus only on spider tensors and not more general
components? There are two reasons. First, we don’t lose anything in terms of
expressiveness by restricting to spiders. Namely, any linear map on qubits can be
constructed from spiders, and hence any tensor network with 2D wires can
also be constructed purely out of spider tensors (we will have more to
say about this in Section <a href='#universality'>3.1.7<!-- tex4ht:ref: sec:universality  --></a>). Second, ZX-diagrams come with an
extremely useful set of rewrite rules, the <span class='cmti-10x-x-109'>ZX-calculus</span>, that lets us transform
and simplify the tensor network itself. If our basic tensors were “black
box” collections of numbers, we wouldn’t be able to do this. We’ll first
meet these rules in Section <a href='#the-rules-of-the-zxcalculus'>3.2<!-- tex4ht:ref: sec:zx-rules  --></a>, and we’ll be using them throughout the
book.
</p>
   <div class='newtheorem'>
<!-- l. 330 --><p class='noindent'><span class='head'>
<a id='x5-52001r4'></a>
<span class='cmbx-10x-x-109'>Exercise 3.4.</span>  </span>Show that the following equality is true, by writing down
the left-hand side as a tensor contraction and simplifying it:
</p>
<div class='center'>
<!-- l. 333 --><p class='noindent'>
</p><!-- l. 334 --><p class='noindent'><object data="svgs/tensor-z-spider-contraction.svg" alt="diagram of tensor-z-spider-contraction" class="svg-diagram"></object> </p></div>
   </div>
<!-- l. 337 --><p class='indent'>
                                                                     

                                                                     
</p>
   <h4 class='subsectionHead' id='symmetries'><span class='titlemark'>3.1.3   </span> <a id='x5-530003.1.3'></a>Symmetries</h4>
<!-- l. 339 --><p class='noindent'>We noted in the previous section that spiders are very symmetric tensors, and
that we were allowed to raise, lower or permute their indices however we wanted.
In this section we will see what this looks like graphically. Namely, this translates
into some nice interactions between cups and caps, swap, and spiders. The SWAP
interacts with spiders the way you would expect. Namely, that you can ‘slide’ a
spider along the wires, such as in the equation commuting a CNOT gate through
a swap below: </p><table class='equation'><tr><td>
<!-- l. 341 --><p class='indent'>
</p><!-- l. 341 --><object id='x5-53001r18' data="svgs/eq-CNOT-SWAP.svg" alt="diagram of eq:CNOT-SWAP" class="svg-diagram"></object></td><td class='eq-no'>(3.18)</td></tr></table>
<!-- l. 344 --><p class='indent'>   It is possible to write down a set of equations that formally captures this
behaviour of ‘sliding through a swap’, but we will not bother with that and
instead let your intuition do the work. An important point to note though is that
we are not working in a ‘braided’ setting, and hence the swap is self-inverse:
</p><table class='equation'><tr><td>
<!-- l. 346 --><p class='indent'>
</p><!-- l. 346 --><object id='x5-53002r19' data="svgs/swapswap.svg" alt="diagram of swapswap" class="svg-diagram"></object></td><td class='eq-no'>(3.19)</td></tr></table>
<!-- l. 349 --><p class='indent'>   The fact that we can permute the indices in the tensor of a spider
corresponds to being able to swap the wires of their inputs or outputs:
</p><table class='equation'><tr><td>
<!-- l. 350 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 350 --><object id='x5-53003r20' data="svgs/spider-swaps.svg" alt="diagram of spider-swaps" class="svg-diagram"></object></td><td class='eq-no'>(3.20)</td></tr></table>
<!-- l. 353 --><p class='indent'>   These symmetries hold for all phases
<!-- l. 353 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>α</mi></math>, for
spiders with any number of input and output wires, and for the swapping of any
of their inputs or outputs. We can’t just swap the wires among the inputs and
outputs: we can also swap an input with an output. We do this using the cup and
cap. Just as we can slide spiders along the wires of a swap gate (cf. (<a href='#x5-53001r18'>3.18<!-- tex4ht:ref: eq:CNOT-SWAP  --></a>)),
we can slide a spider along the wires of cups and caps. For instance:
</p><table class='equation'><tr><td>
<!-- l. 357 --><p class='indent'>
</p><!-- l. 357 --><object id='x5-53004r21' data="svgs/spider-cap.svg" alt="diagram of spider-cap" class="svg-diagram"></object></td><td class='eq-no'>(3.21)</td></tr></table>
<!-- l. 360 --><p class='indent'>   This again works for Z-spiders and X-spiders, with any phase, and with any
number of input or output wires: </p><table class='equation'><tr><td>
<!-- l. 361 --><p class='indent'>
</p><!-- l. 361 --><object id='x5-53005r22' data="svgs/eq-spider-cupcap.svg" alt="diagram of eq:spider-cupcap" class="svg-diagram"></object></td><td class='eq-no'>(3.22)</td></tr></table>
                                                                     

                                                                     
<!-- l. 364 --><p class='indent'>   This might just look like some meaningless bending of wires <span class='cmti-10x-x-109'>and that is
exactly the point</span>. Spiders treat inputs and outputs in essentially the same way,
where the distinction between the two is really just bookkeeping, which we
represent in the graphical notation as “bending wires”. As a consequence,
ZX-diagrams enjoy a particularly strong version of the principle of <span class='cmbx-10x-x-109'>Only
Connectivity Matters </span>that was introduced in Section <a href='main_htmlch2.html#tensor-networks-and-string-diagrams'>2.1.6<!-- tex4ht:ref: sec:string-diagrams  --></a>. There, we saw
that the only relevant data in a string diagram was which inputs were connected
to which outputs. For ZX-diagrams, the order and direction of wires connecting
to a single spider are irrelevant. Hence, we can treat a ZX-diagram essentially as
a labelled, undirected graph with some inputs and outputs. To make
more clear the type of freedom this entails, <span class='cmti-10x-x-109'>only connectivity matters</span>
means that the following ZX-diagrams all represent the same matrix.
</p><table class='equation'><tr><td>
<!-- l. 367 --><p class='indent'>
</p><!-- l. 367 --><object id='x5-53006r23' data="svgs/eq-deformation-example.svg" alt="diagram of eq:deformation-example" class="svg-diagram"></object></td><td class='eq-no'>(3.23)</td></tr></table>
<!-- l. 370 --><p class='indent'>   That is, any way we can interpret the diagrams above as compositions and
tensor products of spiders, swaps, identities, cups, and caps will yield the same
matrix simply because the spiders and their connectivity are the same. Note that
while we can freely move around the spiders in the diagram, we have to make
sure the order of the inputs and outputs of the diagram as a whole stays the
same. So for instance, we have: </p><table class='equation'><tr><td>
<!-- l. 372 --><p class='indent'>
</p><!-- l. 372 --><object id='x5-53007r24' data="svgs/CNOT-ZX-1.svg" alt="diagram of CNOT-ZX-1" class="svg-diagram"></object></td><td class='eq-no'>(3.24)</td></tr></table>
                                                                     

                                                                     
<!-- l. 375 --><p class='indent'>   This works because for instance the top input stays connected to the same
Z-spider in both diagrams, and the same for the other output and inputs.
However, the following is not equal: </p><table class='equation'><tr><td>
<!-- l. 377 --><p class='indent'>
</p><!-- l. 377 --><object id='x5-53008r25' data="svgs/CNOT-ZX-2.svg" alt="diagram of CNOT-ZX-2" class="svg-diagram"></object></td><td class='eq-no'>(3.25)</td></tr></table>
<!-- l. 380 --><p class='indent'>   Even though the spiders in both diagrams are still connected in the same way,
we see that in the second diagram the first input is connected to the X-spider
while it was connected to the Z-spider in the first diagram.
</p>
   <div class='newtheorem'>
<!-- l. 381 --><p class='noindent'><span class='head'>
<a id='x5-53009r1'></a>
<span class='cmbx-10x-x-109'>Remark 3.1.1.</span>  </span> We now know enough about ZX-diagrams to address the
elephant in the room: why <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>
and <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>,
but not <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Y</mi> </mrow></math>?
One reason for this is that <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Y</mi> </mrow></math>
can be presented as a composition of <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>
and <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>,
and hence we don’t <span class='cmti-10x-x-109'>need  </span>it. In principle however, we could have worked
with the ‘XY’-calculus instead of the ZX-calculus, but there is an important
reason to prefer <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>
and <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>
over <!-- l. 382 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Y</mi> </mrow></math>.
Namely, the <!-- l. 383 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>
and <!-- l. 383 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>
eigenbases are <span class='cmti-10x-x-109'>self-conjugate </span>meaning that each of the vectors in the basis is
equal to its own componentwise complex conjugate, for instance: <!-- l. 383 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mover accent='false' class='mml-overline'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow><mo accent='true'>¯</mo></mover> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>.
This is not the case for the <!-- l. 384 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Y</mi> </mrow></math>
eigenbasis <!-- l. 384 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>±</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-punc' stretchy='false'>:</mo><mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-bin' stretchy='false'>±</mo> <mi>i</mi><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
where we have <!-- l. 384 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mover accent='false' class='mml-overline'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow><mo accent='true'>¯</mo></mover> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>.
As a result, the ‘Y-spider’ does not have the nice symmetry between inputs
                                                                     

                                                                     
and outputs of (<a href='#x5-53005r22'>3.22<!-- tex4ht:ref: eq:spider-cupcap  --></a>) that the Z- and X-spiders do, which makes it a bit
more tricky to work with.
</p>
   </div>
<!-- l. 385 --><p class='indent'>
</p>
   <h4 class='subsectionHead' id='scalars'><span class='titlemark'>3.1.4   </span> <a id='x5-540003.1.4'></a>Scalars</h4>
<!-- l. 387 --><p class='noindent'>In the diagram deformation example given in equation (<a href='#x5-53006r23'>3.23<!-- tex4ht:ref: eq:deformation-example  --></a>), the zero-arity X-spider
with a <!-- l. 387 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo><mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>2</mn></mrow></mfrac> </mrow></math>
phase can be moved completely freely throughout the diagram. This is because a
zero-arity spider, or more generally any ZX-diagram with zero inputs and
outputs, simply contributes an overall scalar factor. For instance, we have:
</p><table class='equation'><tr><td>
<!-- l. 388 --><p class='indent'>
</p><!-- l. 388 --><object id='x5-54001r26' data="svgs/eq-scalars-ZX.svg" alt="diagram of eq:scalars-ZX" class="svg-diagram"></object></td><td class='eq-no'>(3.26)</td></tr></table>
<!-- l. 391 --><p class='indent'>   For this reason, we call ZX-diagrams with no inputs and no outputs <span class='cmbx-10x-x-109'>scalar
ZX-diagrams</span>. Putting two such diagrams side-by-side corresponds to the tensor
product, which for scalars just means multiplication. Note that just by using
combinations of the scalar diagrams of (<a href='#x5-54001r26'>3.26<!-- tex4ht:ref: eq:scalars-ZX  --></a>) we can represent any complex
number as a scalar ZX-diagram.
</p>
   <div class='newtheorem'>
<!-- l. 393 --><p class='noindent'><span class='head'>
<a id='x5-54002r5'></a>
<span class='cmbx-10x-x-109'>Exercise 3.5.</span>  </span> By combining the diagrams from (<a href='#x5-54001r26'>3.26<!-- tex4ht:ref: eq:scalars-ZX  --></a>),
find a ZX-diagram to represent the following scalar values
<!-- l. 394 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>z</mi></math>:
                                                                     

                                                                     
   </p><dl class='enumerate'><dt class='enumerate'>
a) </dt><dd class='enumerate'>
   <!-- l. 396 --><p class='noindent'><!-- l. 396 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>z</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-bin' stretchy='false'>−</mo><mn>1</mn></mrow></math>.
   </p></dd><dt class='enumerate'>
b) </dt><dd class='enumerate'>
   <!-- l. 397 --><p class='noindent'><!-- l. 397 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>z</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>i𝜃</mi></mrow></msup></mrow></math>
   for any <!-- l. 397 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>𝜃</mi></math>.
   </p></dd><dt class='enumerate'>
c) </dt><dd class='enumerate'>
   <!-- l. 398 --><p class='noindent'><!-- l. 398 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>z</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mfrac><mrow><mn>1</mn></mrow> 
<mrow><mn>2</mn></mrow></mfrac></mrow></math>.
   </p></dd><dt class='enumerate'>
d) </dt><dd class='enumerate'>
   <!-- l. 399 --><p class='noindent'><!-- l. 399 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>z</mi> <mo class='MathClass-rel' stretchy='false'>=</mo><mi class='qopname'> cos</mi><mo> ⁡<!-- FUNCTION APPLICATION --> </mo><!-- nolimits --><mi>𝜃</mi></mrow></math>
   for any value <!-- l. 399 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>𝜃</mi></math>.
   </p></dd><dt class='enumerate'>
e) </dt><dd class='enumerate'>
   <!-- l. 400 --><p class='noindent'>Find a general description or algorithm to construct the ZX-diagram for
   any complex number <!-- l. 400 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>z</mi></math>.
   </p></dd></dl>
   </div>
<!-- l. 402 --><p class='indent'>     When working with ZX-diagrams we will often ignore non-zero
scalar factors unless they are relevant to the calculation. This is for the
same reason that physicists will sometimes work with unnormalised
quantum states: it is simply inconvenient and sometimes unnecessary
to know the exact scalar values. Recall that we use the notation
<!-- l. 428 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>M</mi> <mo class='MathClass-rel' stretchy='false'>∝</mo> <mi>N</mi></mrow></math> to
mean <!-- l. 428 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>M</mi></math>
and <!-- l. 428 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>N</mi></math>
are equal up to a non-zero scalar factor (see Remark <a href='main_htmlch2.html#x4-25004r1'>2.3.1<!-- tex4ht:ref: rem:scalareq  --></a>). Because any scalar
can be represented by a ZX-diagram, we could work just with ZX-diagrams even
if we want to have the correct scalar values. For instance, if we want the
scalar-accurate CNOT gate we could write: </p><table class='equation'><tr><td>
<!-- l. 430 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 430 --><object id='x5-54008r27' data="svgs/eq-CNOT-scalar.svg" alt="diagram of eq:CNOT-scalar" class="svg-diagram"></object></td><td class='eq-no'>(3.27)</td></tr></table>
<!-- l. 433 --><p class='indent'>   However, we will mostly just write the actual number we need instead of the
diagram representing the number. So instead of (<a href='#x5-54008r27'>3.27<!-- tex4ht:ref: eq:CNOT-scalar  --></a>) we would just write:
</p><table class='equation'><tr><td>
<!-- l. 434 --><p class='indent'>
</p><!-- l. 434 --><object id='x5-54009r28' data="svgs/CNOT-scalar2.svg" alt="diagram of CNOT-scalar2" class="svg-diagram"></object></td><td class='eq-no'>(3.28)</td></tr></table>
<!-- l. 437 --><p class='noindent'>
</p>
   <h4 class='subsectionHead' id='adjoints-transpose-and-conjugate'><span class='titlemark'>3.1.5   </span> <a id='x5-550003.1.5'></a>Adjoints, transpose and conjugate</h4>
<!-- l. 438 --><p class='noindent'>There are some useful global operations on ZX-diagrams that correspond
to well-known matrix operations. First of all, if we take a ZX-diagram
and negate all the phases in the spiders, so that for instance
<!-- l. 439 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> </mrow></math> is mapped
to <!-- l. 439 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo><mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>2</mn></mrow></mfrac>  <mo class='MathClass-rel' stretchy='false'>≡</mo> <mfrac><mrow><mn>3</mn><mi>π</mi></mrow> 
 <mrow><mn>2</mn></mrow></mfrac> </mrow></math>, and
<!-- l. 439 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math> is mapped
to <!-- l. 439 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo> <mi>π</mi> <mo class='MathClass-rel' stretchy='false'>≡</mo> <mi>π</mi></mrow></math>,
the matrix of the resulting diagram is the <span class='cmti-10x-x-109'>conjugate </span>of the matrix of
the original diagram (recall that the conjugate of a complex matrix is
the pointwise complex conjugate of each the elements of the matrix).
The transpose of a matrix is also easily represented by ZX-diagrams:
we use cups and caps to change every input into an output and vice
versa.
</p>
                                                                     

                                                                     
<div class='center'>
<!-- l. 442 --><p class='noindent'>
</p><!-- l. 443 --><p class='noindent'><object data="svgs/make-transpose.svg" alt="diagram of make-transpose" class="svg-diagram"></object> </p></div>
<!-- l. 446 --><p class='indent'>   Note that these ‘crossovers’ of the wires are necessary to ensure that the first
input is mapped to the first output, instead of to the last output. If we apply this
procedure to the CNOT gate we can verify that the CNOT gate is indeed
self-transpose:
</p>
<div class='center'>
<!-- l. 448 --><p class='noindent'>
</p><!-- l. 449 --><p class='noindent'><object data="svgs/CNOT-transpose.svg" alt="diagram of CNOT-transpose" class="svg-diagram"></object> </p></div>
<!-- l. 452 --><p class='indent'>   Here in the first step we slid the spiders along the wires to the bottom, and in
the second step we applied the first yanking equation (<a href='main_htmlch2.html#x4-17002r10'>2.10<!-- tex4ht:ref: eq:yank-equations  --></a>). The adjoint of a
matrix is constructed by taking the transpose and conjugating the matrix. Hence,
the adjoint of a ZX-diagram is constructed by interchanging the inputs and
outputs using cups and caps as described above, and then negating all the phases
of the spiders in the diagram.
</p>
   <h4 class='subsectionHead' id='hadamards'><span class='titlemark'>3.1.6   </span> <a id='x5-560003.1.6'></a>Hadamards</h4>
<!-- l. 455 --><p class='noindent'>We introduce some special notation for the Hadamard gate: </p><table class='equation-star'><tr><td>
<!-- l. 456 --><object data="svgs/had.svg" alt="diagram of had" class="svg-diagram"></object></td></tr></table>
<!-- l. 459 --><p class='indent'>   This ‘Hadamard box’ is the final generator of ZX-diagrams that we will need
(although note that we can in fact also define it in terms of spiders if we want to;
see Section <a href='#euler-decomposition'>3.2.5<!-- tex4ht:ref: sec:rule-euler  --></a>). By inspecting the matrix of the Hadamard it is easy to check
that it is self-transpose: </p><table class='equation'><tr><td>
<!-- l. 461 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 461 --><object id='x5-56001r29' data="svgs/had-transpose.svg" alt="diagram of had-transpose" class="svg-diagram"></object></td><td class='eq-no'>(3.29)</td></tr></table>
<!-- l. 464 --><p class='indent'>   This means that, just like with the spiders, the orientation of the Hadamard
is not important, which is why we are allowed to draw it as a simple box. Also
just like with the spiders, we can slide Hadamards along wires as intuition would
suggest.
</p>
   <h4 class='subsectionHead' id='universality'><span class='titlemark'>3.1.7   </span> <a id='x5-570003.1.7'></a>Universality</h4>
<!-- l. 466 --><p class='noindent'>We have now seen that quite a number of quantum gates and constructions can
be represented in the ZX-calculus. This raises the following question: exactly
which linear maps can be represented in the ZX-calculus. The answer to this is
simple: <span class='cmti-10x-x-109'>everything</span>. Here, ‘everything’ means any complex matrix of size
<!-- l. 466 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow><mn>2</mn></mrow><mrow><mi>n</mi></mrow></msup> <mo class='MathClass-bin' stretchy='false'>×</mo> <msup><mrow><mn>2</mn></mrow><mrow><mi>m</mi></mrow></msup></mrow></math> for
some <!-- l. 466 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>
and <!-- l. 466 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math>.
To see why this is the case, let’s first look at which unitaries we
can represent. Eqs. (<a href='#x5-49003r2'>3.2<!-- tex4ht:ref: eq:Z-spider-phase-gate  --></a>) and (<a href='#x5-49006r5'>3.5<!-- tex4ht:ref: eq:X-spider-phase-gate  --></a>) show that we can represent
<!-- l. 467 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math> and
<!-- l. 467 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math> phase gates
using spiders. Using the Euler decomposition, any single-qubit unitary can be written as a
composition of <!-- l. 467 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>
and <!-- l. 467 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>
phase gates, and hence we can represent any single-qubit unitary as a
ZX-diagram. In Eq. (<a href='#x5-51007r14'>3.14<!-- tex4ht:ref: eq:CNOT-in-ZX  --></a>) we additionally saw how to represent the CNOT gate
as a ZX-diagram. Note that this equation involves a complex number to get the
correct scalar factor, but in Exercise <a href='#x5-54002r5'>3.5<!-- tex4ht:ref: exer:scalars  --></a> we saw how to represent any complex
number as a ZX-diagram, so that is no problem. In Section <a href='main_htmlch2.html#approximate-universality'>2.3.5<!-- tex4ht:ref: sec:universal-gates  --></a> we recalled that
any many-qubit unitary can be written as a circuit of CNOT gates and
single-qubit unitaries. Hence, we then know we can write any unitary as a
ZX-diagram:
</p>
<div class='center'>
<!-- l. 470 --><p class='noindent'>
                                                                     

                                                                     
</p><!-- l. 471 --><p class='noindent'><object data="svgs/circuit-from-zx.svg" alt="diagram of circuit-from-zx" class="svg-diagram"></object> </p></div>
   <div class='newtheorem'>
<!-- l. 474 --><p class='noindent'><span class='head'>
<a id='x5-57001r2'></a>
<span class='cmbx-10x-x-109'>Proposition 3.1.2.</span>  </span>Any <!-- l. 475 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-qubit
unitary can be written as a ZX-diagram.
</p>
   </div>
<!-- l. 476 --><p class='indent'>    Note that for most unitaries, the diagram we would get when we
apply this procedure would be exponentially large, so it would not
necessarily be <span class='cmti-10x-x-109'>useful </span>to write it as a ZX-diagram. However, we <span class='cmti-10x-x-109'>can </span>do
it, and that is the important part in this section. Now let’s see which
states we can represent as a ZX-diagram. We know we can represent
<!-- l. 478 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> using
an X-spider (Eq. (<a href='#x5-49007r6'>3.6<!-- tex4ht:ref: eq:z-kets  --></a>)). Hence, by taking tensor products we can represent
<!-- l. 478 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>. Now if we have any
other normalised <!-- l. 478 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-qubit
state <!-- l. 478 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>ψ</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>, there will
be <span class='cmti-10x-x-109'>some </span><!-- l. 478 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-qubit
unitary that maps <!-- l. 478 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
to <!-- l. 478 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>ψ</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
(think back to your linear algebra classes, why is this the case?). We can then
write: </p><table class='equation'><tr><td>
<!-- l. 479 --><p class='indent'>
</p><!-- l. 479 --><object id='x5-57002r30' data="svgs/eq-state-from-zx.svg" alt="diagram of eq:state-from-zx" class="svg-diagram"></object></td><td class='eq-no'>(3.30)</td></tr></table>
<!-- l. 482 --><p class='indent'>   So we can represent any normalised state as a ZX-diagram. Since we also
have all complex numbers, we can multiply the normalised state by a number to
get an <span class='cmti-10x-x-109'>unnormalised </span>state. Or, the other way around: if we have an unnormalised
state <!-- l. 482 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>ϕ</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
we want to represent, we first use Eq. (<a href='#x5-57002r30'>3.30<!-- tex4ht:ref: eq:state-from-zx  --></a>) to represent the normalised
<!-- l. 482 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>  <mfrac><mrow><mn>1</mn></mrow>
<mrow><mo class='MathClass-rel' stretchy='false'>∥</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mi>ϕ</mi><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-rel' stretchy='false'>∥</mo></mrow></mfrac><mo class='MathClass-rel' stretchy='false'>|</mo><mi>ϕ</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
                                                                     

                                                                     
as a ZX-diagram, and then compose this with the number
<!-- l. 482 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>∥</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mi>ϕ</mi><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-rel' stretchy='false'>∥</mo></mrow></math>, also
represented as a ZX-diagram.
</p>
   <div class='newtheorem'>
<!-- l. 483 --><p class='noindent'><span class='head'>
<a id='x5-57003r3'></a>
<span class='cmbx-10x-x-109'>Proposition 3.1.3.</span>  </span> Any <!-- l. 484 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-qubit
(unnormalised) state can be written as a ZX-diagram.
</p>
   </div>
<!-- l. 485 --><p class='indent'>    Now finally, let’s see how to represent arbitrary linear
maps as diagrams. Suppose we are given some linear map
<!-- l. 487 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>L</mi></math> from
<!-- l. 487 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> qubits to
<!-- l. 487 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math> qubits. We can transform
this into an <!-- l. 487 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mi>n</mi> <mo class='MathClass-bin' stretchy='false'>+</mo> <mi>m</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>-qubit
state by the Choi-Jamiołkowski isomorphism:
</p>
<div class='center'>
<!-- l. 489 --><p class='noindent'>
</p><!-- l. 490 --><p class='noindent'><object data="svgs/choi-jamiolkowski.svg" alt="diagram of choi-jamiolkowski" class="svg-diagram"></object> </p></div>
<!-- l. 493 --><p class='indent'>   As this is a state, we know we can represent it as a ZX-diagram!
</p><table class='equation'><tr><td>
<!-- l. 494 --><p class='indent'>
</p><!-- l. 494 --><object id='x5-57004r31' data="svgs/eq-bended-map-is-zx.svg" alt="diagram of eq:bended-map-is-zx" class="svg-diagram"></object></td><td class='eq-no'>(3.31)</td></tr></table>
                                                                     

                                                                     
<!-- l. 497 --><p class='indent'>   Here <!-- l. 497 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>λ</mi></math>
is a complex number needed to scale the state to the right normalisation.
We can now bend back the wires in order to get a diagram for
<!-- l. 498 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>L</mi></math> itself:
</p><table class='equation'><tr><td>
<!-- l. 499 --><p class='indent'>
</p><!-- l. 499 --><object id='x5-57005r32' data="svgs/map-from-zx.svg" alt="diagram of map-from-zx" class="svg-diagram"></object></td><td class='eq-no'>(3.32)</td></tr></table>
<!-- l. 502 --><p class='indent'>   We see now that we can indeed represent <span class='cmti-10x-x-109'>any </span>linear map between qubits as a
ZX-diagram.
</p>
   <div class='newtheorem'>
<!-- l. 503 --><p class='noindent'><span class='head'>
<a id='x5-57006r4'></a>
<span class='cmbx-10x-x-109'>Theorem 3.1.4.</span>  </span>Any                            linear                            map
<!-- l. 504 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>L</mi> <mo class='MathClass-punc' stretchy='false'>:</mo> <msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><msup><mrow><mi>ℂ</mi></mrow><mrow><mn>2</mn></mrow></msup><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>n</mi></mrow></msup> <mo class='MathClass-rel' stretchy='false'>→</mo> <msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><msup><mrow><mi>ℂ</mi></mrow><mrow><mn>2</mn></mrow></msup><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>m</mi></mrow></msup></mrow></math>
can be represented by a ZX-diagram.
</p>
   </div>
<!-- l. 505 --><p class='indent'>    We call this property <span class='cmbx-10x-x-109'>universality</span>. Later on we will also consider various
restrictions of ZX-diagrams. We can then also say that this restriction is
universal for a given subset of linear maps, if we can represent any linear map
from this subset using a ZX-diagram satisfying this restriction. It is important to
emphasise again that just because we <span class='cmti-10x-x-109'>can </span>represent any linear map using a
ZX-diagram, this does not mean that such representations will necessary be
‘nice’. It is an ongoing project to find good representations of useful linear maps
in the ZX-calculus. For instance, in Chapter <a href='main_htmlch9.html#controlled-gates-and-classical-oracles'>9<!-- tex4ht:ref: ch:midlevel  --></a> we will introduce a new (derived)
generator that allows us to more easily represent Toffoli gates in the
ZX-calculus, since the ‘native’ representation as a ZX-diagram is a bit
cumbersome.
                                                                     

                                                                     
</p>
   <h3 class='sectionHead' id='the-rules-of-the-zxcalculus'><span class='titlemark'>3.2   </span> <a id='x5-580003.2'></a>The rules of the ZX-calculus</h3>
<!-- l. 509 --><p class='noindent'>The thing that makes ZX-diagrams so useful, above and beyond plain old tensor
networks, is a collection of rewrite rules called the <span class='cmbx-10x-x-109'>ZX-calculus</span>. These rules
enable you to replace a little piece of a ZX-diagram with another, equivalent
piece, without changing the linear map represented by the diagram. Let’s look at
a simple example, involving a Z-spider from 1 to 2 wires and an X-spider from 2
to 1: </p><table class='equation-star'><tr><td>
<!-- l. 511 --><object data="svgs/z-spider-1-2.svg" alt="diagram of z-spider-1-2" class="svg-diagram"></object></td></tr></table>
<!-- l. 514 --><p class='indent'>   Then, using the fact that: </p><table class='equation-star'><tr><td>
<!-- l. 515 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
             <mo class='MathClass-open' stretchy='false'>⟨</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>00</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-open' stretchy='false'>⟨</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>11</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-open' stretchy='false'>⟨</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>00</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-open' stretchy='false'>⟨</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>11</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mfrac><mrow><mn>1</mn></mrow> 
<mrow><mn>2</mn></mrow></mfrac>
</mrow></math></td></tr></table>
<!-- l. 518 --><p class='indent'>   we can do a little calculation: </p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 519 --><object data="svgs/comp-lhs.svg" alt="diagram of comp-lhs" class="svg-diagram"></object></td></tr></table>
<!-- l. 522 --><p class='indent'>   and we see that we have found a pair of ZX-diagrams that are equal, up to a
scalar: </p><table class='equation'><tr><td>
<!-- l. 523 --><p class='indent'>
</p><!-- l. 523 --><object id='x5-58001r33' data="svgs/eq-compl-example.svg" alt="diagram of eq:compl-example" class="svg-diagram"></object></td><td class='eq-no'>(3.33)</td></tr></table>
<!-- l. 526 --><p class='indent'>   We won’t see many concrete calculations with bras and kets in this chapter,
because once we know a few simple rules, we will be able to apply them
graphically to do all the calculations we need to. For example, now that we have
equation (<a href='#x5-58001r33'>3.33<!-- tex4ht:ref: eq:compl-example  --></a>), we can use it to derive equations between bigger ZX-diagrams.
Here’s one:
</p>
<div class='center'>
<!-- l. 528 --><p class='noindent'>
</p><!-- l. 529 --><p class='noindent'><object data="svgs/comp-example-pf.svg" alt="diagram of comp-example-pf" class="svg-diagram"></object> </p></div>
<!-- l. 532 --><p class='indent'>   Note the scalar factor <!-- l. 532 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mfrac><mrow><mn>1</mn></mrow>
<mrow><mn>2</mn></mrow></mfrac></math>
pops out in front, by linearity. The most commonly-used version of the
ZX-calculus, and indeed what is often referred to as <span class='cmti-10x-x-109'>the </span>ZX-calculus consists of
the following set of rules in Figure <a href='#the-standard-rules-of-the-zxcalculus'>3.0<!-- tex4ht:ref: fig:zx-rules  --></a>. </p><figure class='figure' id='x5-580020'><span id='the-standard-rules-of-the-zxcalculus'></span> 

                                                                     

                                                                     

                                                                     

                                                                     
<!-- l. 534 --><p class='noindent'>figure<a id='figure._theHfigure_'></a>
</p><!-- l. 537 --><p class='noindent'><img src="svgs/zx-rules.svg" alt="diagram of zx-rules" class="inline-diagram" />
</p>
<figcaption class='caption'><span class='id'>Figure 3.0: </span><span class='content'>The standard rules of the ZX-calculus</span></figcaption><!-- tex4ht:label?: x5-580020  -->
                                                                     

                                                                     
   </figure>
<!-- l. 542 --><p class='indent'>   We will use these 7 rules quite a bit in the coming pages, so we’ve tried to
give them some reasonably easy-to-remember names: </p>
<div class='center'>
<!-- l. 543 --><p class='noindent'>
</p>
<div class='tabular'> <table class='tabular' id='TBL-60'><colgroup id='TBL-60-1g'><col id='TBL-60-1' /><col id='TBL-60-2' /><col id='TBL-60-3' /></colgroup><tr id='TBL-60-1-' style='vertical-align:baseline;'><td class='td11' id='TBL-60-1-1' style='text-align:right; white-space:nowrap;'> <!-- l. 545 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sp</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>  </td><td class='td11' id='TBL-60-1-2' style='text-align:center; white-space:nowrap;'>     </td><td class='td11' id='TBL-60-1-3' style='text-align:left; white-space:nowrap;'> <span class='cmbx-10x-x-109'>sp</span>ider fusion                                                                                                           </td>
</tr><tr id='TBL-60-2-' style='vertical-align:baseline;'><td class='td11' id='TBL-60-2-1' style='text-align:right; white-space:nowrap;'>  <!-- l. 546 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>cc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>  </td><td class='td11' id='TBL-60-2-2' style='text-align:center; white-space:nowrap;'>     </td><td class='td11' id='TBL-60-2-3' style='text-align:left; white-space:nowrap;'> <span class='cmbx-10x-x-109'>c</span>olour <span class='cmbx-10x-x-109'>c</span>hange                                                                                                          </td>
</tr><tr id='TBL-60-3-' style='vertical-align:baseline;'><td class='td11' id='TBL-60-3-1' style='text-align:right; white-space:nowrap;'>  <!-- l. 547 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>π</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>  </td><td class='td11' id='TBL-60-3-2' style='text-align:center; white-space:nowrap;'>     </td><td class='td11' id='TBL-60-3-3' style='text-align:left; white-space:nowrap;'> <!-- l. 547 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mstyle mathvariant='bold'><mi>π</mi></mstyle></math>-commutation rule  </td>
</tr><tr id='TBL-60-4-' style='vertical-align:baseline;'><td class='td11' id='TBL-60-4-1' style='text-align:right; white-space:nowrap;'>  <!-- l. 548 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>  </td><td class='td11' id='TBL-60-4-2' style='text-align:center; white-space:nowrap;'>     </td><td class='td11' id='TBL-60-4-3' style='text-align:left; white-space:nowrap;'> <span class='cmbx-10x-x-109'>s</span>trong <span class='cmbx-10x-x-109'>c</span>omplementarity                                                                                             </td>
</tr><tr id='TBL-60-5-' style='vertical-align:baseline;'><td class='td11' id='TBL-60-5-1' style='text-align:right; white-space:nowrap;'>  <!-- l. 549 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>  </td><td class='td11' id='TBL-60-5-2' style='text-align:center; white-space:nowrap;'>     </td><td class='td11' id='TBL-60-5-3' style='text-align:left; white-space:nowrap;'> <span class='cmbx-10x-x-109'>id</span>entity rule                                                                                                            </td>
</tr><tr id='TBL-60-6-' style='vertical-align:baseline;'><td class='td11' id='TBL-60-6-1' style='text-align:right; white-space:nowrap;'>  <!-- l. 550 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>hh</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>  </td><td class='td11' id='TBL-60-6-2' style='text-align:center; white-space:nowrap;'>     </td><td class='td11' id='TBL-60-6-3' style='text-align:left; white-space:nowrap;'> <span class='cmbx-10x-x-109'>h</span>adamard-<span class='cmbx-10x-x-109'>h</span>adamard cancel rule                                                                                  </td>
</tr><tr id='TBL-60-7-' style='vertical-align:baseline;'><td class='td11' id='TBL-60-7-1' style='text-align:right; white-space:nowrap;'>  <!-- l. 551 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>eu</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>  </td><td class='td11' id='TBL-60-7-2' style='text-align:center; white-space:nowrap;'>     </td><td class='td11' id='TBL-60-7-3' style='text-align:left; white-space:nowrap;'> <span class='cmbx-10x-x-109'>eu</span>ler decomposition of hadamard                                                                                </td></tr></table></div>
</div>
<!-- l. 554 --><p class='noindent'>This is sometimes also called the <span class='cmbx-10x-x-109'>stabiliser </span>or <span class='cmbx-10x-x-109'>Clifford ZX-calculus</span>, for reasons
that will become clear in Section <a href='main_htmlch5.html#completeness-of-clifford-zxdiagrams'>5.5<!-- tex4ht:ref: sec:completeness-Clifford  --></a>. Note that some of the rules of
Figure <a href='#the-standard-rules-of-the-zxcalculus'>3.0<!-- tex4ht:ref: fig:zx-rules  --></a> only hold up to a non-zero scalar. This is fine for most of
the book, since we often don’t care about the exact scalar factors. In
Section <a href='#dealing-with-scalars'>3.6.2<!-- tex4ht:ref: sec:zx-scalars  --></a> we discuss rewriting with scalars in more detail, and we present a
scalar-accurate version of the rewrites in Figure <a href='#a-complete-and-scalaraccurate-set-of-rewrites-rules-for-the-clifford-fragment-of-the-zxcalculus-these-rules-hold-for-all-r'>3.0<!-- tex4ht:ref: fig:zx-rules-Clifford  --></a>. These rules of the
ZX-calculus will be our main tool for reasoning about quantum computation in
this book, so we better make sure we are all on the same page about them. In
the next few subsections we will discuss where each of the rules comes
from, and some examples of how you can use them to prove interesting
things.
</p>
   <h4 class='subsectionHead' id='spider-fusion-and-identity-removal'><span class='titlemark'>3.2.1   </span> <a id='x5-590003.2.1'></a>Spider fusion and identity removal</h4>
<!-- l. 558 --><p class='noindent'>The most fundamental of all the graphical rewrite rules allowed in the
ZX-calculus is <span class='cmbx-10x-x-109'>spider fusion</span>. This says that we can <span class='cmti-10x-x-109'>fuse </span>two spiders together
when they are of the same colour and connected by one or more wires. When
spiders are fused, their phases are added together. In terms of diagrams:
</p><table class='equation'><tr><td>
<!-- l. 559 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 559 --><object id='x5-59001r34' data="svgs/eq-spider-fusion.svg" alt="diagram of eq:spider-fusion" class="svg-diagram"></object></td><td class='eq-no'>(3.34)</td></tr></table>
<!-- l. 562 --><p class='indent'>   Note that we interpret the numbers
<!-- l. 562 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>α</mi></math> and
<!-- l. 562 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>β</mi></math> as
phases <!-- l. 562 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></math>
and <!-- l. 562 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iβ</mi></mrow></msup></math>,
and hence this addition is assumed to be modulo
<!-- l. 562 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>2</mn><mi>π</mi></mrow></math>. Spider fusion
can be used to prove many well-known identities of quantum circuits. For instance, that
a <!-- l. 563 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>-phase
gate commutes through the control of a CNOT gate:
</p>
<div class='center'>
<!-- l. 565 --><p class='noindent'>
</p><!-- l. 566 --><p class='noindent'><object data="svgs/commute-Z-CNOT-ZX-fuse.svg" alt="diagram of commute-Z-CNOT-ZX-fuse" class="svg-diagram"></object> </p></div>
<!-- l. 569 --><p class='indent'>   Flipping the colours, we can use spider fusion to show that an
<!-- l. 569 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math> gate
commutes through the <span class='cmti-10x-x-109'>target </span>of a CNOT gate:
</p>
<div class='center'>
<!-- l. 571 --><p class='noindent'>
</p><!-- l. 572 --><p class='noindent'><object data="svgs/commute-X-CNOT-fuse.svg" alt="diagram of commute-X-CNOT-fuse" class="svg-diagram"></object> </p></div>
<!-- l. 575 --><p class='indent'>   That phases add when spiders fuse essentially generalises the observation that
two rotations of the Bloch sphere in the same direction add together:
</p><table class='equation'><tr><td>
<!-- l. 576 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 576 --><object id='x5-59002r35' data="svgs/eq-phases-add.svg" alt="diagram of eq:phases-add" class="svg-diagram"></object></td><td class='eq-no'>(3.35)</td></tr></table>
<!-- l. 579 --><p class='indent'>   As we have <!-- l. 579 --><img src="svgs/ket0-1.svg" alt="diagram of ket0-1" class="inline-diagram" />
and <!-- l. 581 --><img src="svgs/ket1.svg" alt="diagram of ket1" class="inline-diagram" />
(cf. (<a href='#x5-49007r6'>3.6<!-- tex4ht:ref: eq:z-kets  --></a>)), we also see that spider fusion proves that applying the Pauli
<!-- l. 583 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math> gate
to <!-- l. 583 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
gives <!-- l. 583 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>:
</p><table class='equation'><tr><td>
<!-- l. 584 --><p class='indent'>
</p><!-- l. 584 --><object id='x5-59003r36' data="svgs/ket0-pi.svg" alt="diagram of ket0-pi" class="svg-diagram"></object></td><td class='eq-no'>(3.36)</td></tr></table>
<!-- l. 587 --><p class='indent'>   An equation like <!-- l. 587 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Z</mi><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
is given similarly: </p><table class='equation'><tr><td>
<!-- l. 588 --><p class='indent'>
</p><!-- l. 588 --><object id='x5-59004r37' data="svgs/ketminus-pi.svg" alt="diagram of ketminus-pi" class="svg-diagram"></object></td><td class='eq-no'>(3.37)</td></tr></table>
<!-- l. 591 --><p class='indent'>   Note here that we have <!-- l. 591 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>π</mi> <mo class='MathClass-bin' stretchy='false'>+</mo> <mi>π</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>2</mn><mi>π</mi> <mo class='MathClass-rel' stretchy='false'>≡</mo> <mn>0</mn></mrow></math>.
The following rewrite rule we already saw in Eq. (<a href='#x5-51008r15'>3.15<!-- tex4ht:ref: eq:id-removal-define  --></a>): </p><table class='equation'><tr><td>
<!-- l. 593 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 593 --><object id='x5-59005r38' data="svgs/eq-id-removal.svg" alt="diagram of eq:id-removal" class="svg-diagram"></object></td><td class='eq-no'>(3.38)</td></tr></table>
<!-- l. 596 --><p class='indent'>   We call this rule <span class='cmbx-10x-x-109'>identity removal</span>. This rule can be interpreted in several
ways. Considering a 1-input 1-output spider as a phase gate over either the
Z- or X-axis, this rule says that a rotation by 0 degrees does nothing.
Combining it with spider fusion it says that the inverse of a rotation by
<!-- l. 597 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>α</mi></math> is a rotation
by <!-- l. 597 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo> <mi>α</mi></mrow></math>:
</p>
<div class='center'>
<!-- l. 599 --><p class='noindent'>
</p><!-- l. 600 --><p class='noindent'><object data="svgs/alpha-min-alpha.svg" alt="diagram of alpha-min-alpha" class="svg-diagram"></object> </p></div>
<!-- l. 603 --><p class='indent'>   Composing the diagrams of (<a href='#x5-59005r38'>3.38<!-- tex4ht:ref: eq:id-removal  --></a>) with a cup it says we can make a Bell state
by either taking a maximally entangled state over the Z basis or over the X
basis:
</p>
<div class='center'>
<!-- l. 605 --><p class='noindent'>
</p><!-- l. 606 --><p class='noindent'><object data="svgs/id-removal-cup.svg" alt="diagram of id-removal-cup" class="svg-diagram"></object> </p></div>
<!-- l. 609 --><p class='indent'>   Identity removal also allows us to get rid of self-loops on spiders:
</p><table class='equation'><tr><td>
<!-- l. 610 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 610 --><object id='x5-59006r39' data="svgs/eq-self-loop-removal.svg" alt="diagram of eq:self-loop-removal" class="svg-diagram"></object></td><td class='eq-no'>(3.39)</td></tr></table>
<!-- l. 613 --><p class='indent'>   Here in the first step we applied the rule in reverse to <span class='cmti-10x-x-109'>add </span>an identity. Then
we fused the two spiders that are now connected by two wires using the spider
fusion rule.
</p>
   <div class='newtheorem'>
<!-- l. 614 --><p class='noindent'><span class='head'>
<a id='x5-59007r1'></a>
<span class='cmbx-10x-x-109'>Example 3.2.1.</span>  </span> The following quantum circuit implements the GHZ state
<!-- l. 615 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>000</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>111</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>:
</p>
<div class='center'>
<!-- l. 617 --><p class='noindent'>
</p><!-- l. 618 --><p class='noindent'><object data="svgs/ghz-circuit-prime.svg" alt="diagram of ghz-circuit-prime" class="svg-diagram"></object> </p></div>
<!-- l. 621 --><p class='indent'>   We can verify this by translating it into a ZX-diagram and simplifying it
using the rules we have just seen: </p><table class='equation'><tr><td>
<!-- l. 622 --><p class='indent'>
</p><!-- l. 622 --><object id='x5-59008r40' data="svgs/eq-ghz-circuit-zx.svg" alt="diagram of eq:ghz-circuit-zx" class="svg-diagram"></object></td><td class='eq-no'>(3.40)</td></tr></table>
<!-- l. 625 --><p class='indent'>   By the definition of the Z-spider, this last diagram is equal to
<!-- l. 625 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>000</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>111</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
which is indeed the (unnormalised) 3-qubit GHZ state.
</p>
   </div>
<!-- l. 626 --><p class='indent'>
                                                                     

                                                                     
</p>
   <h4 class='subsectionHead' id='the-copy-rule-and-commutation'><span class='titlemark'>3.2.2   </span>  <a id='x5-600003.2.2'></a>The  copy  rule  and
<!-- l. 627 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>-commutation</h4>
<!-- l. 628 --><p class='noindent'>The second set of rules of the ZX-calculus we will look at concerns
the interaction of the Pauli X and Z gates and their eigenstates
<!-- l. 628 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-punc' stretchy='false'>,</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-punc' stretchy='false'>,</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-punc' stretchy='false'>,</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> with
the spiders. Recall from Eqs. (<a href='#x5-49004r3'>3.3<!-- tex4ht:ref: eq:x-kets  --></a>) and (<a href='#x5-49007r6'>3.6<!-- tex4ht:ref: eq:z-kets  --></a>) that: </p><table class='equation-star'><tr><td>
<!-- l. 629 --><object data="svgs/ket0.svg" alt="diagram of ket0" class="svg-diagram"></object></td></tr></table>
<!-- l. 632 --><p class='indent'>   The spider fusion rule already covers the interaction of a couple of these maps
and states. Indeed we can use the spider fusion rule to show that a Z gate
commutes through a Z-spider:
</p>
<div class='center'>
<!-- l. 634 --><p class='noindent'>
</p><!-- l. 635 --><p class='noindent'><object data="svgs/spider-Z-commute.svg" alt="diagram of spider-Z-commute" class="svg-diagram"></object> </p></div>
<!-- l. 638 --><p class='indent'>   Spider fusion also shows what happens when a
<!-- l. 638 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|+⟩</mtext></mrow></math> or
<!-- l. 638 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|−⟩</mtext></mrow></math> state
is applied to a Z-spider:
</p>
<div class='center'>
<!-- l. 640 --><p class='noindent'>
</p><!-- l. 641 --><p class='noindent'><object data="svgs/spider-ket0-fuse.svg" alt="diagram of spider-ket0-fuse" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
<!-- l. 644 --><p class='indent'>   By flipping all the colours we then also know that an X gate commutes through an X spider
and that the <!-- l. 644 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
and <!-- l. 644 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> fuse
into an X spider. A more interesting question is what happens to an X gate when it
encounters a Z-spider (or vice versa, a Z gate that encounters an X-spider). Consider
a Z-spider with just a single input and no phase. Its linear operator is then given
by <!-- l. 646 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>|</mo></mrow></math>.
Hence, if we apply an X gate to the input the resulting linear operator
is
<!-- tex4ht:inline --></p><!-- l. 647 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
              <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mi>X</mi> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mi>X</mi><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-punc' stretchy='false'>,</mo>
</mrow></math>
<!-- l. 647 --><p class='nopar'> as an X gate interchanges <!-- l. 648 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
and <!-- l. 648 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>.
This is easily seen to be equivalent to a Z-spider <span class='cmti-10x-x-109'>followed </span>by an X gate on each of
the outputs:
<!-- tex4ht:inline --></p><!-- l. 649 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
    <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-rel' stretchy='false'>=</mo> <mspace class='nbsp' width='0.33em'></mspace><mo class='MathClass-open' stretchy='false'>(</mo><mi>X</mi> <mo class='MathClass-bin' stretchy='false'>⊗</mo><mo class='MathClass-rel' stretchy='false'>⋯</mo> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi>X</mi><mo class='MathClass-close' stretchy='false'>)</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-open' stretchy='false'>(</mo><mi>X</mi> <mo class='MathClass-bin' stretchy='false'>⊗</mo><mo class='MathClass-rel' stretchy='false'>⋯</mo> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi>X</mi><mo class='MathClass-close' stretchy='false'>)</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-punc' stretchy='false'>.</mo>
</mrow></math>
<!-- l. 649 --><p class='nopar'> Hence, in terms of diagrams, we have: </p><table class='equation'><tr><td>
<!-- l. 651 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 651 --><object id='x5-60001r41' data="svgs/eq-Z-spider-X-copy.svg" alt="diagram of eq:Z-spider-X-copy" class="svg-diagram"></object></td><td class='eq-no'>(3.41)</td></tr></table>
<!-- l. 654 --><p class='indent'>   We will refer to this as the <!-- l. 654 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math><span class='cmbx-10x-x-109'>-copy
rule</span>. By applying the appropriate cups and caps we see that such a
<!-- l. 655 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>-copy
rule continues to hold regardless of how many inputs and outputs the spider has.
But what about when the spider has a non-zero phase? Using spider fusion in
reverse to <span class='cmti-10x-x-109'>unfuse </span>the phase we can reduce this to a simpler question:
</p><table class='equation'><tr><td>
<!-- l. 658 --><p class='indent'>
</p><!-- l. 658 --><object id='x5-60002r42' data="svgs/Z-spider-X-copy-phase.svg" alt="diagram of Z-spider-X-copy-phase" class="svg-diagram"></object></td><td class='eq-no'>(3.42)</td></tr></table>
<!-- l. 661 --><p class='indent'>   Hence, we need to resolve what happens when we apply an X gate to a
<!-- l. 661 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> state:
</p><table class='equation-star'><tr><td>
<!-- l. 662 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
   <mi>X</mi><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>X</mi><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mi>X</mi><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mo class='MathClass-bin' stretchy='false'>−</mo><mi mathvariant='italic'>iα</mi></mrow></msup><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-close' stretchy='false'>)</mo><mo class='MathClass-punc' stretchy='false'>.</mo>
</mrow></math></td></tr></table>
                                                                     

                                                                     
<!-- l. 663 --><p class='indent'>   Ignoring the global phase <!-- l. 663 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></math>
we can write this in terms of a diagram: </p><table class='equation'><tr><td>
<!-- l. 664 --><p class='indent'>
</p><!-- l. 664 --><object id='x5-60003r43' data="svgs/alpha-X-phase.svg" alt="diagram of alpha-X-phase" class="svg-diagram"></object></td><td class='eq-no'>(3.43)</td></tr></table>
<!-- l. 667 --><p class='indent'>   The most generic case, together with its colour-flipped counterpart is then:
</p><table class='equation'><tr><td>
<!-- l. 668 --><p class='indent'>
</p><!-- l. 668 --><object id='x5-60004r44' data="svgs/eq-pi-copy-generic.svg" alt="diagram of eq:pi-copy-generic" class="svg-diagram"></object></td><td class='eq-no'>(3.44)</td></tr></table>
<!-- l. 671 --><p class='indent'>   With this rule we can also see what happens if there are already multiple
<!-- l. 671 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>
phases present: </p><table class='equation'><tr><td>
<!-- l. 672 --><p class='indent'>
</p><!-- l. 672 --><object id='x5-60005r45' data="svgs/eq-pi-copy-multiple.svg" alt="diagram of eq:pi-copy-multiple" class="svg-diagram"></object></td><td class='eq-no'>(3.45)</td></tr></table>
                                                                     

                                                                     
<!-- l. 675 --><p class='indent'>   We see then that the position of the
<!-- l. 675 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>’s
on the wires of the spider gets toggled. Similar copy rules hold
for the eigenstates of the X and Z operators. Indeed, applying a
<!-- l. 676 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> to the 1-input Z-spider
<!-- l. 676 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>|</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='negthinspace' width='-0.17em'></mspace><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>|</mo></mrow></math> it is clear that we
get the output <!-- l. 676 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>:
</p><table class='equation'><tr><td>
<!-- l. 677 --><p class='indent'>
</p><!-- l. 677 --><object id='x5-60006r46' data="svgs/eq-ket0-spider-copy.svg" alt="diagram of eq:ket0-spider-copy" class="svg-diagram"></object></td><td class='eq-no'>(3.46)</td></tr></table>
<!-- l. 680 --><p class='indent'>   The same works for <!-- l. 680 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
(although we then do get a global phase of
<!-- l. 680 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></math> that
we will ignore): </p><table class='equation'><tr><td>
<!-- l. 681 --><p class='indent'>
</p><!-- l. 681 --><object id='x5-60007r47' data="svgs/ket1-spider-copy.svg" alt="diagram of ket1-spider-copy" class="svg-diagram"></object></td><td class='eq-no'>(3.47)</td></tr></table>
<!-- l. 684 --><p class='indent'>   By introducing a Boolean variable
<!-- l. 684 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>a</mi></math> that is
either <!-- l. 684 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math>
or <!-- l. 684 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>1</mn></math> we
can represent the last two equations as a single parametrised equation:
</p><table class='equation'><tr><td>
<!-- l. 685 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 685 --><object id='x5-60008r48' data="svgs/eq-keta-spider-copy.svg" alt="diagram of eq:keta-spider-copy" class="svg-diagram"></object></td><td class='eq-no'>(3.48)</td></tr></table>
<!-- l. 688 --><p class='indent'>   Here the <!-- l. 688 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi mathvariant='italic'>aπ</mi></mrow></math> phase is
either zero (when <!-- l. 688 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>),
or <!-- l. 688 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math> (when
<!-- l. 688 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>), and hence the input
represents the <!-- l. 688 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>-basis
state <!-- l. 688 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>a</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> (being
either <!-- l. 688 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> or
<!-- l. 688 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>). As before,
the same equation but with the colours flipped also continues to hold, which gives rules
for copying <!-- l. 689 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|+⟩</mtext></mrow></math>
and <!-- l. 689 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|−⟩</mtext></mrow></math>
states through X-spiders. We will refer to all these rules as <span class='cmbx-10x-x-109'>state-copy rules</span>.
These state-copy rules only hold when the spider being copied has a phase of
<!-- l. 689 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math> or
<!-- l. 689 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>.
For any other phase the analogue of (<a href='#x5-60008r48'>3.48<!-- tex4ht:ref: eq:keta-spider-copy  --></a>) does not hold, nor would
we expect it to! Quantum theory famously does not allow you to <span class='cmti-10x-x-109'>clone</span>
arbitrary states. Note here the important quantifier of ‘arbitrary’.
The reason that a Z-spider can act as a cloning process for the
<!-- l. 689 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> and
<!-- l. 689 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
states is because they are orthogonal. It does not clone any other state. Note that
the orientation of the wires in the rewrite rules we have derived is irrelevant, as
we can pre-compose and post-compose each rule with ‘cups and caps’ to change
inputs to outputs and vice versa. For instance, for the ‘reverse’ of the state-copy
rule: </p><table class='equation'><tr><td>
<!-- l. 691 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 691 --><object id='x5-60009r49' data="svgs/gen-copy-reverse.svg" alt="diagram of gen-copy-reverse" class="svg-diagram"></object></td><td class='eq-no'>(3.49)</td></tr></table>
<!-- l. 694 --><p class='indent'>   These copy rules all deal with the Pauli
<!-- l. 694 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math> and
<!-- l. 694 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>
and their eigenstates. We can prove similar copy rules for the Pauli
<!-- l. 694 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Y</mi> </mrow></math>
and its eigenstates, since we could also define a Y-spider as mentioned
in Remark <a href='#x5-53009r1'>3.1.1<!-- tex4ht:ref: rem:Y-spider  --></a>. In particular, we will find a way to write the
<!-- l. 694 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Y</mi> </mrow></math>
eigenstates in Exercise <a href='#x5-67008r15'>3.15<!-- tex4ht:ref: exer:S-state-equality  --></a>.
</p>
   <div class='newtheorem'>
<!-- l. 695 --><p class='noindent'><span class='head'>
<a id='x5-60010r2'></a>
<span class='cmbx-10x-x-109'>Example 3.2.2.</span>  </span> Knowing how the Pauli operators commute through a
circuit (or a more general computation) is important for several areas in
quantum computation, such as when verifying the functioning of an error
correcting code, implementing a measurement-based quantum computation,
or calculating the stabiliser tableau of a Clifford circuit. The ZX-calculus
makes it easy to remember the rules for how the Paulis propagate. Indeed,
the only rules required are spider fusion <!-- l. 697 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sp</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
<!-- l. 697 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>-copy
rule <!-- l. 697 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
the colour-change rule <!-- l. 697 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>cc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
to be introduced in the next section (and occasionally an identity will need to
be removed with <!-- l. 697 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>).
For instance, suppose we wish to know how the Pauli operator <!-- l. 698 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>X</mi> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi>Z</mi></mrow></math>
commutes through the following circuit:
</p>
<div class='center'>
<!-- l. 700 --><p class='noindent'>
</p><!-- l. 701 --><p class='noindent'><object data="svgs/circuit-pauli-commuting.svg" alt="diagram of circuit-pauli-commuting" class="svg-diagram"></object> </p></div>
<!-- l. 704 --><p class='indent'>   We write it as a ZX-diagram with the Pauli
<!-- l. 704 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math> and
                                                                     

                                                                     
<!-- l. 704 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math> on
the left, and start pushing them to the right:
</p>
<div class='center'>
<!-- l. 706 --><p class='noindent'>
</p><!-- l. 707 --><p class='noindent'><object data="svgs/circuit-pauli-zx.svg" alt="diagram of circuit-pauli-zx" class="svg-diagram"></object> </p></div>
<!-- l. 710 --><p class='indent'>   Note that we have used <!-- l. 710 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sp</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
both to commute spiders of the same colour through each other
(like the Pauli Z through the control of the CNOTs, or the Pauli
Z through the S gate), as well as to combine the phases of the Paulis
in order to cancel out the phases. We see that we end up with the
Pauli <!-- l. 711 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Y</mi> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi>I</mi></mrow></math>.
Of course, this process was quite lengthy, because every rewrite step is
shown. Once you get comfortable with this process, many of the steps can
be combined and it becomes easy to see where each of the Paulis ends
up.
</p>
   </div>
<!-- l. 712 --><p class='indent'>
</p>
   <h4 class='subsectionHead' id='colour-changing'><span class='titlemark'>3.2.3   </span> <a id='x5-610003.2.3'></a>Colour changing</h4>
<!-- l. 714 --><p class='noindent'>As has been noted several times in the preceding sections, when we have derived
some rule in the ZX-calculus, an analogous rule with the colours interchanged
also holds. This follows from the rules concerning the Hadamard gate:
</p><table class='equation'><tr><td>
<!-- l. 715 --><p class='indent'>
</p><!-- l. 715 --><object id='x5-61001r50' data="svgs/eq-had-rules.svg" alt="diagram of eq:had-rules" class="svg-diagram"></object></td><td class='eq-no'>(3.50)</td></tr></table>
                                                                     

                                                                     
<!-- l. 718 --><p class='indent'>   The first of these rules states that the Hadamard gate is self-inverse, while the
second says that commuting a Hadamard through a spider changes its colour
(reflecting the fact that the Hadamard interchanges the eigenbasis of the Pauli
<!-- l. 718 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math> and
<!-- l. 718 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>).
Note that the Hadamard commutation rule also holds for spiders that have no
inputs, so for instance: </p><table class='equation'><tr><td>
<!-- l. 720 --><p class='indent'>
</p><!-- l. 720 --><object id='x5-61002r51' data="svgs/eq-Z-state-to-X.svg" alt="diagram of eq:Z-state-to-X" class="svg-diagram"></object></td><td class='eq-no'>(3.51)</td></tr></table>
<!-- l. 723 --><p class='indent'>   Let us give an example to demonstrate how the two Hadamard rules (<a href='#x5-61001r50'>3.50<!-- tex4ht:ref: eq:had-rules  --></a>)
imply the colour-inverse of any other rule we have. For instance, suppose we want
to prove the colour-inverse of Eq. (<a href='#x5-60001r41'>3.41<!-- tex4ht:ref: eq:Z-spider-X-copy  --></a>): </p><table class='equation'><tr><td>
<!-- l. 725 --><p class='indent'>
</p><!-- l. 725 --><object id='x5-61003r52' data="svgs/eq-X-copy-repeat.svg" alt="diagram of eq:X-copy-repeat" class="svg-diagram"></object></td><td class='eq-no'>(3.52)</td></tr></table>
<!-- l. 728 --><p class='indent'>   We start with the left-hand side of the colour-swapped version, and then
insert two Hadamards on the input by applying the self-inverse rule in
reverse:
</p>
<div class='center'>
<!-- l. 730 --><p class='noindent'>
</p><!-- l. 731 --><p class='noindent'><object data="svgs/colour-swap-example1.svg" alt="diagram of colour-swap-example1" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
<!-- l. 734 --><p class='indent'>   We then commute one of the Hadamards all the way to the outputs:
</p>
<div class='center'>
<!-- l. 736 --><p class='noindent'>
</p><!-- l. 737 --><p class='noindent'><object data="svgs/colour-swap-example2.svg" alt="diagram of colour-swap-example2" class="svg-diagram"></object> </p></div>
<!-- l. 740 --><p class='indent'>   We now see the left-hand side of the original (not colour-swapped)
equation (<a href='#x5-61003r52'>3.52<!-- tex4ht:ref: eq:X-copy-repeat  --></a>), and hence we can apply it:
</p>
<div class='center'>
<!-- l. 742 --><p class='noindent'>
</p><!-- l. 743 --><p class='noindent'><object data="svgs/colour-swap-example3.svg" alt="diagram of colour-swap-example3" class="svg-diagram"></object> </p></div>
<!-- l. 746 --><p class='indent'>   Now it remains to commute the Hadamards back to the left, and to cancel
the resulting double Hadamard:
</p>
<div class='center'>
<!-- l. 748 --><p class='noindent'>
</p><!-- l. 749 --><p class='noindent'><object data="svgs/colour-swap-example4.svg" alt="diagram of colour-swap-example4" class="svg-diagram"></object> </p></div>
<!-- l. 752 --><p class='indent'>   We have hence succeeded in proving the colour-inverse of Eq. (<a href='#x5-61003r52'>3.52<!-- tex4ht:ref: eq:X-copy-repeat  --></a>):
</p>
<div class='center'>
<!-- l. 754 --><p class='noindent'>
</p><!-- l. 755 --><p class='noindent'><object data="svgs/X-spider-Z-copy.svg" alt="diagram of X-spider-Z-copy" class="svg-diagram"></object> </p></div>
<!-- l. 758 --><p class='indent'>   Using the Hadamard commutation rule we can also prove that surrounding a
spider with Hadamards changes its colour: </p><table class='equation'><tr><td>
<!-- l. 759 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 759 --><object id='x5-61004r53' data="svgs/hadamard-surround-proof.svg" alt="diagram of hadamard-surround-proof" class="svg-diagram"></object></td><td class='eq-no'>(3.53)</td></tr></table>
<!-- l. 762 --><p class='indent'>   In Exercise (<a href='main_htmlch2.html#x4-27001r13'>2.13<!-- tex4ht:ref: exer:CZ-as-CNOT  --></a>) we saw a circuit for building the CZ gate using a CNOT
and Hadamards. We can translate this circuit to a ZX-diagram and then simplify
it using the Hadamard rules: </p><table class='equation'><tr><td>
<!-- l. 763 --><p class='indent'>
</p><!-- l. 763 --><object id='x5-61005r54' data="svgs/CZ-as-CNOT-ZX.svg" alt="diagram of CZ-as-CNOT-ZX" class="svg-diagram"></object></td><td class='eq-no'>(3.54)</td></tr></table>
<!-- l. 766 --><p class='indent'>   We see that the diagram we get looks symmetrically on the control and target
qubit. This is because a CZ gate <span class='cmti-10x-x-109'>is </span>acting symmetrically on its two qubits. I.e. we
have <!-- l. 766 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mstyle class='text'><mtext>SWAP</mtext></mstyle> <mo class='MathClass-bin' stretchy='false'>∘</mo><mstyle class='text'><mtext>CZ</mtext></mstyle> <mo class='MathClass-bin' stretchy='false'>∘</mo><mstyle class='text'><mtext>SWAP</mtext></mstyle> <mo class='MathClass-rel' stretchy='false'>=</mo> <mstyle class='text'><mtext>CZ</mtext></mstyle></mrow></math>.
So here the ZX-diagram directly reflects a useful property the unitary
has.
</p>
   <div class='newtheorem'>
<!-- l. 767 --><p class='noindent'><span class='head'>
<a id='x5-61006r6'></a>
<span class='cmbx-10x-x-109'>Exercise 3.6.</span>  </span>Help                             the                             trapped
<!-- l. 768 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>
phase find its way to the exit.
</p>
<div class='center'>
<!-- l. 770 --><p class='noindent'>
</p><!-- l. 771 --><p class='noindent'><object data="svgs/exer-commute-pi.svg" alt="diagram of exer-commute-pi" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
<!-- l. 774 --><p class='indent'>   Note that it might multiply itself before the end.
</p>
   </div>
<!-- l. 775 --><p class='indent'>
</p>
   <h4 class='subsectionHead' id='strong-complementarity'><span class='titlemark'>3.2.4   </span> <a id='x5-620003.2.4'></a>Strong complementarity</h4>
<!-- l. 777 --><p class='noindent'>The previous sets of rules all have a very distinct topologically intuitive character:
spider fusion allows you to fuse adjacent spiders of the same colour; identity removal
and the Hadamard self-inverse rule allow you to remove certain vertices; the
<!-- l. 777 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>-copy,
state-copy and colour-change rule allow you to commute certain generators
through spiders by copying them to the other side. It is therefore relatively easy
(after you gain some practice) to spot where they can be applied and what the
effect of their application will be on the structure of the rest of the diagram. The
last major rule of the ZX-calculus takes more time to work with intuitively,
although it does correspond to a natural and crucial property of the interaction
of the Z- and X-spider.
</p>
   <h5 class='subsubsectionHead' id='bialgebras-cnots-and-swaps'><span class='titlemark'>3.2.4.1   </span> <a id='x5-630003.2.4.1'></a>Bialgebras, CNOTs and SWAPs</h5>
<!-- l. 781 --><p class='noindent'>Before we introduce the rule, let us give some motivation. Treating the
<!-- l. 782 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> and
<!-- l. 782 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
states as Boolean bits, we can view the phase-free 1-input,
<!-- l. 782 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-output
Z-spider as the COPY gate that copies the bit
<!-- l. 782 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math> to
<!-- l. 782 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>0</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>0</mn></mrow></math> and the
bit <!-- l. 782 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>1</mn></math> to
<!-- l. 782 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>1</mn><mo class='MathClass-rel' stretchy='false'>⋯</mo><mn>1</mn></mrow></math>.
Indeed, this is exactly what Eq. (<a href='#x5-60008r48'>3.48<!-- tex4ht:ref: eq:keta-spider-copy  --></a>) states. Analogously, we can view the
phase-free 2-input, 1-output X-spider as the XOR gate:
</p>
<div class='center'>
<!-- l. 784 --><p class='noindent'>
</p><!-- l. 785 --><p class='noindent'><object data="svgs/XOR-states.svg" alt="diagram of XOR-states" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
<!-- l. 788 --><p class='indent'>   We already saw this in matrix form in Eq. (<a href='#x5-49009r8'>3.8<!-- tex4ht:ref: eq:x-spider-is-XOR  --></a>), but
we can also prove it using spider fusion and the fact that
<!-- l. 788 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>2</mn><mi>π</mi> <mo class='MathClass-rel' stretchy='false'>≡</mo> <mn>0</mn></mrow></math>. The
XOR gate and the COPY gate have a natural commutation relation: first
XORing bits, and then copying the outcome is the same as first copying each of
the bits and then XORing the resulting pairs: </p><table class='equation'><tr><td>
<!-- l. 790 --><p class='indent'>
</p><!-- l. 790 --><object id='x5-63001r55' data="svgs/eq-XOR-COPY-bialgebra.svg" alt="diagram of eq:XOR-COPY-bialgebra" class="svg-diagram"></object></td><td class='eq-no'>(3.55)</td></tr></table>
<!-- l. 793 --><p class='indent'>   This equation says that the XOR <span class='cmti-10x-x-109'>algebra </span>and the COPY <span class='cmti-10x-x-109'>coalgebra </span>together
form a <span class='cmbx-10x-x-109'>bialgebra</span>. This is why the analogous equation in the ZX-calculus is often
called the <span class='cmbx-10x-x-109'>bialgebra rule</span>: </p><table class='equation'><tr><td>
<!-- l. 794 --><p class='indent'>
</p><!-- l. 794 --><object id='x5-63002r56' data="svgs/eq-bialgebra-rule.svg" alt="diagram of eq:bialgebra-rule" class="svg-diagram"></object></td><td class='eq-no'>(3.56)</td></tr></table>
<!-- l. 797 --><p class='indent'>   However, for reasons we will explain below, we will refer to this rule as (a
special case of) <span class='cmbx-10x-x-109'>strong complementarity</span>. This rule is essential to many proofs
in the ZX-calculus. As a demonstration of its utility, let us prove a variation on
the well-known ‘three CNOTs make a swap’ circuit identity. We will start with a
circuit containing two CNOT gates, and deform it to make clear where we can
apply the rule: </p><table class='equation'><tr><td>
<!-- l. 801 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 801 --><object id='x5-63003r57' data="svgs/two-CNOTs.svg" alt="diagram of two-CNOTs" class="svg-diagram"></object></td><td class='eq-no'>(3.57)</td></tr></table>
<!-- l. 804 --><p class='indent'>   We then see that we can apply Eq. (<a href='#x5-63002r56'>3.56<!-- tex4ht:ref: eq:bialgebra-rule  --></a>) in reverse, and then deform the
diagram again to bring it into a simpler form: </p><table class='equation'><tr><td>
<!-- l. 805 --><p class='indent'>
</p><!-- l. 805 --><object id='x5-63004r58' data="svgs/two-CNOTs-2.svg" alt="diagram of two-CNOTs-2" class="svg-diagram"></object></td><td class='eq-no'>(3.58)</td></tr></table>
<!-- l. 808 --><p class='indent'>   We could have done all this without the diagram deformation, as the rewrite
rules apply regardless of the orientation of the inputs and outputs. The circuit
equality is then given in a single step by an application of Eq. (<a href='#x5-63002r56'>3.56<!-- tex4ht:ref: eq:bialgebra-rule  --></a>):
</p><table class='equation'><tr><td>
<!-- l. 809 --><p class='indent'>
</p><!-- l. 809 --><object id='x5-63005r59' data="svgs/eq-bialg-as-CNOT-swap.svg" alt="diagram of eq:bialg-as-CNOT-swap" class="svg-diagram"></object></td><td class='eq-no'>(3.59)</td></tr></table>
<!-- l. 812 --><p class='indent'>   We can see this as another interpretation of strong complementarity: it relates
CNOT gates to the SWAP gate.
                                                                     

                                                                     
</p>
   <h5 class='subsubsectionHead' id='complementarity'><span class='titlemark'>3.2.4.2   </span> <a id='x5-640003.2.4.2'></a>Complementarity</h5>
<!-- l. 814 --><p class='noindent'>We called Eq. (<a href='#x5-63005r59'>3.59<!-- tex4ht:ref: eq:bialg-as-CNOT-swap  --></a>) a version of ‘three CNOTs make a swap’, but it is of course
not the real deal. Let’s actually try to prove the <span class='cmti-10x-x-109'>real </span>‘three CNOTs make a swap’
rule: </p><table class='equation'><tr><td>
<!-- l. 815 --><p class='indent'>
</p><!-- l. 815 --><object id='x5-64001r60' data="svgs/eq-three-CNOTs-proof.svg" alt="diagram of eq:three-CNOTs-proof" class="svg-diagram"></object></td><td class='eq-no'>(3.60)</td></tr></table>
<!-- l. 818 --><p class='indent'>   Here in the last step we simply pushed the spiders of the first CNOT through
the wires of the SWAP. To finish the proof it then remains to show that two
CNOTs applied in succession cancel each other: </p><table class='equation'><tr><td>
<!-- l. 820 --><p class='indent'>
</p><!-- l. 820 --><object id='x5-64002r61' data="svgs/eq-CNOT-CNOT.svg" alt="diagram of eq:CNOT-CNOT" class="svg-diagram"></object></td><td class='eq-no'>(3.61)</td></tr></table>
<!-- l. 823 --><p class='indent'>   The first step towards doing this might seem clear, namely, we fuse the
adjacent spiders of the same colour: </p><table class='equation'><tr><td>
<!-- l. 824 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 824 --><object id='x5-64003r62' data="svgs/eq-CNOT-CNOT-fuse.svg" alt="diagram of eq:CNOT-CNOT-fuse" class="svg-diagram"></object></td><td class='eq-no'>(3.62)</td></tr></table>
<!-- l. 827 --><p class='indent'>   But now we are seemingly stuck. The solution comes from another equation
between the Boolean gates XOR and COPY. When we first apply an XOR and
then a COPY, we can commute the XOR by essentially ‘copying’ it through the
COPY gate. But what happens when we first apply a COPY <span class='cmti-10x-x-109'>and then </span>an XOR
gate to the two outputs of the COPY:
</p><!-- tex4ht:inline --><!-- l. 832 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mtable class='align-star' columnalign='left' displaystyle='true'>
                       <mtr><mtd class='align-odd' columnalign='right'><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='nbsp' width='0.33em'></mspace></mtd>                       <mtd class='align-even'><mover class='stackrel'><mrow><mo class='MathClass-rel' stretchy='false'>↦</mo></mrow><mrow><mrow><mstyle class='text'><mtext>COPY</mtext></mstyle></mrow></mrow></mover><mspace class='nbsp' width='0.33em'></mspace><mo class='MathClass-rel' stretchy='false'>|</mo><mn>00</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='nbsp' width='0.33em'></mspace><mover class='stackrel'><mrow><mo class='MathClass-rel' stretchy='false'>↦</mo></mrow><mrow><mrow><mstyle class='text'><mtext>XOR</mtext></mstyle></mrow></mrow></mover><mspace class='nbsp' width='0.33em'></mspace><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace width='2em'></mspace></mtd>                       <mtd class='align-label' columnalign='right'></mtd>                       <mtd class='align-label'>
                       <mspace width='2em'></mspace></mtd></mtr><mtr><mtd class='align-odd' columnalign='right'><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='nbsp' width='0.33em'></mspace></mtd>                       <mtd class='align-even'><mover class='stackrel'><mrow><mo class='MathClass-rel' stretchy='false'>↦</mo></mrow><mrow><mrow><mstyle class='text'><mtext>COPY</mtext></mstyle></mrow></mrow></mover><mspace class='nbsp' width='0.33em'></mspace><mo class='MathClass-rel' stretchy='false'>|</mo><mn>11</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace class='nbsp' width='0.33em'></mspace><mover class='stackrel'><mrow><mo class='MathClass-rel' stretchy='false'>↦</mo></mrow><mrow><mrow><mstyle class='text'><mtext>XOR</mtext></mstyle></mrow></mrow></mover><mspace class='nbsp' width='0.33em'></mspace><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mspace width='2em'></mspace></mtd>                       <mtd class='align-label' columnalign='right'></mtd>                       <mtd class='align-label'>
   <mspace width='2em'></mspace></mtd></mtr></mtable></math>
<!-- l. 833 --><p class='noindent'>We see that regardless of the input, we output a
<!-- l. 833 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math>. Generalising
the notion of an XOR gate to allow for a 0-input XOR gate that just outputs its unit
(namely <!-- l. 833 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math>),
and a 0-output COPY gate that copies its output zero times (and hence discards
it) we can write this relation diagrammatically as: </p><table class='equation'><tr><td>
<!-- l. 834 --><p class='indent'>
</p><!-- l. 834 --><object id='x5-64004r63' data="svgs/XOR-COPY-hopf.svg" alt="diagram of XOR-COPY-hopf" class="svg-diagram"></object></td><td class='eq-no'>(3.63)</td></tr></table>
                                                                     

                                                                     
<!-- l. 837 --><p class='indent'>   An algebra (XOR) and a coalgebra (COPY) satisfying this equation are
known together as a <span class='cmbx-10x-x-109'>Hopf algebra</span>. Which is why the following analogous
equation between the Z- and X-spider is often called the <span class='cmbx-10x-x-109'>Hopf rule</span>:
</p><table class='equation'><tr><td>
<!-- l. 838 --><p class='indent'>
</p><!-- l. 838 --><object id='x5-64005r64' data="svgs/eq-hopf-rule.svg" alt="diagram of eq:hopf-rule" class="svg-diagram"></object></td><td class='eq-no'>(3.64)</td></tr></table>
<!-- l. 841 --><p class='indent'>   However, we will refer to this rewrite rule as the <span class='cmbx-10x-x-109'>complementarity</span>
rule, because this rule can also be seen as a consequence of the
<!-- l. 841 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>-basis and
<!-- l. 841 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>-basis defining
complementary measurements: having maximal information about the outcome of a
<!-- l. 841 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math> measurement
on a state <!-- l. 841 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>ψ</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
(namely, we will obtain precisely 1 outcome with probability
1) entails minimal information about the outcome of an
<!-- l. 841 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>X</mi></math>
measurement (namely, we will obtain any outcome with equal probability). Writing
<!-- l. 841 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mstyle mathvariant='script'><mi>Z</mi></mstyle> <mo class='MathClass-punc' stretchy='false'>:</mo><mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-open' stretchy='false'>{</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-punc' stretchy='false'>,</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-close' stretchy='false'>}</mo></mrow></math> and
<!-- l. 841 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mstyle mathvariant='script'><mi>X</mi></mstyle> <mo class='MathClass-punc' stretchy='false'>:</mo><mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-open' stretchy='false'>{</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-punc' stretchy='false'>,</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-close' stretchy='false'>}</mo></mrow></math> for
the Z- and X-eigenbases, we can see that they are <span class='cmbx-10x-x-109'>mutually unbiased</span>:
</p><table class='equation'><tr><td>
<!-- l. 842 --><p class='indent'>
</p><!-- l. 842 --><math class='equation' display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
                   <mstyle class='label' id='x5-64006r65'></mstyle><!-- endlabel --><mi class='MathClass-op'>∀</mi><mo> ⁡<!-- FUNCTION APPLICATION --></mo><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>x</mi></mrow><mrow><mi>i</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-rel' stretchy='false'>∈</mo><mstyle mathvariant='script'><mi>X</mi></mstyle><mo class='MathClass-punc' stretchy='false'>,</mo><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>z</mi></mrow><mrow><mi>j</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-rel' stretchy='false'>∈</mo><mstyle mathvariant='script'><mi>Z</mi></mstyle><mspace class='nbsp' width='0.33em'></mspace> <mo class='MathClass-punc' stretchy='false'>:</mo> <mspace class='nbsp' width='0.33em'></mspace><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-open' stretchy='false'>⟨</mo><msub><mrow><mi>x</mi></mrow><mrow><mi>i</mi></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>z</mi></mrow><mrow><mi>j</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo><msup><mrow><mo class='MathClass-rel' stretchy='false'>|</mo></mrow><mrow><mn>2</mn></mrow></msup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mfrac><mrow><mn>1</mn></mrow> 
<mrow><mn>2</mn></mrow></mfrac>
</mrow></math></td><td class='eq-no'>(3.65)</td></tr></table>
                                                                     

                                                                     
<!-- l. 845 --><p class='indent'>   It turns out that complementarity can be derived from strong complementarity
using some clever deformation of the diagram and the rules from the previous
sections: </p><table class='equation'><tr><td>
<!-- l. 846 --><p class='indent'>
</p><!-- l. 846 --><object id='x5-64007r66' data="svgs/eq-hopf-proof.svg" alt="diagram of eq:hopf-proof" class="svg-diagram"></object></td><td class='eq-no'>(3.66)</td></tr></table>
<!-- l. 849 --><p class='indent'>   In this derivation, we first deformed the diagram, then we introduced
identities, we unfused some spiders, applied the strong complementarity rule,
copied a state twice, and in the last equation we removed the dangling scalar
diagram as it just introduces some scalar factor. The complementarity rule is
exceedingly useful. Indeed, combining it with some spider fusion we can use it to
show that we can always cancel pairs of connections between spiders of opposite
colours: </p><table class='equation'><tr><td>
<!-- l. 851 --><p class='indent'>
</p><!-- l. 851 --><object id='x5-64008r67' data="svgs/eq-wire-pair-cancel.svg" alt="diagram of eq:wire-pair-cancel" class="svg-diagram"></object></td><td class='eq-no'>(3.67)</td></tr></table>
<!-- l. 854 --><p class='indent'>   So if two spiders of opposite colour are connected by
<!-- l. 854 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> wires, then this
can be reduced to <!-- l. 854 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi mathvariant='italic'>n </mi><mstyle class='text'><mtext>mod</mtext></mstyle><mi> </mi><mn>2</mn></mrow></math>
wires. In particular, we can finish the proof that 2 CNOTs cancel each other out,
and thus that 3 CNOTs make a SWAP: </p><table class='equation'><tr><td>
<!-- l. 856 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 856 --><object id='x5-64009r68' data="svgs/eq-CNOT-CNOT-fuse2.svg" alt="diagram of eq:CNOT-CNOT-fuse2" class="svg-diagram"></object></td><td class='eq-no'>(3.68)</td></tr></table>
   <div class='newtheorem'>
<!-- l. 859 --><p class='noindent'><span class='head'>
<a id='x5-64010r7'></a>
<span class='cmbx-10x-x-109'>Exercise 3.7.</span>  </span>We proved Eq. (<a href='#x5-64001r60'>3.60<!-- tex4ht:ref: eq:three-CNOTs-proof  --></a>) by applying strong complementarity
in the reverse direction. Show that you can also prove it by using it in the
forward direction (for instance by applying Eq. (<a href='#x5-63002r56'>3.56<!-- tex4ht:ref: eq:bialgebra-rule  --></a>) to the top-left Z- and
X-spiders). You will also need to use spider fusion and complementarity to
finish the proof.
</p>
   </div>
<!-- l. 861 --><p class='indent'>
</p>
   <h5 class='subsubsectionHead' id='general-strong-complementarity'><span class='titlemark'>3.2.4.3   </span> <a id='x5-650003.2.4.3'></a>General strong complementarity</h5>
<!-- l. 863 --><p class='noindent'>We can extend equation (<a href='#x5-63002r56'>3.56<!-- tex4ht:ref: eq:bialgebra-rule  --></a>) to spiders of arbitrary arity to obtain the full
<span class='cmbx-10x-x-109'>strong complementarity </span>rule: </p><table class='equation'><tr><td>
<!-- l. 864 --><p class='indent'>
</p><!-- l. 864 --><object id='x5-65001r69' data="svgs/eq-bialgebra-rule-many.svg" alt="diagram of eq:bialgebra-rule-many" class="svg-diagram"></object></td><td class='eq-no'>(3.69)</td></tr></table>
<!-- l. 867 --><p class='indent'>   That is, for any two connected phase-free spiders of different
colours we can apply strong complementarity, resulting in a
fully connected bipartite graph as on the right-hand side. For
<!-- l. 868 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>2</mn></mrow></math> this is exactly
                                                                     

                                                                     
Eq. (<a href='#x5-63002r56'>3.56<!-- tex4ht:ref: eq:bialgebra-rule  --></a>). For <!-- l. 868 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>
or <!-- l. 868 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math> this
follows in a trivial manner by adding and removing identities (cf. Eq. (<a href='#x5-59005r38'>3.38<!-- tex4ht:ref: eq:id-removal  --></a>)). When
<!-- l. 869 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math> or
<!-- l. 869 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math> this
is just the state-copy rule, i.e. (the colour-swapped) Eq. (<a href='#x5-60006r46'>3.46<!-- tex4ht:ref: eq:ket0-spider-copy  --></a>). Now suppose
<!-- l. 870 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>2</mn></mrow></math> and
<!-- l. 870 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>3</mn></mrow></math>, we will
show how to derive its strong complementarity rule using just spider fusion and
the <!-- l. 870 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>n</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>2</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>2</mn></mrow></math>
version of the rule: </p><table class='equation'><tr><td>
<!-- l. 871 --><p class='indent'>
</p><!-- l. 871 --><object id='x5-65002r70' data="svgs/bialgebra-rule-2-3.svg" alt="diagram of bialgebra-rule-2-3" class="svg-diagram"></object></td><td class='eq-no'>(3.70)</td></tr></table>
   <div class='newtheorem'>
<!-- l. 874 --><p class='noindent'><span class='head'>
<a id='x5-65003r8'></a>
<span class='cmbx-10x-x-109'>Exercise 3.8.</span>  </span>Prove the remaining cases of bialgebra for <!-- l. 875 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>n</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>m</mi> <mo class='MathClass-rel' stretchy='false'>&gt;</mo> <mn>2</mn></mrow></math>.
Hint: first use induction on <!-- l. 875 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math>,
and then on <!-- l. 875 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>.
</p>
   </div>
<!-- l. 876 --><p class='indent'>    There are two common mistakes people make when using the
strong complementarity rule. The first is that the rule (<a href='#x5-63002r56'>3.56<!-- tex4ht:ref: eq:bialgebra-rule  --></a>) only
works when the phases on the spiders are zero. When the phases are
<!-- l. 878 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>
a modification is possible by combining it with the
<!-- l. 878 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>-copy
rules (<a href='#x5-60004r44'>3.44<!-- tex4ht:ref: eq:pi-copy-generic  --></a>): </p><table class='equation'><tr><td>
<!-- l. 879 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 879 --><object id='x5-65004r71' data="svgs/eq-bialgebra-rule-pi.svg" alt="diagram of eq:bialgebra-rule-pi" class="svg-diagram"></object></td><td class='eq-no'>(3.71)</td></tr></table>
   <div class='newtheorem'>
<!-- l. 882 --><p class='noindent'><span class='head'>
<a id='x5-65005r9'></a>
<span class='cmbx-10x-x-109'>Exercise 3.9.</span>  </span>Prove Eq. (<a href='#x5-65004r71'>3.71<!-- tex4ht:ref: eq:bialgebra-rule-pi  --></a>) using the rules of the ZX-calculus we have
seen so far.
</p>
   </div>
<!-- l. 884 --><p class='indent'>    But when one of the spiders contains some arbitrary phase
<!-- l. 885 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>α</mi></math>, the
result will be more complicated: </p><table class='equation'><tr><td>
<!-- l. 886 --><p class='indent'>
</p><!-- l. 886 --><object id='x5-65006r72' data="svgs/bialgebra-phase.svg" alt="diagram of bialgebra-phase" class="svg-diagram"></object></td><td class='eq-no'>(3.72)</td></tr></table>
<!-- l. 889 --><p class='indent'>   The additional bit of diagram we get is called a <span class='cmti-10x-x-109'>phase gadget</span>. We will have a
lot more to say about phase gadgets in Chapter <a href='main_htmlch7.html#universal-circuits'>7<!-- tex4ht:ref: ch:universal  --></a>. The second common mistake
is that people apply the rule (<a href='#x5-63002r56'>3.56<!-- tex4ht:ref: eq:bialgebra-rule  --></a>) from right-to-left without paying attention to
how many outputs the spiders have, wrongfully equating the following diagrams:
</p><table class='equation'><tr><td>
<!-- l. 891 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 891 --><object id='x5-65007r73' data="svgs/bialgebra-wrong.svg" alt="diagram of bialgebra-wrong" class="svg-diagram"></object></td><td class='eq-no'>(3.73)</td></tr></table>
<!-- l. 894 --><p class='indent'>   The correct way to apply strong complementarity here is to first unfuse the
spider: </p><table class='equation'><tr><td>
<!-- l. 895 --><p class='indent'>
</p><!-- l. 895 --><object id='x5-65008r74' data="svgs/bialgebra-wrong-corrected.svg" alt="diagram of bialgebra-wrong-corrected" class="svg-diagram"></object></td><td class='eq-no'>(3.74)</td></tr></table>
<!-- l. 898 --><p class='noindent'>
</p>
   <h5 class='subsubsectionHead' id='strong-complementarity-as-spider-pushing'><span class='titlemark'>3.2.4.4   </span> <a id='x5-660003.2.4.4'></a>Strong complementarity as spider pushing</h5>
<!-- l. 899 --><p class='noindent'>Because strong complementarity is one of the most useful rewrite rules,
but also the hardest one to see when to use, we want to share one more
perspective on what it means topologically. Recall that we can push a
<!-- l. 900 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math> phase
of the opposite colour through a spider: </p><table class='equation'><tr><td>
<!-- l. 901 --><p class='indent'>
</p><!-- l. 901 --><object id='x5-66001r75' data="svgs/eq-Z-spider-X-copy-a.svg" alt="diagram of eq:Z-spider-X-copy-a" class="svg-diagram"></object></td><td class='eq-no'>(3.75)</td></tr></table>
                                                                     

                                                                     
<!-- l. 904 --><p class='indent'>   Note that this is actually two equations, since it holds for both
<!-- l. 904 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math> and
<!-- l. 904 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>. Let’s
see if we can’t compress this into just a single equation. To do this, we will unfuse
the <!-- l. 904 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi mathvariant='italic'>aπ</mi></mrow></math>
phases and reduce them to just a single instance, by applying the copy
rule (<a href='#x5-60008r48'>3.48<!-- tex4ht:ref: eq:keta-spider-copy  --></a>) in reverse: </p><table class='equation-star'><tr><td>
<!-- l. 905 --><object data="svgs/pi-copy-to-state-copy-1.svg" alt="diagram of pi-copy-to-state-copy-1" class="svg-diagram"></object></td></tr></table>
<!-- l. 908 --><p class='indent'>   Now let’s compare this again to the left-hand side of Eq. (<a href='#x5-66001r75'>3.75<!-- tex4ht:ref: eq:Z-spider-X-copy-a  --></a>), where we also
unfuse the <!-- l. 908 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi mathvariant='italic'>aπ</mi></mrow></math>
phase onto its own spider: </p><table class='equation'><tr><td>
<!-- l. 909 --><p class='indent'>
</p><!-- l. 909 --><object id='x5-66002r76' data="svgs/eq-pi-copy-to-state-copy-2.svg" alt="diagram of eq:pi-copy-to-state-copy-2" class="svg-diagram"></object></td><td class='eq-no'>(3.76)</td></tr></table>
<!-- l. 912 --><p class='indent'>   Now we have an equation which holds for
<!-- l. 912 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math> and
<!-- l. 912 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>, where
the phase <!-- l. 912 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi mathvariant='italic'>aπ</mi></mrow></math>
occurs in the same position: as an input to the first qubit. We
can then see this as an equation of linear maps where we input a
specific state into the top input. But these states are respectively
<!-- l. 912 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> and
<!-- l. 912 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> (up
to a scalar factor). This means that this equation holds for a basis of the qubit!
                                                                     

                                                                     
But then the linear maps themselves need to be equal regardless of the state that
we input. We hence get: </p><table class='equation'><tr><td>
<!-- l. 913 --><p class='indent'>
</p><!-- l. 913 --><object id='x5-66003r77' data="svgs/pi-copy-to-state-copy-3.svg" alt="diagram of pi-copy-to-state-copy-3" class="svg-diagram"></object></td><td class='eq-no'>(3.77)</td></tr></table>
<!-- l. 916 --><p class='indent'>   But we recognise this as an instance of strong complementarity! This then gives
us another perspective on strong complementarity: it is a ‘controlled’ version of
the <!-- l. 916 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>
pushing we saw before, where we don’t have to specify what the phase is we want
to push. We instead just leave the wire open.
</p>
   <div class='newtheorem'>
<!-- l. 917 --><p class='noindent'><span class='head'>
<a id='x5-66004r3'></a>
<span class='cmbx-10x-x-109'>Remark 3.2.3.</span>  </span>We need to be a bit careful with this reasoning we used
here, because this is actually one of the areas where the scalar factors <span class='cmti-10x-x-109'>do</span>
matter. We used the fact that if <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>ψ</mi></mrow><mrow><mi>j</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>ψ</mi></mrow><mrow><mi>j</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
for a basis <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mo class='MathClass-open' stretchy='false'>{</mo><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>ψ</mi></mrow><mrow><mi>j</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-close' stretchy='false'>}</mo></mrow><mrow><mi>j</mi></mrow></msub></math>
and linear maps <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub></math>
and <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub></math>,
that then <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>.
But this only works if we have equality on the nose for all <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>j</mi></math>.
If we just had <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>ψ</mi></mrow><mrow><mi>j</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-rel' stretchy='false'>∝</mo> <msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><msub><mrow><mi>ψ</mi></mrow><mrow><mi>j</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
so that the scalar factor could be different for every <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>j</mi></math>,
then we wouldn’t get the equality <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>,
or even <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>∝</mo> <msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>.
To demonstrate this, let’s consider <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mstyle class='text'><mtext>id</mtext></mstyle></mrow></math>
and <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>S</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mstyle class='text'><mtext>diag</mtext></mstyle><mo class='MathClass-open' stretchy='false'>(</mo><mn>1</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>.
Then <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>,
and <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>M</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-rel' stretchy='false'>∝</mo> <mi>i</mi><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>M</mi></mrow><mrow><mn>2</mn></mrow></msub><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>,
but of course <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mstyle class='text'><mtext>id</mtext></mstyle></math>
is not proportional to <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>S</mi></math>.
The reason we were still warranted in making the conclusion we did based on
                                                                     

                                                                     
Eq. (<a href='#x5-66002r76'>3.76<!-- tex4ht:ref: eq:pi-copy-to-state-copy-2  --></a>), is because here the proportionality constant happens to be the
same for both <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>
and <!-- l. 918 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>.
</p>
   </div>
<!-- l. 919 --><p class='indent'>    Using this realisation of ‘strong complementarity as controlled
<!-- l. 920 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>
pushing’, we can give a nice visual intuition to what happens when you apply
strong complementarity: </p><table class='equation'><tr><td>
<!-- l. 921 --><p class='indent'>
</p><!-- l. 921 --><object id='x5-66005r78' data="svgs/bialg-as-pushing.svg" alt="diagram of bialg-as-pushing" class="svg-diagram"></object></td><td class='eq-no'>(3.78)</td></tr></table>
<!-- l. 924 --><p class='indent'>   Here we added an additional Z-spider the X-spider is connected to at the start to
make it look a little more intuitive. We see then that in the same way that for
<!-- l. 925 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math> pushing,
the <!-- l. 925 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>
appears on all the other legs of the spider, with strong complementarity the
X-spider also appears on all the other legs of the Z-spider.
</p>
   <div class='newtheorem'>
<!-- l. 926 --><p class='noindent'><span class='head'>
<a id='x5-66006r10'></a>
<span class='cmbx-10x-x-109'>Exercise 3.10.</span>  </span>Prove the following circuit identity by translating them to
ZX-diagrams and rewriting the left-hand side into the right-hand side.
</p>
<div class='center'>
<!-- l. 929 --><p class='noindent'>
</p><!-- l. 930 --><p class='noindent'><object data="svgs/CNOT-distributed-exer.svg" alt="diagram of CNOT-distributed-exer" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
   </div>
<!-- l. 933 --><p class='indent'>
</p>
   <div class='newtheorem'>
<!-- l. 934 --><p class='noindent'><span class='head'>
<a id='x5-66007r11'></a>
<span class='cmbx-10x-x-109'>Exercise 3.11.</span>  </span> Consider the following parametrised unitary: </p><table class='equation-star'><tr><td>
<!-- l. 936 --><object data="svgs/G-alpha.svg" alt="diagram of G-alpha" class="svg-diagram"></object></td></tr></table>
<!-- l. 939 --><p class='indent'>
   </p><dl class='enumerate'><dt class='enumerate'>
a) </dt><dd class='enumerate'>
   <!-- l. 940 --><p class='noindent'>Using the ZX-calculus show that <!-- l. 940 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>G</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>β</mi><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-bin' stretchy='false'>∘</mo> <mi>G</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>G</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>α</mi> <mo class='MathClass-bin' stretchy='false'>+</mo> <mi>β</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
   and that <!-- l. 940 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>G</mi><mo class='MathClass-open' stretchy='false'>(</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>I</mi></mrow></math>.
   Note that this equation in particular implies that <!-- l. 941 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>G</mi><msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mo class='MathClass-bin' stretchy='false'>†</mo></mrow></msup> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>G</mi><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>.
   </p></dd><dt class='enumerate'>
b) </dt><dd class='enumerate'>
   <!-- l. 942 --><p class='noindent'>Using the ZX-calculus show that: </p><table class='equation'><tr><td>
   <!-- l. 943 --><p class='noindent'>
   </p><!-- l. 943 --><object id='x5-66010r79' data="svgs/phase-gadget-swap-inverse.svg" alt="diagram of phase-gadget-swap-inverse" class="svg-diagram"></object></td><td class='eq-no'>(3.79)</td></tr></table>
                                                                     

                                                                     
   </dd><dt class='enumerate'>
c) </dt><dd class='enumerate'>
   <!-- l. 946 --><p class='noindent'>This previous equation implies that: </p><table class='equation'><tr><td>
   <!-- l. 947 --><p class='noindent'>
   </p><!-- l. 947 --><object id='x5-66012r80' data="svgs/eq-phase-gadget-swap-id.svg" alt="diagram of eq:phase-gadget-swap-id" class="svg-diagram"></object></td><td class='eq-no'>(3.80)</td></tr></table>
   <!-- l. 950 --><p class='noindent'>Show that this indeed holds by calculating the matrix of both sides.
   </p></dd><dt class='enumerate'>
d) </dt><dd class='enumerate'>
   <!-- l. 951 --><p class='noindent'>Show that Eq. (<a href='#x5-66012r80'>3.80<!-- tex4ht:ref: eq:phase-gadget-swap-id  --></a>) holds by using the ZX-calculus to reduce the left-hand
   side to a diagram that is clearly symmetric under interchanging the two
   qubits. </p></dd></dl>
   </div>
<!-- l. 953 --><p class='indent'>
</p>
   <h4 class='subsectionHead' id='euler-decomposition'><span class='titlemark'>3.2.5   </span> <a id='x5-670003.2.5'></a>Euler decomposition</h4>
<!-- l. 955 --><p class='noindent'>The final rule of the ZX-calculus we need to introduce is a way to write the
Hadamard in terms of spiders. Recall that any single-qubit unitary gate is equal
(up to global phase) to a Z-rotation followed by an X-rotation, followed once
again by a Z-rotation:
</p>
<div class='center'>
<!-- l. 958 --><p class='noindent'>
</p><!-- l. 959 --><p class='noindent'><object data="svgs/euler-decomposition.svg" alt="diagram of euler-decomposition" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
<!-- l. 962 --><p class='indent'>   This is then of course also true for the Hadamard. In particular for
<!-- l. 962 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>β</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>γ</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>2</mn></mrow></mfrac> </mrow></math>:
</p><table class='equation'><tr><td>
<!-- l. 963 --><p class='indent'>
</p><!-- l. 963 --><object id='x5-67001r81' data="svgs/eq-had-euler1.svg" alt="diagram of eq:had-euler1" class="svg-diagram"></object></td><td class='eq-no'>(3.81)</td></tr></table>
<!-- l. 966 --><p class='indent'>   Here we have included the correct global phase for good measure. This Euler
decomposition is just one possible way to write the Hadamard in terms of
spiders. There is in fact an entire family of representations that will also be useful
to note: </p><table class='equation'><tr><td>
<!-- l. 968 --><p class='indent'>
</p><!-- l. 968 --><object id='x5-67002r82' data="svgs/eq-had-euler2.svg" alt="diagram of eq:had-euler2" class="svg-diagram"></object></td><td class='eq-no'>(3.82)</td></tr></table>
   <div class='newtheorem'>
<!-- l. 971 --><p class='noindent'><span class='head'>
<a id='x5-67003r12'></a>
<span class='cmbx-10x-x-109'>Exercise 3.12.</span>  </span>  Prove  that  all  the  equations  of (<a href='#x5-67002r82'>3.82<!-- tex4ht:ref: eq:had-euler2  --></a>)  hold  in  the
ZX-calculus,  by  using  Eq. (<a href='#x5-67001r81'>3.81<!-- tex4ht:ref: eq:had-euler1  --></a>)  and  the  other  rewrite  rules  of  the
ZX-calculus we have seen so far.
</p>
   </div>
                                                                     

                                                                     
<!-- l. 974 --><p class='indent'>    By including the rule (<a href='#x5-67001r81'>3.81<!-- tex4ht:ref: eq:had-euler1  --></a>) it looks like we are creating an asymmetry in
the phases in the rules of Figure <a href='#the-standard-rules-of-the-zxcalculus'>3.0<!-- tex4ht:ref: fig:zx-rules  --></a> with special significance being given to
<!-- l. 975 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> </mrow></math> over
<!-- l. 975 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo><mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>2</mn></mrow></mfrac> </mrow></math>.
However, (<a href='#x5-67002r82'>3.82<!-- tex4ht:ref: eq:had-euler2  --></a>) shows that the situation is still fully symmetric. In
particular, all the rules still hold when we flip the value of all phases
from <!-- l. 975 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>α</mi></math>
to <!-- l. 975 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo> <mi>α</mi></mrow></math>. In
particular we have the following ‘meta-rule’.
</p>
   <div class='newtheorem'>
<!-- l. 976 --><p class='noindent'><span class='head'>
<a id='x5-67004r4'></a>
<span class='cmbx-10x-x-109'>Proposition 3.2.4.</span>  </span>An equation in the ZX-calculus between diagrams <!-- l. 977 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub></math>
and <!-- l. 977 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></math>
can also be proven when we flip all the phases of spiders in the diagrams of
<!-- l. 977 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub></math>
and <!-- l. 977 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></math>.
</p>
   </div>
<!-- l. 978 --><p class='indent'>    Such ‘flipping of the phases’ corresponds to taking the complex conjugate of
the linear map the diagram represents.
</p>
   <div class='newtheorem'>
<!-- l. 980 --><p class='noindent'><span class='head'>
<a id='x5-67005r13'></a>
<span class='cmbx-10x-x-109'>Exercise 3.13.</span>  </span>The  rules  presented  in  Figure <a href='#the-standard-rules-of-the-zxcalculus'>3.0<!-- tex4ht:ref: fig:zx-rules  --></a>  are  actually  not  all
necessary.            Show            that            we            can            prove
<!-- l. 981 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>hh</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
using Eq. (<a href='#x5-67001r81'>3.81<!-- tex4ht:ref: eq:had-euler1  --></a>) and the other rewrite rules of Figure <a href='#the-standard-rules-of-the-zxcalculus'>3.0<!-- tex4ht:ref: fig:zx-rules  --></a>.
</p>
   </div>
<!-- l. 982 --><p class='indent'>
</p>
   <div class='newtheorem'>
<!-- l. 983 --><p class='noindent'><span class='head'>
<a id='x5-67006r14'></a>
                                                                     

                                                                     
<span class='cmbx-10x-x-109'>Exercise 3.14.</span>  </span>Prove using the ZX-calculus that we can get rid of Hadamard
self-loops at the cost of acquiring a phase: </p><table class='equation'><tr><td>
<!-- l. 985 --><p class='indent'>
</p><!-- l. 985 --><object id='x5-67007r83' data="svgs/eq-had-self-loop-removal.svg" alt="diagram of eq:had-self-loop-removal" class="svg-diagram"></object></td><td class='eq-no'>(3.83)</td></tr></table>
   </div>
<!-- l. 988 --><p class='indent'>
</p>
   <div class='newtheorem'>
<!-- l. 996 --><p class='noindent'><span class='head'>
<a id='x5-67008r15'></a>
<span class='cmbx-10x-x-109'>Exercise 3.15.</span>  </span> There are two ways in which we can write the eigenstate
<!-- l. 997 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-punc' stretchy='false'>:</mo><mo class='MathClass-rel' stretchy='false'>=</mo>  <mfrac><mrow><mn>1</mn></mrow> 
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mi>i</mi><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math> of the Pauli operator
<!-- l. 997 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Y</mi> </mrow></math> (up to global
phase). Namely, as <!-- l. 997 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>R</mi></mrow><mrow><mi>X</mi></mrow></msub><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> <mo class='MathClass-close' stretchy='false'>)</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
or as <!-- l. 997 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>R</mi></mrow><mrow><mi>Z</mi></mrow></msub><mo class='MathClass-open' stretchy='false'>(</mo><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> <mo class='MathClass-close' stretchy='false'>)</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>.
Prove this equivalence using the ZX-calculus: </p><table class='equation'><tr><td>
<!-- l. 999 --><p class='indent'>
</p><!-- l. 999 --><object id='x5-67009r84' data="svgs/eq-S-state-equality.svg" alt="diagram of eq:S-state-equality" class="svg-diagram"></object></td><td class='eq-no'>(3.84)</td></tr></table>
<!-- l. 1002 --><p class='indent'>   An analogous equation holds for <!-- l. 1002 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-punc' stretchy='false'>:</mo><mo class='MathClass-rel' stretchy='false'>=</mo>  <mfrac><mrow><mn>1</mn></mrow> 
<mrow><msqrt><mrow><mn>2</mn></mrow></msqrt></mrow></mfrac><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-bin' stretchy='false'>−</mo> <mi>i</mi><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
which boils down to flipping the signs of the phases in the spiders.
                                                                     

                                                                     
</p>
   </div>
<!-- l. 1003 --><p class='indent'>
</p>
   <h3 class='sectionHead' id='zx-in-action'><span class='titlemark'>3.3   </span> <a id='x5-680003.3'></a>ZX in action</h3>
<!-- l. 1012 --><p class='noindent'>Now that we have seen all the rules of the ZX-calculus, let’s see what we can do with
them! In the previous section we have already seen a couple of small use-cases:
simplifying a circuit to verify that it implements the correct state in Example <a href='#x5-59007r1'>3.2.1<!-- tex4ht:ref: ex:ghz-circuit  --></a>, or
pushing <!-- l. 1013 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>
phases through a circuit to see where it maps Pauli gates in Example <a href='#x5-60010r2'>3.2.2<!-- tex4ht:ref: ex:Pauli-pushing  --></a>. Here
we will give several more small examples that demonstrate the use of
the ZX-calculus in reasoning about quantum computing. This will also
demonstrate several best practices when trying to simplify a diagram using the
ZX-calculus.
</p>
   <h4 class='subsectionHead' id='magic-state-injection'><span class='titlemark'>3.3.1   </span> <a id='x5-690003.3.1'></a>Magic state injection</h4>
<!-- l. 1016 --><p class='noindent'>The following circuit implements the well-known <span class='cmti-10x-x-109'>magic state injection </span>protocol,
where a <!-- l. 1016 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi>T</mi><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-punc' stretchy='false'>:</mo><mo class='MathClass-rel' stretchy='false'>=</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iπ</mi><mo class='MathClass-bin' stretchy='false'>∕</mo><mn>4</mn></mrow></msup><mo class='MathClass-rel' stretchy='false'>|</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
magic state is pushed onto a qubit using a measurement and potential correction:
</p><table class='equation'><tr><td>
<!-- l. 1017 --><p class='indent'>
</p><!-- l. 1017 --><object id='x5-69001r85' data="svgs/eq-magic-state-injection.svg" alt="diagram of eq:magic-state-injection" class="svg-diagram"></object></td><td class='eq-no'>(3.85)</td></tr></table>
<!-- l. 1020 --><p class='indent'>   Here the double wire represents a classical measurement outcome being fed forward
into the <!-- l. 1020 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>S</mi></math> gate,
so that the <!-- l. 1020 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>S</mi></math>
gate is only applied if the measurement outcome corresponded to
<!-- l. 1020 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>1</mn><mo class='MathClass-rel' stretchy='false'>|</mo></mrow></math>. We
can represent this in the ZX-calculus by introducing a Boolean variable
<!-- l. 1021 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>a</mi></math> to
                                                                     

                                                                     
represent the measurement outcome. We can then easily prove its correctness:
</p><table class='equation'><tr><td>
<!-- l. 1022 --><p class='indent'>
</p><!-- l. 1022 --><object id='x5-69002r86' data="svgs/magic-state-injection-zx.svg" alt="diagram of magic-state-injection-zx" class="svg-diagram"></object></td><td class='eq-no'>(3.86)</td></tr></table>
<!-- l. 1025 --><p class='indent'>   Most of this proof is spider (un)fusion, but there are a couple of interesting bits. The
step labelled <!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>π</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
actually consists of two branches, because if
<!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>, then the X-spider
can be removed using <!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
so that the phase on the Z-spider remains
<!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>4</mn></mrow></mfrac> </mrow></math>, while
if <!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>,
then <!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>π</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math> is indeed applied,
and the phase flips to <!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>−</mo><mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>4</mn></mrow></mfrac> </mrow></math>.
Combining these two branches we see that the phase becomes
<!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mi>a</mi></mrow></msup><mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>4</mn></mrow></mfrac> </mrow></math>.
In the step after that we make the observation that
<!-- l. 1025 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-bin' stretchy='false'>−</mo><mn>1</mn><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mi>a</mi></mrow></msup><mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>4</mn></mrow></mfrac>  <mo class='MathClass-rel' stretchy='false'>=</mo> <mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>4</mn></mrow></mfrac> <mo class='MathClass-bin' stretchy='false'>−</mo> <mi>a</mi><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> </mrow></math>. The
usage of a variable to denote a measurement outcome is an easy way to
deal with circuits that contain measurements and classically-controlled
gates. While it is easy to use, it does have the drawback that it
is less clear in which direction the information is ‘flowing’. Here
<!-- l. 1026 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi mathvariant='italic'>aπ</mi></mrow></math> is the
result of a measurement outcome that we don’t have control over, while
<!-- l. 1026 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> </mrow></math> denotes
a <!-- l. 1026 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> </mrow></math>
phase gate that we only apply when we saw the measurement outcome
<!-- l. 1026 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>a</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>. For
more complicated scenario’s where we <span class='cmti-10x-x-109'>do </span>care about showing this causality more
clearly we could adopt a variant of the ZX-calculus where we allow both classical
and quantum wires to exist. We will however not need this additional machinery
in this book.
                                                                     

                                                                     
</p>
   <h4 class='subsectionHead' id='teleportation'><span class='titlemark'>3.3.2   </span> <a id='x5-700003.3.2'></a>Teleportation</h4>
<!-- l. 1029 --><p class='noindent'>The standard state-teleportation protocol consists of two
parties, Alice and Bob, that share a maximally entangled state
<!-- l. 1029 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>00</mn><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-bin' stretchy='false'>+</mo> <mo class='MathClass-rel' stretchy='false'>|</mo><mn>11</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>.
Alice does some quantum operations, measures her states, sends the
classical measurement outcomes to Bob, and Bob does some quantum
corrections based on those outcomes. At the end Bob has the state that
Alice started out with. We can represent this as a quantum circuit as
follows:
</p>
<div class='center'>
<!-- l. 1031 --><p class='noindent'>
</p><!-- l. 1032 --><p class='noindent'><object data="svgs/teleport-state.svg" alt="diagram of teleport-state" class="svg-diagram"></object> </p></div>
<!-- l. 1035 --><p class='indent'>   Here the <!-- l. 1035 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mi mathvariant='normal'>Ψ</mi><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math>
label is to denote that the bottom two qubits start in the maximally entangled
Bell state. By representing the measurement outcomes by Boolean variables
<!-- l. 1035 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>a</mi></math> and
<!-- l. 1035 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>b</mi></math> we
can again represent this in the ZX-calculus and prove the correctness of the
protocol: </p><table class='equation-star'><tr><td>
<!-- l. 1036 --><object data="svgs/teleport-state-zx.svg" alt="diagram of teleport-state-zx" class="svg-diagram"></object></td></tr></table>
<!-- l. 1039 --><p class='indent'>   Here we used the fact that <!-- l. 1039 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>2</mn><mi mathvariant='italic'>bπ</mi></mrow></math>
is either <!-- l. 1039 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>2</mn><mi>π</mi></mrow></math> or
<!-- l. 1039 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math> which are
both <!-- l. 1039 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>0</mn></math> modulo
<!-- l. 1039 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>2</mn><mi>π</mi></mrow></math>, and hence the spider
can be removed using <!-- l. 1039 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>.
We see that we end up with a wire going directly from Alice and Bob. Hence,
                                                                     

                                                                     
whatever state Alice puts in her qubit wire will end up at Bob.
</p>
   <h4 class='subsectionHead' id='detecting-entanglement'><span class='titlemark'>3.3.3   </span> <a id='x5-710003.3.3'></a>Detecting entanglement</h4>
<!-- l. 1042 --><p class='noindent'>Let us now do a more involved calculation with the ZX-calculus, demonstrating
how one goes about systematically simplifying a diagram. Suppose you
are given the following (somewhat randomly chosen) quantum circuit:
</p><table class='equation'><tr><td>
<!-- l. 1044 --><p class='indent'>
</p><!-- l. 1044 --><object id='x5-71001r87' data="svgs/eq-circuit-entanglement.svg" alt="diagram of eq:circuit-entanglement" class="svg-diagram"></object></td><td class='eq-no'>(3.87)</td></tr></table>
<!-- l. 1047 --><p class='indent'>   Suppose further that you wish to know which qubits are entangled after
applying this circuit. Calculating the state directly gives
<!-- tex4ht:inline --></p><!-- l. 1049 --><math display='block' xmlns='http://www.w3.org/1998/Math/MathML'><mrow>
                 <mfrac><mrow><mn>1</mn></mrow>
<mrow><mn>2</mn></mrow></mfrac><msup><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mn>1</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mi>i</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>1</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mn>0</mn><mo class='MathClass-punc' stretchy='false'>,</mo><mi>i</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow><mrow><mi>T</mi> </mrow></msup><mo class='MathClass-punc' stretchy='false'>.</mo>
</mrow></math>
<!-- l. 1049 --><p class='nopar'> While a trained eye might be able to spot that the 2nd qubit is unentangled,
and that the remainder form a GHZ-state, at first glance this is altogether not
obvious. Instead, let’s simplify this same circuit in the ZX-calculus and see where
this gets us. In this simplification we have a step marked (*) which will be
explained after. </p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 1053 --><object data="svgs/circuit-entanglement-zx.svg" alt="diagram of circuit-entanglement-zx" class="svg-diagram"></object></td></tr></table>
<!-- l. 1056 --><p class='indent'>   If you don’t stare at diagrams for a living like we do, it might
not necessarily be clear what is happening here, but we are in fact
following a simple algorithm. Most of the steps follow the general
pattern that we always try to fuse spiders of the same colours with
<!-- l. 1057 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sp</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
(though we don’t do that here for all spiders at the same
time to prevent cluttering), always remove identities with
<!-- l. 1057 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>, always copy states
through spiders with <!-- l. 1057 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
and always remove parallel wires between spiders of opposite colours
using the Hopf rule (<a href='#x5-64005r64'>3.64<!-- tex4ht:ref: eq:hopf-rule  --></a>). Hadamards are moved out of the way with
<!-- l. 1057 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>cc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math> when
no other obvious move is available. Additionally we have used the rewrites of
Eq. (<a href='#x5-67007r83'>3.83<!-- tex4ht:ref: eq:had-self-loop-removal  --></a>) and (<a href='#x5-67009r84'>3.84<!-- tex4ht:ref: eq:S-state-equality  --></a>). We have marked one rewrite by (*), this is just an
application of the Euler decomposition rule: </p><table class='equation-star'><tr><td>
<!-- l. 1059 --><object data="svgs/had-absorb-angles.svg" alt="diagram of had-absorb-angles" class="svg-diagram"></object></td></tr></table>
<!-- l. 1062 --><p class='indent'>   This equation is an example of how a series of <span class='cmti-10x-x-109'>Clifford </span>phase gates can often
be combined together into a simpler series of phase gates. We will have a lot
more to say about Clifford gates in Chapter <a href='main_htmlch5.html#clifford-circuits-and-diagrams'>5<!-- tex4ht:ref: ch:clifford  --></a>. The size of the circuit (<a href='#x5-71001r87'>3.87<!-- tex4ht:ref: eq:circuit-entanglement  --></a>) is
nearing the limit of what is still comfortable to rewrite manually. In fact, we used
some software to verify and help with the rewriting here: the algorithm we
just described is easily implemented, so that the entire simplification
can be automated. We presented the derivation here in detail to show
                                                                     

                                                                     
how one would go about systematically simplifying a ZX-diagram. We
will look at more detailed approaches to simplifying diagrams in other
chapters.
</p>
   <div class='newtheorem'>
<!-- l. 1065 --><p class='noindent'><span class='head'>
<a id='x5-71002r16'></a>
<span class='cmbx-10x-x-109'>Exercise 3.16.</span>  </span>Write   the   following   circuit   with   input   state   as   a
ZX-diagram and simplify it to figure out which qubits are entangled to each
other.
</p>
<div class='center'>
<!-- l. 1068 --><p class='noindent'>
</p><!-- l. 1069 --><p class='noindent'><object data="svgs/circuit-entanglement-exer.svg" alt="diagram of circuit-entanglement-exer" class="svg-diagram"></object> </p></div>
   </div>
<!-- l. 1072 --><p class='indent'>
</p>
   <h4 class='subsectionHead' id='the-bernsteinvazirani-algorithm'><span class='titlemark'>3.3.4   </span> <a id='x5-720003.3.4'></a>The Bernstein-Vazirani algorithm</h4>
<!-- l. 1082 --><p class='noindent'>Back in Section <a href='main_htmlch2.html#a-dash-of-quantum-algorithms'>2.4<!-- tex4ht:ref: sec:algo  --></a>, we introduced the <span class='cmbx-10x-x-109'>Bernstein-Vazirani algorithm</span>, as a
simple example where a quantum computer gets a modest advantage over a classical
computer. Namely, one can extract a secret piece of information from an unknown
function <!-- l. 1082 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>f</mi></math>
on <!-- l. 1082 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> bits
using just a single quantum query to the function (i.e. one use of the unitary oracle
<!-- l. 1082 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>U</mi></mrow><mrow><mi>f</mi></mrow></msub></math>), rather
than <!-- l. 1082 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>
classical queries. Here is the problem, stated formally: <span class='cmbx-10x-x-109'>Given: </span>a function
<!-- l. 1084 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>f</mi> <mo class='MathClass-punc' stretchy='false'>:</mo> <msubsup><mrow><mi>𝔽</mi></mrow><mrow><mn>2</mn></mrow><mrow><mi>n</mi></mrow></msubsup> <mo class='MathClass-rel' stretchy='false'>→</mo> <msub><mrow><mi>𝔽</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math> such that there exists
a fixed bitstring <!-- l. 1084 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mover accent='true'><mrow><mi>s</mi></mrow><mo accent='true'>→</mo></mover></math>
such that <!-- l. 1084 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>f</mi><mo class='MathClass-open' stretchy='false'>(</mo><mover accent='true'><mrow><mi>x</mi></mrow><mo accent='true'>→</mo></mover><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mover accent='true'><mrow><mi>s</mi></mrow><mo accent='true'>→</mo></mover> <mo class='MathClass-bin' stretchy='false'>⋅</mo><mover accent='true'><mrow><mi>x</mi></mrow><mo accent='true'>→</mo></mover></mrow></math>.
<span class='cmbx-10x-x-109'>Find: </span><!-- l. 1085 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mover accent='true'><mrow><mi>s</mi></mrow><mo accent='true'>→</mo></mover> <mo class='MathClass-rel' stretchy='false'>∈</mo> <msubsup><mrow><mi>𝔽</mi></mrow><mrow><mn>2</mn></mrow><mrow><mi>n</mi></mrow></msubsup></mrow></math>.
We saw that the quantum algorithm for solving this problem is very simple. If we
simply perform the following circuit:
</p>
                                                                     

                                                                     
<div class='center'>
<!-- l. 1088 --><p class='noindent'>
</p><!-- l. 1089 --><p class='noindent'><object data="svgs/bernstein-vaz-circuit.svg" alt="diagram of bernstein-vaz-circuit" class="svg-diagram"></object> </p></div>
<!-- l. 1092 --><p class='indent'>   we obtain the bitstring <!-- l. 1092 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mover accent='true'><mrow><mi>s</mi></mrow><mo accent='true'>→</mo></mover></math>
as the measurement outcomes. We gave a proof using bra-ket calculations in
Section <a href='main_htmlch2.html#a-dash-of-quantum-algorithms'>2.4<!-- tex4ht:ref: sec:algo  --></a>. We’ll now give a different proof using the ZX calculus. This follows
almost immediately from finding a nice diagram to capture the oracle
<!-- l. 1093 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>U</mi></mrow><mrow><mi>f</mi></mrow></msub></math>. We claim
that <!-- l. 1093 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>U</mi></mrow><mrow><mi>f</mi></mrow></msub></math>
can be written as follows: </p><table class='equation'><tr><td>
<!-- l. 1094 --><p class='indent'>
</p><!-- l. 1094 --><object id='x5-72001r88' data="svgs/eq-berstein-vaz-zx.svg" alt="diagram of eq:berstein-vaz-zx" class="svg-diagram"></object></td><td class='eq-no'>(3.88)</td></tr></table>
<!-- l. 1097 --><p class='indent'>   where the labels on the wires mean there is an edge connecting the Z spider on the
<!-- l. 1097 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>i</mi></math>-th qubit to the one X
spider if and only if <!-- l. 1097 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>s</mi></mrow><mrow><mi>i</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>.
This works because, as we saw in Section <a href='#spiders'>3.1.1<!-- tex4ht:ref: sec:spiders  --></a>, the X dot acts like an XOR
on the computational basis. Hence, if we take the XOR of all the bits
<!-- l. 1097 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>x</mi></mrow><mrow><mi>i</mi></mrow></msub></math> where
<!-- l. 1097 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>s</mi></mrow><mrow><mi>i</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>, we get the dot product
<!-- l. 1097 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mover accent='true'><mrow><mi>s</mi></mrow><mo accent='true'>→</mo></mover> <mo class='MathClass-bin' stretchy='false'>⋅</mo><mover accent='true'><mrow><mi>x</mi></mrow><mo accent='true'>→</mo></mover></mrow></math>. If we additionally
XOR in some other bit <!-- l. 1097 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>y</mi></math>,
we get <!-- l. 1097 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mover accent='true'><mrow><mi>s</mi></mrow><mo accent='true'>→</mo></mover> <mo class='MathClass-bin' stretchy='false'>⋅</mo><mover accent='true'><mrow><mi>x</mi></mrow><mo accent='true'>→</mo></mover><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mi>y</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>f</mi><mo class='MathClass-open' stretchy='false'>(</mo><mover accent='true'><mrow><mi>x</mi></mrow><mo accent='true'>→</mo></mover><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-bin' stretchy='false'>⊕</mo> <mi>y</mi></mrow></math>.
Since the Z dot copies computational basis elements, (<a href='#x5-72001r88'>3.88<!-- tex4ht:ref: eq:berstein-vaz-zx  --></a>) does exactly what the
Bernstein-Vazirani oracle should do:
</p>
<div class='center'>
<!-- l. 1100 --><p class='noindent'>
</p><!-- l. 1101 --><p class='noindent'><object data="svgs/bernstein-vaz-basis.svg" alt="diagram of bernstein-vaz-basis" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
<!-- l. 1104 --><p class='indent'>   Now, let’s see what happens if we plug
<!-- l. 1104 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mo class='MathClass-bin' stretchy='false'>+</mo><mo class='MathClass-close' stretchy='false'>⟩</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>H</mi><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> into the
first <!-- l. 1104 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> qubits
and <!-- l. 1104 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|−⟩</mtext></mrow></math>
into the last qubit. In Section <a href='#spiders'>3.1.1<!-- tex4ht:ref: sec:spiders  --></a>, we saw that: </p><table class='equation-star'><tr><td>
<!-- l. 1105 --><object data="svgs/ketplus.svg" alt="diagram of ketplus" class="svg-diagram"></object></td></tr></table>
<!-- l. 1108 --><p class='indent'>   Plugging in, we get: </p><table class='equation-star'><tr><td>
<!-- l. 1109 --><object data="svgs/bernstein-vaz-zx-pf.svg" alt="diagram of bernstein-vaz-zx-pf" class="svg-diagram"></object></td></tr></table>
<!-- l. 1112 --><p class='indent'>   In the first step, the <!-- l. 1112 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>-labelled
Z spider is copied through the X spider. This will give a
<!-- l. 1112 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>-labelled Z spider
on the last output and anywhere there is a wire to one of the other Z spiders, i.e. whereever
<!-- l. 1112 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>s</mi></mrow><mrow><mi>i</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>. If we fuse these in,
we see that we get a <!-- l. 1112 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>Z</mi></math>
gate where <!-- l. 1112 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>s</mi></mrow><mrow><mi>i</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math> and
identity where <!-- l. 1112 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>s</mi></mrow><mrow><mi>i</mi></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>.
We can capture this succintly in the middle picture above by writing this as the Z-phase
gate <!-- l. 1112 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Z</mi><mo class='MathClass-open' stretchy='false'>[</mo><msub><mrow><mi>s</mi></mrow><mrow><mi>i</mi></mrow></msub><mi>π</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow></math>.
After the final spider fusion, we can see the state on the first
<!-- l. 1113 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-qubits is
an element of the X basis. Hence, if we measure in the X basis (i.e. perform
Hadamards then measure in the Z basis), we will obtain the outcome
                                                                     

                                                                     
<!-- l. 1113 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><msub><mrow><mi>s</mi></mrow><mrow><mn>1</mn></mrow></msub><mo class='MathClass-punc' stretchy='false'>,</mo><mo>…</mo><mo class='MathClass-punc' stretchy='false'>,</mo><msub><mrow><mi>s</mi></mrow><mrow><mi>n</mi></mrow></msub><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math> with
certainty. This completes the correctness proof for the Bernstein-Vazirani
algorithm.
</p>
   <h3 class='sectionHead' id='extracting-circuits-from-zxdiagrams'><span class='titlemark'>3.4   </span> <a id='x5-730003.4'></a>Extracting circuits from ZX-diagrams</h3>
<!-- l. 1115 --><p class='noindent'>We have already seen that ZX-diagrams are a strict superset of circuit
notation. That is, if we have a quantum circuit, it is straightforward to
translate it into a ZX-diagram. But what about the converse? How do we
translate a ZX-diagram back into a circuit? The first thing to note is that
ZX-diagrams can represent more types of maps, that aren’t necessarily
unitaries or isometries, and hence in general there is no way to turn an
<span class='cmti-10x-x-109'>arbitrary </span>diagram back into a circuit. But what if you know somehow
that the diagram implements a unitary, how do we get a circuit back
out? It turns out this is hard enough that we should state it is a proper
<span class='cmbx-10x-x-109'>Problem</span>:
</p>
   <div class='newtheorem'>
<!-- l. 1120 --><p class='noindent'><span class='head'>
<a id='x5-73001r1'></a>
<span class='cmbx-10x-x-109'>Problem 3.4.1 </span>(Circuit Extraction)<span class='cmbx-10x-x-109'>.</span>  </span>Given a ZX-diagram <!-- l. 1121 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>D</mi></math>
with designated inputs and outputs, which describes a unitary map. Produce
a circuit whose gate-count is polynomial in the number of spiders in <!-- l. 1121 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>D</mi></math>.
</p>
   </div>
<!-- l. 1122 --><p class='indent'>    It turns out that Circuit Extraction is a “Hard with a capital H” problem in
the complexity-theory sense, which you will be asked to prove in Exercise* <a href='main_htmlch7.html#x9-175001r8'>7.8<!-- tex4ht:ref: exer:extraction-hardness  --></a>.
Nevertheless, if we impose some restrictions on a ZX diagram, the problem
becomes much easier. In this section we will show how diagrams we call
<span class='cmti-10x-x-109'>circuit-like </span>can be made back into circuits.
</p>
   <h4 class='subsectionHead' id='zxdiagrams-to-circuits-with-postselection'><span class='titlemark'>3.4.1   </span> <a id='x5-740003.4.1'></a>ZX-diagrams to circuits with post-selection</h4>
<!-- l. 1125 --><p class='noindent'>First, it’s worth noting that obtaining a circuit with post-selection is relatively
straightforward. A generic ZX-diagram can be constructed using the following 5
things: </p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 1126 --><object data="svgs/z-spider-1-2-1.svg" alt="diagram of z-spider-1-2-1" class="svg-diagram"></object></td></tr></table>
<!-- l. 1129 --><p class='indent'>   We can see this by transforming each X-spider into a Z-spider using
<!-- l. 1129 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>cc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>, and
then unfusing spiders until they all have at most 3 legs. We can interpret each of
these generators as circuit fragments: </p><table class='equation-star'><tr><td>
<!-- l. 1131 --><object data="svgs/z-spider-1-2-2.svg" alt="diagram of z-spider-1-2-2" class="svg-diagram"></object></td></tr></table>
<!-- l. 1134 --><p class='indent'>   where the first two require ancilla qubits in the states
<!-- l. 1134 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-rel' stretchy='false'>|</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>⟩</mo></mrow></math> and
<!-- l. 1134 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-rel' stretchy='false'>|+⟩</mtext></mrow></math>
and the second two require post-selection onto
<!-- l. 1134 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>⟨</mo><mn>0</mn><mo class='MathClass-rel' stretchy='false'>|</mo></mrow></math> or
<!-- l. 1134 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mtext class='MathClass-open' stretchy='false'>⟨+|</mtext></mrow></math>.
With this interpretation, there is an evident translation of any ZX-diagram into a
post-selected circuit. First ‘unfuse’ the spiders into generators, then interpret
them as post-selected circuits, e.g.
</p>
<div class='center'>
<!-- l. 1136 --><p class='noindent'>
</p><!-- l. 1137 --><p class='noindent'><object data="svgs/zx-postselection-ex.svg" alt="diagram of zx-postselection-ex" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
<!-- l. 1140 --><p class='indent'>   It could be that we are happy with this. Indeed any post-selected circuit
corresponds to a particular sequence of measurement outcomes. And, if
we start with a ZX-diagram that is not equal to zero, the post-selected
circuit will also be non-zero, so it corresponds to a computation that is
realisable with non-zero probability. However! The probability of getting
the diagram we wanted will, in general, becomes exponentially small
with the number of post-selections. So that kindof sucks. What would be
much better is to turn a ZX-diagram into a computation that can be
run <span class='cmti-10x-x-109'>deterministically </span>(or at least with high probability) on a quantum
computer.
</p>
   <h4 class='subsectionHead' id='circuitlike-diagrams-and-optimisation'><span class='titlemark'>3.4.2   </span> <a id='x5-750003.4.2'></a>Circuit-like diagrams and optimisation</h4>
<!-- l. 1143 --><p class='noindent'>One of the simplest kinds of ZX diagrams that are easy to extract are the
<span class='cmbx-10x-x-109'>circuit-like </span>diagrams.
</p>
   <div class='newtheorem'>
<!-- l. 1144 --><p class='noindent'><span class='head'>
<a id='x5-75001r2'></a>
<span class='cmbx-10x-x-109'>Definition 3.4.2.</span>  </span>A ZX diagram is called <span class='cmbx-10x-x-109'>circuit-like </span>if it can be decomposed
into a circuit consisting only of CZ, <!-- l. 1145 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>H</mi></math>,
and <!-- l. 1145 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>R</mi></mrow><mrow><mi>Z</mi></mrow></msub><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow></math>
gates just by applying the colour change rule <!-- l. 1145 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>cc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
and unfusing spiders, i.e. applying the rule <!-- l. 1145 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sp</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
from right-to-left.
</p>
   </div>
<!-- l. 1146 --><p class='indent'>    While this seems to be pretty much building the property we want directly
into the definition, there is (essentially) an equivalent formulation for circuit-like
diagrams which is called <span class='cmbx-10x-x-109'>ZX diagrams with causal flow</span>. We will meet these
in Chapter <a href='main_htmlch8.html#measurementbased-quantum-computation'>8<!-- tex4ht:ref: ch:mbqc  --></a> (specifically Section <a href='main_htmlch8.html#from-circuits-to-measurement-patterns'>8.2.4<!-- tex4ht:ref: sec:circ-to-meas-pattern  --></a>), along with several generalisations that
are relevant to circuit optimisation and measurement-based quantum
computing. Even though the circuit-like ZX diagrams are a very limited
class of diagrams, we can already define a (pretty effective!) quantum
circuit optimisation algorithm that never leaves the realm of circuit-like
diagrams.
</p>
   <div class='newtheorem'>
<!-- l. 1149 --><p class='noindent'><span class='head'>
<a id='x5-75002r3'></a>
                                                                     

                                                                     
<span class='cmbx-10x-x-109'>Algorithm 3.4.3.</span>  </span> Circuit optimisation using circuit-like ZX diagrams
</p>
     <ul class='itemize1'>
     <li class='itemize'><span class='cmbx-10x-x-109'>Given: </span>A circuit consisting of CNOT, CZ, <!-- l. 1152 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>H</mi></math>,
     <!-- l. 1152 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Z</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
     and <!-- l. 1152 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>X</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
     gates.
     </li>
     <li class='itemize'><span class='cmbx-10x-x-109'>Output: </span>An optimised circuit. </li></ul>
<!-- l. 1156 --><p class='noindent'>
     </p><dl class='enumerate'><dt class='enumerate'>
  1.. </dt><dd class='enumerate'>
     <!-- l. 1156 --><p class='noindent'>Replace every CNOT and <!-- l. 1156 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>X</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
     gate by its decomposition into CZ, <!-- l. 1156 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>H</mi></math>
     and <!-- l. 1156 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Z</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
     or equivalently use <!-- l. 1156 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>cc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
     to turn all X spiders into Z spiders.
     </p></dd><dt class='enumerate'>
  2.. </dt><dd class='enumerate'>
     <!-- l. 1157 --><p class='noindent'>Apply the rules <!-- l. 1157 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sp</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
     <!-- l. 1157 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
     <!-- l. 1157 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>hh</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
     and the following derived rule: </p><table class='equation'><tr><td>
     <!-- l. 1158 --><p class='noindent'>
     </p><!-- l. 1158 --><object id='x5-75005r89' data="svgs/eq-parallel-h.svg" alt="diagram of eq:parallel-h" class="svg-diagram"></object></td><td class='eq-no'>(3.89)</td></tr></table>
     <!-- l. 1161 --><p class='noindent'>from left-to-right as much as possible.
                                                                     

                                                                     
     </p></dd><dt class='enumerate'>
  3.. </dt><dd class='enumerate'>
     <!-- l. 1162 --><p class='noindent'>Extract the circuit from the resulting circuit-like ZX diagram by unfusing
     spiders. </p></dd></dl>
   </div>
<!-- l. 1164 --><p class='indent'>    There are a few things that we should show before we are happy with
Algorithm <a href='#x5-75002r3'>3.4.3<!-- tex4ht:ref: alg:circuit-like-opt  --></a>. First, we can see that (<a href='#x5-75005r89'>3.89<!-- tex4ht:ref: eq:parallel-h  --></a>) is indeed a derived rule. Since this
is essentially just an “all-Z” variation on the complementarity rule we met
in Section <a href='#strong-complementarity'>3.2.4<!-- tex4ht:ref: sec:bialgebra-hopf  --></a>, this is straightforward enough to be an exercise for
now.
</p>
   <div class='newtheorem'>
<!-- l. 1166 --><p class='noindent'><span class='head'>
<a id='x5-75007r17'></a>
<span class='cmbx-10x-x-109'>Exercise 3.17.</span>  </span>Show that (<a href='#x5-75005r89'>3.89<!-- tex4ht:ref: eq:parallel-h  --></a>) follows from the rules of the ZX calculus.
</p>
   </div>
<!-- l. 1168 --><p class='indent'>    The second thing we would like to know is that we indeed have a circuit-like
ZX diagram by the time we get to step 3. The final thing we need to know is
<span class='cmti-10x-x-109'>which </span>spiders to unfuse to turn the circuit-like diagram into a circuit. Let’s look
at these properties in turn.
</p>
   <div class='newtheorem'>
<!-- l. 1170 --><p class='noindent'><span class='head'>
<a id='x5-75008r4'></a>
<span class='cmbx-10x-x-109'>Proposition 3.4.4.</span>  </span>Left-to-right applications of <!-- l. 1171 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sp</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
<!-- l. 1171 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
<!-- l. 1171 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>hh</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
and (<a href='#x5-75005r89'>3.89<!-- tex4ht:ref: eq:parallel-h  --></a>) preserve the property of being circuit-like.
</p>
   </div>
<!-- l. 1172 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1174 --><p class='indent'>   <span class='head'>
                                                                     

                                                                     
<span class='cmti-10x-x-109'>Proof.</span>
</span><!-- l. 1174 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sp</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
preserves circuit-like diagrams by definition. Suppose we can apply the rule
<!-- l. 1174 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
to                a                circuit-like                ZX                diagram.
That means that there must be a 2-legged Z spider with phase 0. The only
way this can arise from spider fusions of a circuit is if the circuit contains a
<!-- l. 1174 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Z</mi><mo class='MathClass-open' stretchy='false'>(</mo><mn>0</mn><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>I</mi></mrow></math>
gate.  Deleting  this  trivial  gate  from  the  circuit  results  in  a  new
circuit,  which  can  be  obtained  by  unfusing  spiders  after  applying  the
<!-- l. 1174 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>id</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
rule.       We       can       reason       similarly       about       the       rules
<!-- l. 1175 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>hh</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
and (<a href='#x5-75005r89'>3.89<!-- tex4ht:ref: eq:parallel-h  --></a>). The only way the left-hand sides of these rules can arise from
spider  fusions  of  a  circuit  is  if  the  circuit  contains  a  pair  of  cancelling
<!-- l. 1175 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>H</mi></math>
gates or cancelling CZ gates, respectively:
</p>
<div class='center'>
<!-- l. 1177 --><p class='noindent'>
</p><!-- l. 1178 --><p class='noindent'><object data="svgs/cancelling-gates.svg" alt="diagram of cancelling-gates" class="svg-diagram"></object> </p></div>
<!-- l. 1181 --><p class='indent'>   Again, deleting these gates from the circuit will result in a new
circuit, which we can obtain by unfusing spiders after applying the
<!-- l. 1181 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>hh</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math> and
(<a href='#x5-75005r89'>3.89<!-- tex4ht:ref: eq:parallel-h  --></a>) rules, respectively.                                                                □
</p>
   </div>
<!-- l. 1183 --><p class='indent'>   Now, let’s see how to actually perform the spider-unfusions
necessary to extract a circuit from a circuit-like diagram. It turns
out we can actually just do this greedily. Imagine a <span class='cmti-10x-x-109'>frontier </span>between
the part of the diagram that has been decomposed into CZ, H, and
<!-- l. 1183 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>Z</mi><mo class='MathClass-open' stretchy='false'>(</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math> gates.
We initially start with the frontier on the outputs, and move the frontier toward
the inputs, performing spider-unfusions as necessary.  For this, we consider three
cases:
     </p><dl class='enumerate'><dt class='enumerate'>
  1.. </dt><dd class='enumerate'>
     <!-- l. 1187 --><p class='noindent'>If an <!-- l. 1187 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>H</mi></math>
     gate is on the frontier, move it to the circuit part of the diagram.
                                                                     

                                                                     
     </p></dd><dt class='enumerate'>
  2.. </dt><dd class='enumerate'>
     <!-- l. 1188 --><p class='noindent'>If a 2-legged Z spider is to the left of the frontier, it can only be an
     <!-- l. 1188 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>R</mi></mrow><mrow><mi>Z</mi></mrow></msub><mo class='MathClass-open' stretchy='false'>[</mo><mi>α</mi><mo class='MathClass-close' stretchy='false'>]</mo></mrow></math>
     gate, so move it to the circuit part.
     </p></dd><dt class='enumerate'>
  3.. </dt><dd class='enumerate'>
     <!-- l. 1189 --><p class='noindent'>If two spiders on the frontier are connected via a Hadamard gate,
     perform spider-unfusion as necessary to produce a CZ gate, and move
     it to the circuit part. </p></dd></dl>
<!-- l. 1191 --><p class='noindent'>For circuit-like diagrams, this will never get stuck, and terminates when there are no
spiders or Hadamards to the left of the frontier. Proving this is much easier when
we have some extra tools in our tool belt (namely the aforemented notion of
<span class='cmbx-10x-x-109'>causal flow</span>, which we introduce in Chapter <a href='main_htmlch8.html#measurementbased-quantum-computation'>8<!-- tex4ht:ref: ch:mbqc  --></a>), so we will postpone this proof
until then. However, you should know enough at this point to code up a
full-fledged circuit optimisation algorithm using the ZX calculus. You can see for
yourself how well it works!
</p>
   <h3 class='sectionHead' id='summary-what-to-remember1'><span class='titlemark'>3.5   </span> <a id='x5-760003.5'></a>Summary: What to remember</h3>
<!-- l. 1194 --><p class='noindent'>
     </p><dl class='enumerate'><dt class='enumerate'>
  1.. </dt><dd class='enumerate'>
     <!-- l. 1194 --><p class='noindent'>Spiders are a class of linear maps that can have any number of inputs
     and outputs. They come in two flavours: Z-spiders and X-spiders.
     </p></dd><dt class='enumerate'>
  2.. </dt><dd class='enumerate'>
     <!-- l. 1195 --><p class='noindent'>Spiders  can  be  connected  together  to  form  ZX-diagrams.  Stacking
     ZX-diagrams correspond to the tensor product of linear maps, and
     connecting ZX-diagrams corresponds to composition.
     </p></dd><dt class='enumerate'>
  3.. </dt><dd class='enumerate'>
     <!-- l. 1196 --><p class='noindent'>ZX-diagrams can be arbitrarily deformed as long as the order of inputs
     and outputs is preserved.
     </p></dd><dt class='enumerate'>
  4.. </dt><dd class='enumerate'>
     <!-- l. 1197 --><p class='noindent'>ZX-diagrams are universal, meaning that they can represent any linear
     map between any number of qubits.
                                                                     

                                                                     
     </p></dd><dt class='enumerate'>
  5.. </dt><dd class='enumerate'>
     <!-- l. 1198 --><p class='noindent'>In particular, any quantum circuit consisting of Z- and X-phase gates
     and CNOTs can be easily written as a ZX-diagram. Conversely, any
     ZX-diagram can be written as a post-selected quantum circuit.
     </p></dd><dt class='enumerate'>
  6.. </dt><dd class='enumerate'>
     <!-- l. 1199 --><p class='noindent'>The ZX-calculus is a set of graphical rewrite rules for transforming
     ZX-diagrams while preserving the linear map they represent.
     </p></dd><dt class='enumerate'>
  7.. </dt><dd class='enumerate'>
     <!-- l. 1200 --><p class='noindent'>There are 7 rules of the ZX-calculus (see Figure <a href='#the-standard-rules-of-the-zxcalculus'>3.0<!-- tex4ht:ref: fig:zx-rules  --></a>): spider fusion,
     colour change, <!-- l. 1200 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>-copy,
     strong complementarity, identity, Hadamard-Hadamard cancellation,
     and Euler decomposition of the Hadamard.
     </p></dd><dt class='enumerate'>
  8.. </dt><dd class='enumerate'>
     <!-- l. 1201 --><p class='noindent'>We can code up a pretty simple yet effective circuit simplification
     routine  by  converting  all  X-spiders  to  Z-spiders,  and  applying
     spider  fusions,  Hadamard-Hadamard  cancellations  and  Hopf  rules
     (Eq. (<a href='#x5-75005r89'>3.89<!-- tex4ht:ref: eq:parallel-h  --></a>)) wherever possible, and then <span class='cmti-10x-x-109'>extracting </span>a circuit from this
     diagram. </p></dd></dl>
<!-- l. 1203 --><p class='noindent'>
</p>
   <h3 class='sectionHead' id='advanced-material1'><span class='titlemark'>3.6   </span> <a id='x5-770003.6'></a>Advanced Material*</h3>
<!-- l. 1204 --><p class='noindent'>
</p>
   <h4 class='subsectionHead' id='formal-rewriting-and-soundness'><span class='titlemark'>3.6.1   </span> <a id='x5-780003.6.1'></a>Formal rewriting and soundness*</h4>
<!-- l. 1205 --><p class='noindent'>While many of you might be familiar with mathematical rewriting of algebraic
expressions, you might be unfamiliar with doing the same with diagrams, and might
even be sceptical that what we are doing is even valid mathematics. To ease those
worries, we will say a bit more about what is actually going on formally when we
rewrite a diagram. The rewrite rules we have given in this chapter are of the form
<!-- l. 1206 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>, where
<!-- l. 1206 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub></math> and
<!-- l. 1206 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></math>
                                                                     

                                                                     
are some ZX-diagrams with the same number of inputs and outputs.
We then used these rewrite rules on <span class='cmti-10x-x-109'>larger </span>diagrams that contain either
<!-- l. 1207 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub></math> or
<!-- l. 1207 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></math>
as subdiagrams. This is because when we are asserting
<!-- l. 1207 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>, we are
actually asserting an entire family of equalities. We are for instance also asserting that
<!-- l. 1207 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi>E</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi>E</mi></mrow></math> for any other
ZX-diagram <!-- l. 1207 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>E</mi></math>, and
<!-- l. 1207 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>D</mi> <mo class='MathClass-bin' stretchy='false'>∘</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>D</mi> <mo class='MathClass-bin' stretchy='false'>∘</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math> for any composable
ZX-diagram <!-- l. 1207 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>D</mi></math>.
In a sense we are assuming we have the following implication: </p><table class='equation'><tr><td>
<!-- l. 1209 --><p class='indent'>
</p><!-- l. 1209 --><object id='x5-78001r90' data="svgs/eq-boxed-rewriting.svg" alt="diagram of eq:boxed-rewriting" class="svg-diagram"></object></td><td class='eq-no'>(3.90)</td></tr></table>
<!-- l. 1212 --><p class='indent'>   In words: if <!-- l. 1212 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub></math>
appears as a subdiagram of some larger ‘ambient’ diagram
<!-- l. 1212 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>D</mi></mrow><mrow><mi>′</mi></mrow></msup></math>, then
<!-- l. 1212 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub></math> can be
replaced by <!-- l. 1212 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></math>
inside of <!-- l. 1212 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>D</mi></mrow><mrow><mi>′</mi></mrow></msup></math>.
We are saying we can apply the rewrite rule regardless of the context. An important
question to settle here is whether this is <span class='cmbx-10x-x-109'>sound</span>. A rewrite rule in a language is
called sound when it preserves the underlying <span class='cmti-10x-x-109'>semantics</span>, i.e. the underlying
meaning. In the setting of ZX-diagrams, the language is the set of diagrammatic
rewrite rules of the ZX-calculus, and the semantics of a ZX-diagram is the linear
map it represents. So a rule in the ZX-calculus is sound when the diagrams on
each side of the equation represent the same matrix. For a single equation like
<!-- l. 1213 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>
soundness is easy to check: just calculate the matrix on both sides. But how can
we be sure that employing this rewrite rule in a larger context as in (<a href='#x5-78001r90'>3.90<!-- tex4ht:ref: eq:boxed-rewriting  --></a>) is still
sound when we would have to check an infinite family of diagrams? To make the
following discussion more clear, we will denote the matrix of a ZX-diagram
<!-- l. 1214 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>D</mi></math> by
<!-- l. 1214 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi mathvariant='italic'>⟦D⟧</mi></mrow></math>. We can then say a
                                                                     

                                                                     
diagrammatic rule <!-- l. 1214 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>
is sound when <!-- l. 1214 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub><mi>⟧</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub><mi>⟧</mi></mrow></math>.
By definition of how we calculate the matrix of a ZX-diagram, we have
<!-- l. 1215 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub><mi>⟧</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub><mi>⟧</mi><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub><mi>⟧</mi></mrow></math> and
<!-- l. 1215 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>∘</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub><mi>⟧</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub><mi>⟧</mi><mo class='MathClass-bin' stretchy='false'>∘</mo><mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub><mi>⟧</mi></mrow></math>,
where this last composition is just matrix multiplication. Hence, if we have
<!-- l. 1216 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub><mi>⟧</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub><mi>⟧</mi></mrow></math>, then we also
have <!-- l. 1216 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi mathvariant='italic'>E⟧</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub><mi>⟧</mi><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi mathvariant='italic'>⟦E⟧</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub><mi>⟧</mi><mo class='MathClass-bin' stretchy='false'>⊗</mo><mi mathvariant='italic'>⟦E⟧</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi mathvariant='italic'>E⟧</mi></mrow></math>, and hence
<!-- l. 1216 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi>E</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>⊗</mo> <mi>E</mi></mrow></math> is also sound.
Similarly we have <!-- l. 1216 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>1</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>∘</mo> <mi mathvariant='italic'>E⟧</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>⟦</mi><msub><mrow><mi>D</mi></mrow><mrow><mn>2</mn></mrow></msub> <mo class='MathClass-bin' stretchy='false'>∘</mo> <mi mathvariant='italic'>E⟧</mi></mrow></math>.
Since we build any ZX-diagram by iteratively composing and tensoring, this
shows that the rewrite rule stays sound regardless of the context it appears in,
and hence that the implication in (<a href='#x5-78001r90'>3.90<!-- tex4ht:ref: eq:boxed-rewriting  --></a>) is indeed true. Even given this
discussion, some of you might still not be happy about this. How can all of this
be rigorous mathematics when it is just pictures on a page? Since this is a
quantum computing book and not a mathematics book, we won’t give the actual
proof that all of this is solid here, and instead we will give a Proof by Fancy
Words and point the interested reader to the References of this chapter. So here
it comes: the right formal language to think about the ZX-calculus is <span class='cmti-10x-x-109'>category
theory</span>. In a <span class='cmti-10x-x-109'>symmetric monoidal </span>category we can compose <span class='cmti-10x-x-109'>morphisms </span>via both
horizontal and vertical composition. The <span class='cmti-10x-x-109'>coherence theorem </span>then tells us that the
<span class='cmti-10x-x-109'>coherence isomorphisms </span>of a symmetric monoidal category are enough
to prove we can move morphisms around on a page while preserving
equality. Because ZX-diagrams have cups and caps they are actually an
example of a <span class='cmti-10x-x-109'>compact closed category</span>, for which an even stronger coherence
theorem is true, so that we can move the generators around the cups and
caps as well. The interpretation into linear maps is a <span class='cmti-10x-x-109'>strong monoidal
functor </span>from ZX-diagrams to the category of complex vector spaces. The
rewrite rules can be understood as an equivalence relation which respect
composition and tensor product, so that it induces a <span class='cmti-10x-x-109'>quotient category </span>of
ZX-diagrams modulo equality by rewrite rule. Soundness of the rewrite
rules means that the functor into linear maps restricts to this quotient
category.
</p>
   <h4 class='subsectionHead' id='dealing-with-scalars'><span class='titlemark'>3.6.2   </span> <a id='x5-790003.6.2'></a>Dealing with scalars*</h4>
<!-- l. 1221 --><p class='noindent'>We have been ignoring non-zero scalar factors in ZX-diagrams in this chapter,
and will continue to do so for most of the rest of the book. This is not however
because the ZX-calculus is incapable of reasoning about scalars. The
opposite in fact: because it is a straightforward exercise to deal with
the scalar factors once you know a couple of tricks, it just isn’t worth
the effort of including them most of the time. In this section we will
                                                                     

                                                                     
see what some of these tricks are. So first, the rule set of Figure <a href='#the-standard-rules-of-the-zxcalculus'>3.0<!-- tex4ht:ref: fig:zx-rules  --></a> is
not taking into account the actual scalar factors. Instead, we should
use a rule set where we do have all the correct scalars. See Figure <a href='#a-complete-and-scalaraccurate-set-of-rewrites-rules-for-the-clifford-fragment-of-the-zxcalculus-these-rules-hold-for-all-r'>3.0<!-- tex4ht:ref: fig:zx-rules-Clifford  --></a>.
</p><figure class='figure' id='x5-790010'><span id='a-complete-and-scalaraccurate-set-of-rewrites-rules-for-the-clifford-fragment-of-the-zxcalculus-these-rules-hold-for-all-r'></span> 

                                                                     

                                                                     

                                                                     

                                                                     
<!-- l. 1227 --><p class='noindent'>figure<a id='figure._theHfigure_'></a>
</p>
<div class='center'>
<!-- l. 1228 --><p class='noindent'>
</p><!-- l. 1229 --><p class='noindent'><object data="svgs/zx-rules-Clifford.svg" alt="diagram of zx-rules-Clifford" class="svg-diagram"></object> </p></div>
<figcaption class='caption'><span class='id'>Figure 3.0:  </span><span class='content'>A  complete  and  scalar-accurate  set  of  rewrites  rules  for
the  Clifford  fragment  of  the  ZX-calculus.  These  rules  hold  for  all
<!-- l. 1232 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>β</mi> <mo class='MathClass-rel' stretchy='false'>∈</mo> <mi>R</mi></mrow></math></span></figcaption><!-- tex4ht:label?: x5-790010  -->
                                                                     

                                                                     
   </figure>
<!-- l. 1234 --><p class='indent'>   Most of these rules should look familiar, but there are some perhaps
weird-looking things going on. Let’s go through the differences rule by rule. The
spider-fusion rule and the colour-change rule are unchanged. We have split up the
strong complementarity rule into two parts, a bialgebra rule and a state-copy
rule. This is necessary because the scalar factor for strong complementarity
depends on the number of inputs and outputs of the diagram. These scalar
subdiagrams included in the rules should make more sense once you recall what
they are equal to: </p><table class='equation-star'><tr><td>
<!-- l. 1239 --><object data="svgs/scalars.svg" alt="diagram of scalars" class="svg-diagram"></object></td></tr></table>
<!-- l. 1242 --><p class='indent'>   The identity-removal rule and the Hadamard cancellation rule are still the
same, but we now have chosen for a different Euler decomposition of
the Hadamard that does not need a global phase to be accurate. We
have replaced the pi-commutation rule for a more minimal one that has
now acquired a scalar factor (which corresponds to a global phase of
<!-- l. 1243 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msup><mrow><mi>e</mi></mrow><mrow><mi mathvariant='italic'>iα</mi></mrow></msup></math>).
Finally, there are two new rewrite rules. The first rewrite
rule <!-- l. 1244 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>zo</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math> tells
us that in the presence of a zero scalar, essentially anything equals each other. For
instance, as we will see later, we can use it to show that the identity wire disconnects. The
second rule <!-- l. 1244 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>s</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
allows us to cancel some scalars. This essentially implements
<!-- l. 1244 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msqrt><mrow>
<mn>2</mn></mrow></msqrt> <mo class='MathClass-bin' stretchy='false'>⋅</mo> <mn>1</mn><mo class='MathClass-bin' stretchy='false'>∕</mo><msqrt><mrow><mn>2</mn></mrow></msqrt> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>1</mn></mrow></math>. Note
that the right-hand side is the empty diagram. This rule is in fact necessary: there is
no other rewrite rule that can produce an empty diagram, so the equation of
<!-- l. 1244 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>s</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math> can
not be proven by any combination of the other rewrite rules. It can also be shown
that <!-- l. 1244 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>zo</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
is necessary using a more complicated argument. Now in this section we will show
two things we can do with scalars. First, we will show that when there is a zero
scalar <!-- l. 1245 --><img src="svgs/pi.svg" alt="diagram of pi" class="inline-diagram" />
that the entire diagram can be simplified, so that every two diagrams
with this scalar in it are the same. Second, we will show that certain
                                                                     

                                                                     
scalar diagrams can be ‘multiplied’ together in exactly the way we would
expect for their corresponding scalar values. So let’s prove some things
about scalar diagrams. In this section, whenever we refer to a rewrite rule
like <!-- l. 1248 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>sc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>,
we are meaning the rewrite rules from Figure <a href='#a-complete-and-scalaraccurate-set-of-rewrites-rules-for-the-clifford-fragment-of-the-zxcalculus-these-rules-hold-for-all-r'>3.0<!-- tex4ht:ref: fig:zx-rules-Clifford  --></a>, not Figure <a href='#the-standard-rules-of-the-zxcalculus'>3.0<!-- tex4ht:ref: fig:zx-rules  --></a>. Note that due
to <!-- l. 1248 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>cc</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
and <!-- l. 1248 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mstyle class='label' xlink:href='#x5-580020' xlink:type='simple' xmlns:xlink='http://www.w3.org/1999/xlink'><mstyle mathvariant='bold'><mi>hh</mi></mstyle></mstyle><!-- endlabel --><mo class='MathClass-close' stretchy='false'>)</mo></mrow></math>
that all the rules also hold with the colours interchanged as usual.
</p>
   <div class='newtheorem'>
<!-- l. 1249 --><p class='noindent'><span class='head'>
<a id='x5-79002r1'></a>
<span class='cmbx-10x-x-109'>Lemma 3.6.1.</span>  </span> Twice <!-- l. 1250 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><msqrt><mrow><mn>2</mn></mrow></msqrt></math>
equals <!-- l. 1250 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mn>2</mn></math>:
</p>
<div class='center'>
<!-- l. 1252 --><p class='noindent'>
</p><!-- l. 1253 --><p class='noindent'><object data="svgs/scalar-2sqrt2-is-2.svg" alt="diagram of scalar-2sqrt2-is-2" class="svg-diagram"></object> </p></div>
   </div>
<!-- l. 1256 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1258 --><p class='indent'>   <span class='head'>
<span class='cmti-10x-x-109'>Proof.</span> </span></p><table class='equation-star'><tr><td>
<!-- l. 1258 --><object data="svgs/scalar-2sqrt2-is-2-pf.svg" alt="diagram of scalar-2sqrt2-is-2-pf" class="svg-diagram"></object></td></tr></table>
                                                                   □
                                                                     

                                                                     
   </div>
<!-- l. 1262 --><p class='indent'>   Now we can show that any two diagrams that contain a zero scalar can be
rewritten into each other by reducing them a unique normal form. This will
require a couple of lemmas.
</p>
   <div class='newtheorem'>
<!-- l. 1263 --><p class='noindent'><span class='head'>
<a id='x5-79003r2'></a>
<span class='cmbx-10x-x-109'>Lemma 3.6.2.</span>  </span> <!-- l. 1264 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msqrt><mrow><mn>2</mn></mrow></msqrt> <mo class='MathClass-bin' stretchy='false'>⋅</mo> <mn>0</mn> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>0</mn></mrow></math>:
</p>
<div class='center'>
<!-- l. 1266 --><p class='noindent'>
</p><!-- l. 1267 --><p class='noindent'><object data="svgs/zero-eat-sqrt2.svg" alt="diagram of zero-eat-sqrt2" class="svg-diagram"></object> </p></div>
   </div>
<!-- l. 1270 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1272 --><p class='indent'>   <span class='head'>
<span class='cmti-10x-x-109'>Proof.</span> </span></p><table class='equation-star'><tr><td>
<!-- l. 1272 --><object data="svgs/zero-eat-sqrt2-pf.svg" alt="diagram of zero-eat-sqrt2-pf" class="svg-diagram"></object></td></tr></table>
                                                                   □
   </div>
   <div class='newtheorem'>
<!-- l. 1276 --><p class='noindent'><span class='head'>
<a id='x5-79004r3'></a>
                                                                     

                                                                     
<span class='cmbx-10x-x-109'>Lemma 3.6.3.</span>  </span> 
</p>
<div class='center'>
<!-- l. 1278 --><p class='noindent'>
</p><!-- l. 1279 --><p class='noindent'><object data="svgs/zero-id-disconnect.svg" alt="diagram of zero-id-disconnect" class="svg-diagram"></object> </p></div>
   </div>
<!-- l. 1282 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1284 --><p class='indent'>   <span class='head'>
<span class='cmti-10x-x-109'>Proof.</span> </span></p><table class='equation-star'><tr><td>
<!-- l. 1284 --><object data="svgs/zero-id-disconnect-pf.svg" alt="diagram of zero-id-disconnect-pf" class="svg-diagram"></object></td></tr></table>
                                                                   □
   </div>
   <div class='newtheorem'>
<!-- l. 1288 --><p class='noindent'><span class='head'>
<a id='x5-79005r4'></a>
<span class='cmbx-10x-x-109'>Lemma 3.6.4.</span>  </span> 
</p>
<div class='center'>
<!-- l. 1290 --><p class='noindent'>
</p><!-- l. 1291 --><p class='noindent'><object data="svgs/scalar-phase-consume.svg" alt="diagram of scalar-phase-consume" class="svg-diagram"></object> </p></div>
                                                                     

                                                                     
   </div>
<!-- l. 1294 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1296 --><p class='indent'>   <span class='head'>
<span class='cmti-10x-x-109'>Proof.</span> </span>First we prove the (colour-reversed) version where
<!-- l. 1296 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>π</mi></mrow></math>:
</p><table class='equation'><tr><td>
<!-- l. 1297 --><p class='indent'>
</p><!-- l. 1297 --><object id='x5-79006r91' data="svgs/eq-scalar-pi-consume.svg" alt="diagram of eq:scalar-pi-consume" class="svg-diagram"></object></td><td class='eq-no'>(3.91)</td></tr></table>
<!-- l. 1300 --><p class='indent'>   And then we prove the general case: </p><table class='equation-star'><tr><td>
<!-- l. 1301 --><object data="svgs/scalar-phase-consume-pf.svg" alt="diagram of scalar-phase-consume-pf" class="svg-diagram"></object></td></tr></table>
                                                                   □
   </div>
   <div class='newtheorem'>
<!-- l. 1305 --><p class='noindent'><span class='head'>
<a id='x5-79007r5'></a>
                                                                     

                                                                     
<span class='cmbx-10x-x-109'>Proposition 3.6.5.</span>  </span> Any ZX-diagram with
<!-- l. 1306 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> inputs
and <!-- l. 1306 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>m</mi></math>
outputs containing a zero scalar can be rewritten to the following normal form:
</p><table class='equation'><tr><td>
<!-- l. 1307 --><p class='indent'>
</p><!-- l. 1307 --><object id='x5-79008r92' data="svgs/eq-zero-normal-form.svg" alt="diagram of eq:zero-normal-form" class="svg-diagram"></object></td><td class='eq-no'>(3.92)</td></tr></table>
   </div>
<!-- l. 1310 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1312 --><p class='indent'>   <span class='head'>
<span class='cmti-10x-x-109'>Proof.</span> </span>Apply Lemma <a href='#x5-79004r3'>3.6.3<!-- tex4ht:ref: lem:zero-id-disconnect  --></a> to all the connections between spiders and the
inputs and outputs. The resulting diagram is then that of Eq. (<a href='#x5-79008r92'>3.92<!-- tex4ht:ref: eq:zero-normal-form  --></a>) except
that there might be some scalar pairs of spiders and some isolated spiders,
at  most  one  of  which  has  a  phase.  This  phase  can  be  removed  using
Lemma <a href='#x5-79005r4'>3.6.4<!-- tex4ht:ref: lem:scalar-phase-consume  --></a>. If it is an isolated spider then it can be decomposed into a
pair of pairs using Lemma <a href='#x5-79002r1'>3.6.1<!-- tex4ht:ref: lem:scalar-2sqrt2-is-2  --></a>. Now all the scalar pairs of spiders can be
removed using Lemma <a href='#x5-79003r2'>3.6.2<!-- tex4ht:ref: lem:zero-eat-sqrt2  --></a>.                                                           □
</p>
   </div>
<!-- l. 1315 --><p class='indent'>   Now let’s see how we can combine some scalar diagrams by ‘multiplying’
them together.
</p>
   <div class='newtheorem'>
<!-- l. 1316 --><p class='noindent'><span class='head'>
<a id='x5-79009r6'></a>
                                                                     

                                                                     
<span class='cmbx-10x-x-109'>Lemma 3.6.6.</span>  </span> Two complex phases can be added together: </p><table class='equation-star'><tr><td>
<!-- l. 1318 --><object data="svgs/scalar-phases-combine.svg" alt="diagram of scalar-phases-combine" class="svg-diagram"></object></td></tr></table>
   </div>
<!-- l. 1321 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1323 --><p class='indent'>   <span class='head'>
<span class='cmti-10x-x-109'>Proof.</span> </span></p><table class='equation-star'><tr><td>
<!-- l. 1323 --><object data="svgs/scalar-phases-combine-pf.svg" alt="diagram of scalar-phases-combine-pf" class="svg-diagram"></object></td></tr></table>
                                                                   □
   </div>
<!-- l. 1327 --><p class='indent'>   As a special case, where <!-- l. 1327 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>β</mi> <mo class='MathClass-rel' stretchy='false'>=</mo> <mi>π</mi></mrow></math>
we can show that <!-- l. 1327 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-bin' stretchy='false'>−</mo><msqrt><mrow><mn>2</mn></mrow></msqrt><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-bin' stretchy='false'>⋅</mo> <mo class='MathClass-open' stretchy='false'>(</mo><mo class='MathClass-bin' stretchy='false'>−</mo><msqrt><mrow><mn>2</mn></mrow></msqrt><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>2</mn></mrow></math>:
</p>
   <div class='newtheorem'>
<!-- l. 1328 --><p class='noindent'><span class='head'>
<a id='x5-79010r7'></a>
                                                                     

                                                                     
<span class='cmbx-10x-x-109'>Lemma 3.6.7.</span>  </span> 
</p>
<div class='center'>
<!-- l. 1330 --><p class='noindent'>
</p><!-- l. 1331 --><p class='noindent'><object data="svgs/scalar-min1-min1.svg" alt="diagram of scalar-min1-min1" class="svg-diagram"></object> </p></div>
   </div>
<!-- l. 1334 --><p class='indent'>    Note that when the X-spider does not have a
<!-- l. 1335 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math> phase, that the
phases simply dissappear as in Lemma <a href='#x5-79005r4'>3.6.4<!-- tex4ht:ref: lem:scalar-phase-consume  --></a>. We can also simplify some expressions involving
<!-- l. 1336 --><img src="svgs/fracpi2.svg" alt="diagram of fracpi2" class="inline-diagram" />. This is because
this diagram equals <!-- l. 1338 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <mi>i</mi></mrow></math>,
and when we multiply it with itself, for instance, we get
<!-- l. 1338 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mo class='MathClass-open' stretchy='false'>(</mo><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <mi>i</mi><mo class='MathClass-close' stretchy='false'>)</mo><mo class='MathClass-open' stretchy='false'>(</mo><mn>1</mn> <mo class='MathClass-bin' stretchy='false'>+</mo> <mi>i</mi><mo class='MathClass-close' stretchy='false'>)</mo> <mo class='MathClass-rel' stretchy='false'>=</mo> <mn>2</mn><mi>i</mi></mrow></math>,
which should be equal to a simpler diagram. In order to prove this, we will need
the following scalar-accurate version of Eq. <a href='#x5-67009r84'>3.84<!-- tex4ht:ref: eq:S-state-equality  --></a> in Exercise <a href='#x5-67008r15'>3.15<!-- tex4ht:ref: exer:S-state-equality  --></a>.
</p>
   <div class='newtheorem'>
<!-- l. 1339 --><p class='noindent'><span class='head'>
<a id='x5-79011r8'></a>
<span class='cmbx-10x-x-109'>Lemma 3.6.8.</span>  </span> 
</p>
<div class='center'>
<!-- l. 1341 --><p class='noindent'>
</p><!-- l. 1342 --><p class='noindent'><object data="svgs/S-state-eq-with-scalars.svg" alt="diagram of S-state-eq-with-scalars" class="svg-diagram"></object> </p></div>
   </div>
<!-- l. 1345 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1347 --><p class='indent'>   <span class='head'>
<span class='cmti-10x-x-109'>Proof.</span> </span>We prove this using the colour-reversed Euler decomposition rule of
Figure <a href='#a-complete-and-scalaraccurate-set-of-rewrites-rules-for-the-clifford-fragment-of-the-zxcalculus-these-rules-hold-for-all-r'>3.0<!-- tex4ht:ref: fig:zx-rules-Clifford  --></a>: </p><table class='equation-star'><tr><td>
                                                                     

                                                                     
<!-- l. 1348 --><object data="svgs/S-state-eq-with-scalars-pf.svg" alt="diagram of S-state-eq-with-scalars-pf" class="svg-diagram"></object></td></tr></table>
                                                                   □
   </div>
   <div class='newtheorem'>
<!-- l. 1352 --><p class='noindent'><span class='head'>
<a id='x5-79012r9'></a>
<span class='cmbx-10x-x-109'>Lemma 3.6.9.</span>  </span>                 All                    instances                    of
<!-- l. 1353 --><img src="svgs/fracpi2.svg" alt="diagram of fracpi2" class="inline-diagram" />
and
<!-- l. 1355 --><img src="svgs/fracpi2-1.svg" alt="diagram of fracpi2-1" class="inline-diagram" />
can       be       combined       together       so       that       only       one
<!-- l. 1357 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-bin' stretchy='false'>±</mo><mfrac><mrow><mi>π</mi></mrow> 
<mrow><mn>2</mn></mrow></mfrac> </mrow></math>
phase is necessary.
</p>
   </div>
<!-- l. 1358 --><p class='indent'>
</p>
   <div class='proof'>
<!-- l. 1360 --><p class='indent'>   <span class='head'>
<span class='cmti-10x-x-109'>Proof.</span> </span>First, when we have two <!-- l. 1360 --><img src="svgs/fracpi2.svg" alt="diagram of fracpi2" class="inline-diagram" />
subdiagrams we do the following rewrite: </p><table class='equation'><tr><td>
<!-- l. 1363 --><p class='indent'>
                                                                     

                                                                     
</p><!-- l. 1363 --><object id='x5-79013r93' data="svgs/eq-scalar-pi2-pi2-cancel.svg" alt="diagram of eq:scalar-pi2-pi2-cancel" class="svg-diagram"></object></td><td class='eq-no'>(3.93)</td></tr></table>
<!-- l. 1366 --><p class='indent'>   When we have multiple diagrams resulting in this way, we can
combine them using Lemma <a href='#x5-79009r6'>3.6.6<!-- tex4ht:ref: lem:scalar-phases-combine  --></a>. We can use this to combine a
<!-- l. 1367 --><img src="svgs/fracpi2.svg" alt="diagram of fracpi2" class="inline-diagram" /> and a
<!-- l. 1369 --><img src="svgs/fracpi2-2.svg" alt="diagram of fracpi2-2" class="inline-diagram" /> as
well: </p><table class='equation'><tr><td>
<!-- l. 1372 --><p class='indent'>
</p><!-- l. 1372 --><object id='x5-79014r94' data="svgs/eq-scalar-pi2-minpi2-cancel.svg" alt="diagram of eq:scalar-pi2-minpi2-cancel" class="svg-diagram"></object></td><td class='eq-no'>(3.94)</td></tr></table>
<!-- l. 1375 --><p class='indent'>   We leave it to the reader to find an analogous simplification of Eq. (<a href='#x5-79013r93'>3.93<!-- tex4ht:ref: eq:scalar-pi2-pi2-cancel  --></a>) to
combine <!-- l. 1375 --><img src="svgs/fracpi2.svg" alt="diagram of fracpi2" class="inline-diagram" />.
After applying these rewrites there are then at most two
<!-- l. 1378 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> </mrow></math>
phases in the diagram, one coming from a possible
<!-- l. 1378 --><img src="svgs/fracpi2.svg" alt="diagram of fracpi2" class="inline-diagram" /> or
<!-- l. 1380 --><img src="svgs/fracpi2-2.svg" alt="diagram of fracpi2-2" class="inline-diagram" />, and
the other coming from a diagram which results from the rewrite (<a href='#x5-79013r93'>3.93<!-- tex4ht:ref: eq:scalar-pi2-pi2-cancel  --></a>). These
can be combined as follows: </p><table class='equation-star'><tr><td>
<!-- l. 1383 --><object data="svgs/scalar-combine-pi2s.svg" alt="diagram of scalar-combine-pi2s" class="svg-diagram"></object></td></tr></table>
                                                                     

                                                                     
<!-- l. 1386 --><p class='indent'>   The case with <!-- l. 1386 --><img src="svgs/fracpi2-2.svg" alt="diagram of fracpi2-2" class="inline-diagram" />
is proven similarly.                                                                        □
</p>
   </div>
<!-- l. 1390 --><p class='indent'>   There is of course more to be said about calculating the values of small scalar
ZX-diagrams in this way, but hopefully the reader can see now how this generally
can be done. We will use these results on manipulating scalars in Section <a href='main_htmlch5.html#completeness-of-clifford-zxdiagrams'>5.5<!-- tex4ht:ref: sec:completeness-Clifford  --></a>
when we prove that the rules of Figure <a href='#a-complete-and-scalaraccurate-set-of-rewrites-rules-for-the-clifford-fragment-of-the-zxcalculus-these-rules-hold-for-all-r'>3.0<!-- tex4ht:ref: fig:zx-rules-Clifford  --></a> are actually enough to prove all
equalities concerning ZX-diagrams where the phases are multiples of
<!-- l. 1390 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mfrac><mrow><mi>π</mi></mrow>
<mrow><mn>2</mn></mrow></mfrac> </mrow></math>.
</p>
   <h3 class='sectionHead' id='references-and-further-reading1'><span class='titlemark'>3.7   </span> <a id='x5-800003.7'></a>References and further reading</h3>
<!-- l. 1392 --><p class='noindent'><span class='paragraphHead' id='categorical-quantum-mechanics'><a id='x5-81000'></a><span class='cmbx-10x-x-109'>Categorical quantum mechanics</span></span>
   The ZX-calculus came forth from the field of <span class='cmti-10x-x-109'>categorical quantum
mechanics</span>, an area of research initiated by [<a href='main_htmlli2.html#XAC1'>2</a>] that aimed to study quantum
phenomena abstractly, using nothing but the structure of <span class='cmti-10x-x-109'>symmetric monoidal
categories</span>. These are mathematical structures wherein both composition and
tensor product make sense [<a href='main_htmlli2.html#Xselinger2010survey'>205</a>]: in a category we have composition [<a href='main_htmlli2.html#Xmac2013categories'>165</a>],
‘monoidal’ means that there is a tensor product, and ‘symmetric’ means that
we have a SWAP operation. In a ZX-diagram we can’t just swap two
inputs, we can also swap an input with an output using cups and caps. A
category with this kind of structure is called <span class='cmti-10x-x-109'>compact closed</span> [<a href='main_htmlli2.html#Xkelly1980coherence'>141</a>]. It is in
this abstract category theory that it was proven that we can move the
generators around on the page while preserving the semantics of the
diagram, and hence why it even makes sense to write it as a diagram.
The original categorical quantum mechanics paper [<a href='main_htmlli2.html#XAC1'>2</a>] gave a proof of
quantum teleportation that is essentially the basis of the ZX proof in
Section <a href='#teleportation'>3.3.2<!-- tex4ht:ref: sec:teleportation  --></a>.
</p>
<!-- l. 1395 --><p class='noindent'><span class='paragraphHead' id='the-origin-of-the-zxcalculus'><a id='x5-82000'></a><span class='cmbx-10x-x-109'>The origin of the ZX-calculus</span></span>
   The ZX-calculus was born on a bus in Iran in 2007. Bob Coecke, a
professor at Oxford and Ross Duncan, a recently-finished PhD student, were
discussing how to capture a certain feature of quantum measurements using
category theory. In particular, they were thinking about mutually unbiased
bases (mubs), i.e. sets of bases that pairwise satisfy equation (<a href='#x5-64006r65'>3.65<!-- tex4ht:ref: eq:mub  --></a>) from
Section <a href='#complementarity'>3.2.4.2<!-- tex4ht:ref: sec:complementarity  --></a>. While mubs, which were first introduced by [<a href='main_htmlli2.html#XSchwinger'>204</a>], are very
simple to define, they have a suprisingly rich structure that is still only
                                                                     

                                                                     
partially understood. A running joke at the time was, if you wanted to ruin
a quantum computer scientist’s career (and personal life), you should
just introduce them to the problem of classifying all mubs in dimension
6. Earlier that year, [<a href='main_htmlli2.html#XCPav'>55</a>] gave a more “categorically flavoured” notion
of fixing a measurement, which they called <span class='cmbx-10x-x-109'>classical objects</span>. These
have gone under a variety of names—notably <span class='cmbx-10x-x-109'>classical structures </span>or
<span class='cmbx-10x-x-109'>dagger-special commutative Frobenius algebras</span>—but these days
most people refer to them as <span class='cmbx-10x-x-109'>spiders</span>. It seemed at the time that these
abstract algebraic entities gave the correct notion of fixing an ONB without
needing to refer to concrete Hilbert space structure, an intuition that
was vindicated in 2013 when Coecke, Pavlovic, and Vicary showed that
spiders are in 1-to-1 correspondence with ONBs [<a href='main_htmlli2.html#XCPV'>56</a>]. By studying two
families of spiders satisfying some interaction equations, Coecke and
Duncan hoped to get some deeper insights in the behaviour of mubs,
and hence the ZX-calculus was born [<a href='main_htmlli2.html#XCD1'>57</a>]. In fact, it wasn’t called the
ZX-calculus until almost three years later [<a href='main_htmlli2.html#XCD2'>58</a>], with most early talks and
papers referring to it as the “calculus of complementary observables”,
simply “the graphical calculus”, or even the “Christmas calculus” due
to its convention of using green and red dots for Z and X spiders. As
the story goes, this convention was born from the fact that black and
blue whiteboard markers in the Oxford Computing Laboratory were
constantly running out of ink, so the only working ones were green and
red.
</p>
<!-- l. 1399 --><p class='noindent'><span class='paragraphHead' id='strong-complementarity1'><a id='x5-83000'></a><span class='cmbx-10x-x-109'>Strong complementarity</span></span>
   The name of <span class='cmti-10x-x-109'>strong complementarity </span>for the rule of Section <a href='#strong-complementarity'>3.2.4<!-- tex4ht:ref: sec:bialgebra-hopf  --></a> was
introduced in [<a href='main_htmlli2.html#Xcoecke2012strong'>59</a>], but as noted in that section is also called the <span class='cmti-10x-x-109'>bialgebra</span>
equation. In fact, the bialgebra of a Z-spider and X-spider we have in the
ZX-calculus is a very special case, as both spiders are Frobenius algebras. Two
Frobenius algebras that form a bialgebra are called <span class='cmti-10x-x-109'>interacting Frobenius
algebras</span>. It was shown in [<a href='main_htmlli2.html#Xduncan2016interacting'>87</a>] that these also form a Hopf algebra, essentially
using the proof of Eq. (<a href='#x5-64007r66'>3.66<!-- tex4ht:ref: eq:hopf-proof  --></a>), and hence that strong complementarity implies
regular complementarity.
</p>
<!-- l. 1401 --><p class='noindent'><span class='paragraphHead' id='completeness'><a id='x5-84000'></a><span class='cmbx-10x-x-109'>Completeness</span></span>
   The version of the ZX-calculus from [<a href='main_htmlli2.html#XCD1'>57</a>] was missing the Euler decomposition
rule. This rule was introduced by [<a href='main_htmlli2.html#XDP1'>90</a>], where the authors showed that, without
this rule, the ZX-calculus is incomplete for Clifford ZX-diagrams. With this rule,
one obtains a version of the ZX-calculus equivalent to the one used in this book,
which was shown to be complete for Clifford ZX-diagrams by [<a href='main_htmlli2.html#XBackensCompleteness'>19</a>]. That
same year, [<a href='main_htmlli2.html#XWitt_2014aa'>203</a>] showed that the Clifford ZX-calculus was incomplete for
                                                                     

                                                                     
non-Clifford ZX-diagrams, i.e. if we allow angles that are not multiples of
<!-- l. 1402 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>π</mi><mo class='MathClass-bin' stretchy='false'>∕</mo><mn>2</mn></mrow></math>. The
counter-example, suggested by Kissinger, came from considering the two possible
Euler decompositions of a single-qubit unitary: </p><table class='equation'><tr><td>
<!-- l. 1403 --><p class='indent'>
</p><!-- l. 1403 --><object id='x5-84001r95' data="svgs/eq-p-rule.svg" alt="diagram of eq:p-rule" class="svg-diagram"></object></td><td class='eq-no'>(3.95)</td></tr></table>
<!-- l. 1406 --><p class='indent'>   It is always possible to compute <!-- l. 1406 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><msup><mrow><mi>α</mi></mrow><mrow><mi>′</mi></mrow></msup><mo class='MathClass-punc' stretchy='false'>,</mo><msup><mrow><mi>β</mi></mrow><mrow><mi>′</mi></mrow></msup><mo class='MathClass-punc' stretchy='false'>,</mo><msup><mrow><mi>γ</mi></mrow><mrow><mi>′</mi></mrow></msup></mrow></math>
as (fairly elaborate) trigonometric functions of
<!-- l. 1406 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>α</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>β</mi><mo class='MathClass-punc' stretchy='false'>,</mo><mi>γ</mi></mrow></math>. When the angles
on the LHS are not <!-- l. 1406 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>π</mi><mo class='MathClass-bin' stretchy='false'>∕</mo><mn>2</mn></mrow></math>
multiples, the angles on the RHS are typically irrational multiples of
<!-- l. 1406 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>π</mi></math>,
and it is not possible to prove equation (<a href='#x5-84001r95'>3.95<!-- tex4ht:ref: eq:p-rule  --></a>) using just the Clifford
ZX rules. This remained the status of completeness for several years,
and it seemed like it might even be the case that no finite set of rules
would suffice to show completeness for a computationally universal
fragment of the ZX-calculus such as Clifford+T ZX-diagrams (with
<!-- l. 1407 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>π</mi><mo class='MathClass-bin' stretchy='false'>∕</mo><mn>4</mn></mrow></math>
multiple phases) or all ZX-diagrams (with arbitrary phases). Some smaller results
appeared, such as the one-qubit Clifford+T completeness of [<a href='main_htmlli2.html#XBackens2'>20</a>] and the 2-qubit
completeness of [<a href='main_htmlli2.html#Xcoecke2018zx'>63</a>], but it remained unclear how to extend these to
<!-- l. 1407 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math> qubits.
In fact, Aleks would have bet money in 2015 that no finite, complete set of rules for
<!-- l. 1407 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mi>n</mi></math>-qubit
Clifford+T ZX-diagrams existed. <span class='cmti-10x-x-109'>Picturing Quantum Processes</span>, the precursor to
this book, which came out in the spring of 2017, had this problem as an
“advanced exercise”, at least partially as a joke. However, it’s a good thing Aleks
didn’t bet, because he would have lost his money. In the autumn of 2017,
Jeandel, Perdrix, and Vilmart showed a complete ZX-calculus for the
Clifford+T fragment [<a href='main_htmlli2.html#XSimonCompleteness'>136</a>], and later that same year Wang and Ng showed
completeness for all ZX-diagrams [<a href='main_htmlli2.html#XHarnyCompleteness'>187</a>]. The key idea in these two completeness
theorems was to use an encoding into a related graphical calculus called the
ZW-calculus, formulated by [<a href='main_htmlli2.html#XCK'>53</a>] and proved complete by [<a href='main_htmlli2.html#XAmar'>121</a>]. While these
presentations of the ZX-calculus were complete, they contained some
                                                                     

                                                                     
redundancy, in the sense that some rules could be derived from others. A more
compact presentation of the Clifford ZX-calculus, consisting just of the
spider rules, strong complementarity, Euler, and colour change rules,
was given by [<a href='main_htmlli2.html#XminimalZX'>24</a>]. Similarly, a small complete set of rules for the full
ZX-calculus was given by [<a href='main_htmlli2.html#Xvilmarteulercompleteness'>229</a>], essentially by adding (<a href='#x5-84001r95'>3.95<!-- tex4ht:ref: eq:p-rule  --></a>) to the basic Clifford
rules.
</p>
<!-- l. 1410 --><p class='noindent'><span class='paragraphHead' id='measurementbased-quantum-computing'><a id='x5-85000'></a><span class='cmbx-10x-x-109'>Measurement-based quantum computing</span></span>
   Along with understanding the structure of mutually unbiased bases, a lot of
the early development into ZX-calculus was motivated by providing a convenient
notation for working with the one-way model of measurement-based quantum
computation (MBQC), which we’ll discuss extensively in Chapter <a href='main_htmlch8.html#measurementbased-quantum-computation'>8<!-- tex4ht:ref: ch:mbqc  --></a>. The
representation of cluster states as ZX-diagrams already appeared in the first
paper [<a href='main_htmlli2.html#XCD1'>57</a>] and started to be put to good use in subsequent work relating
quantum circuits and measurement patterns [<a href='main_htmlli2.html#Xduncan2010rewriting'>91</a>] and doing ZX-based
optimisation of quantum circuits [<a href='main_htmlli2.html#Xduncan2019graph'>88</a>].
</p>
<!-- l. 1412 --><p class='noindent'><span class='paragraphHead' id='resources'><a id='x5-86000'></a><span class='cmbx-10x-x-109'>Resources</span></span>
   To some extent, this book grew out of the survey/tutorial paper <span class='cmti-10x-x-109'>ZX for the
Working Quantum Computer Scientist </span>[<a href='main_htmlli2.html#Xvandewetering2020zxcalculus'>222</a>], which presents some of
the topics we cover in a more condensed form. A good place to start
learning more about ZX is  <a href='http://zxcalculus.com'>zxcalculus.com</a>, which maintains a tagged list of
<!-- l. 1413 --><math display='inline' xmlns='http://www.w3.org/1998/Math/MathML'><mrow> <mo class='MathClass-rel' stretchy='false'>&gt;</mo></mrow></math>100
papers on ZX, related calculi, and applications. It also contains information
about various communities, online seminars, and mailing lists. The diagrams in
this book were typeset with the help of  <a href='https://tikzit.github.io/'>TikZiT</a>, which acts as a GUI for making
LaTeX suitable TikZ diagrams. TikZiT was made by Aleks in an effort to make
typesetting the 5000 diagrams in his previous book somewhat less horrific, and
his current coauthor John is very thankful for its existence.    </p><!-- l. 7 --><div class='crosslinks'><p class='noindent'>[<a href='main_htmlch4.html'>next</a>] [<a href='main_htmlch2.html'>prev</a>]
[<a href='main_htmlch2.html#tailmain_htmlch2.html'>prev-tail</a>] [<a href='main_htmlch3.html'>front</a>] [<a href='main_html.html#main_htmlch3.html'>up</a>] </p></div>
<!-- l. 7 --><p class='indent'>   <a id='tailmain_htmlch3.html'></a></p> 
<script type="text/javascript" src="proof_collapse.js"></script> 
<script type="text/javascript" src="navigation_menu.js"></script> </body> 
</html>